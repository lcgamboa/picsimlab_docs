<!DOCTYPE html> 
<html xml:lang='en' lang='en'> 
<head><title>Board code</title> 
<meta charset='utf-8' /> 
<meta name='generator' content='TeX4ht (https://tug.org/tex4ht/)' /> 
<meta name='viewport' content='width=device-width,initial-scale=1' /> 
<link type='text/css' rel='stylesheet' href='picsimlab.css' /> 
<meta name='src' content='picsimlab.tex' /> 
<link type='text/css' rel='stylesheet' href='style.css' /> 
</head><body>
   <nav class='TOC'><span class='chapterToc'>1 <a href='Introduction.html#x3-20001'>Introduction</a></span><span class='chapterToc'>2 <a href='Install.html#x4-30002'>Install</a></span><span class='chapterToc'>3 <a href='SimulatorInterface.html#x11-100003'>Simulator Interface</a></span><span class='chapterToc'>4 <a href='Boards.html#x16-150004'>Boards</a></span><span class='chapterToc'>5 <a href='ExperimentalBoards.html#x25-240005'>Experimental Boards</a></span><span class='chapterToc'>6 <a href='SerialCommunicationlabelseriali.html#x34-330006'>Serial Communication </a></span><span class='chapterToc'>7 <a href='DebugSupport.html#x37-360007'>Debug Support</a></span><span class='chapterToc'>8 <a href='Tools.html#x43-420008'>Tools</a></span><span class='chapterToc'>9 <a href='Oscilloscope.html#x53-580009'>Oscilloscope</a></span><span class='chapterToc'>10 <a href='SpareParts.html#x54-5900010'>Spare Parts</a></span><span class='chapterToc'>11 <a href='Troubleshooting.html#x101-10600011'>Troubleshooting</a></span><span class='chapterToc'>12 <a href='UsewithMPLABX.html#x102-10700012'>Use with MPLABX</a></span><span class='chapterToc'>13 <a href='CreatingNewBoards.html#x121-12600013'>Creating New Boards</a></span><span class='sectionToc'>13.1 <a href='HowtoCompilePICsimLab.html#x122-12700013.1'>How to Compile PICsimLab</a></span><span class='sectionToc'>13.2 <a href='CreatingaNewBoard.html#x125-13000013.2'>Creating a New Board</a></span><span class='subsectionToc'>13.2.1 <a href='BoardHardwareandSchematic.html#x126-13100013.2.1'>Board Hardware and Schematic</a></span><span class='subsectionToc'>13.2.2 <a href='BoardPicture.html#x127-13200013.2.2'>Board Picture</a></span><span class='subsectionToc'>13.2.3 <a href='Picturemaps.html#x128-13300013.2.3'>Picture maps</a></span><span class='subsectionToc'>13.2.4 <a href='#x129-13600013.2.4'>Board code</a></span><span class='subsectionToc'>13.2.5 <a href='IntegrationwithPICsimLab.html#x130-14000013.2.5'>Integration with PICsimLab</a></span><span class='subsectionToc'>13.2.6 <a href='FinalResult.html#x131-14100013.2.6'>Final Result</a></span><span class='chapterToc'>14 <a href='License.html#x132-14200014'>License</a></span></nav> 
<main class='main-content'> 
<nav class='crosslinks-top'> [<a href='Picturemaps.html'>prev</a>] [<a href='CreatingaNewBoard.html#Boardcode.html'>up</a>] [<a href='IntegrationwithPICsimLab.html'>next</a>] </nav> 
<h4 class='subsectionHead'><span class='titlemark'>13.2.4    </span> <a id='x129-13600013.2.4'></a>Board code</h4>
<!-- l. 258 --><p class='noindent'>The header file and c++ code file with comments are listed in the next two subsections. This
files control the behavior of board in simulator.
</p><!-- l. 260 --><p class='noindent'>
</p>
   <h5 class='subsubsectionHead'><a id='x129-13700013.2.4'></a>board_x.h</h5>
<!-- l. 262 --><p class='noindent'><a target='_blank' href='https://github.com/lcgamboa/picsimlab/blob/master/src/boards/board_x.h'> board_x.h online file</a>.
</p><!-- l. 264 --><p class='indent'>   <a target='_blank' href='https://lcgamboa.github.io/picsimlab/devel/html/index.html##binc'> board_x.h online doxygen version</a>.
</p><!-- l. 1 --><p class='indent'>
</p>
   <pre id='fancyvrb15' class='fancyvrb'><a id='x129-137002r1'></a><span class='ptmr8t-x-x-50'>1</span><span class='textcolor-3f7f7f'><span class='textit'>/* ########################################################################</span></span> 
<a id='x129-137004r2'></a><span class='ptmr8t-x-x-50'>2</span> 
<a id='x129-137006r3'></a><span class='ptmr8t-x-x-50'>3</span><span class='textcolor-3f7f7f'><span class='textit'>   PICsimLab - PIC laboratory simulator</span></span> 
<a id='x129-137008r4'></a><span class='ptmr8t-x-x-50'>4</span> 
<a id='x129-137010r5'></a><span class='ptmr8t-x-x-50'>5</span><span class='textcolor-3f7f7f'><span class='textit'>   ########################################################################</span></span> 
<a id='x129-137012r6'></a><span class='ptmr8t-x-x-50'>6</span> 
<a id='x129-137014r7'></a><span class='ptmr8t-x-x-50'>7</span><span class='textcolor-3f7f7f'><span class='textit'>   Copyright (c) : 2015-2020  Luis Claudio Gambôa Lopes</span></span> 
<a id='x129-137016r8'></a><span class='ptmr8t-x-x-50'>8</span> 
<a id='x129-137018r9'></a><span class='ptmr8t-x-x-50'>9</span><span class='textcolor-3f7f7f'><span class='textit'>   This program is free software; you can redistribute it and/or modify</span></span> 
<a id='x129-137020r10'></a><span class='ptmr8t-x-x-50'>10</span><span class='textcolor-3f7f7f'><span class='textit'>   it under the terms of the GNU General Public License as published by</span></span> 
<a id='x129-137022r11'></a><span class='ptmr8t-x-x-50'>11</span><span class='textcolor-3f7f7f'><span class='textit'>   the Free Software Foundation; either version 2, or (at your option)</span></span> 
<a id='x129-137024r12'></a><span class='ptmr8t-x-x-50'>12</span><span class='textcolor-3f7f7f'><span class='textit'>   any later version.</span></span> 
<a id='x129-137026r13'></a><span class='ptmr8t-x-x-50'>13</span> 
<a id='x129-137028r14'></a><span class='ptmr8t-x-x-50'>14</span><span class='textcolor-3f7f7f'><span class='textit'>   This program is distributed in the hope that it will be useful,</span></span> 
<a id='x129-137030r15'></a><span class='ptmr8t-x-x-50'>15</span><span class='textcolor-3f7f7f'><span class='textit'>   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span> 
<a id='x129-137032r16'></a><span class='ptmr8t-x-x-50'>16</span><span class='textcolor-3f7f7f'><span class='textit'>   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span> 
<a id='x129-137034r17'></a><span class='ptmr8t-x-x-50'>17</span><span class='textcolor-3f7f7f'><span class='textit'>   GNU General Public License for more details.</span></span> 
<a id='x129-137036r18'></a><span class='ptmr8t-x-x-50'>18</span> 
<a id='x129-137038r19'></a><span class='ptmr8t-x-x-50'>19</span><span class='textcolor-3f7f7f'><span class='textit'>   You should have received a copy of the GNU General Public License</span></span> 
<a id='x129-137040r20'></a><span class='ptmr8t-x-x-50'>20</span><span class='textcolor-3f7f7f'><span class='textit'>   along with this program; if not, write to the Free Software</span></span> 
<a id='x129-137042r21'></a><span class='ptmr8t-x-x-50'>21</span><span class='textcolor-3f7f7f'><span class='textit'>   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></span> 
<a id='x129-137044r22'></a><span class='ptmr8t-x-x-50'>22</span> 
<a id='x129-137046r23'></a><span class='ptmr8t-x-x-50'>23</span><span class='textcolor-3f7f7f'><span class='textit'>   For e-mail suggestions :  lcgamboa@yahoo.com</span></span> 
<a id='x129-137048r24'></a><span class='ptmr8t-x-x-50'>24</span><span class='textcolor-3f7f7f'><span class='textit'>   ######################################################################## */</span></span> 
<a id='x129-137050r25'></a><span class='ptmr8t-x-x-50'>25</span> 
<a id='x129-137052r26'></a><span class='ptmr8t-x-x-50'>26</span><span class='textcolor-bc7a00'><span class='textit'>#ifndef BOARD_x_H</span></span> 
<a id='x129-137054r27'></a><span class='ptmr8t-x-x-50'>27</span><span class='textcolor-bc7a00'><span class='textit'>#define        BOARD_x_H</span></span> 
<a id='x129-137056r28'></a><span class='ptmr8t-x-x-50'>28</span> 
<a id='x129-137058r29'></a><span class='ptmr8t-x-x-50'>29</span><span class='textcolor-bc7a00'><span class='textit'>#include</span></span><span class='textcolor-3f7f7f'><span class='textit'>&lt;lxrad.h&gt;</span></span> 
<a id='x129-137060r30'></a><span class='ptmr8t-x-x-50'>30</span> 
<a id='x129-137062r31'></a><span class='ptmr8t-x-x-50'>31</span><span class='textcolor-bc7a00'><span class='textit'>#include</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>"board_picsim.h"</span></span> 
<a id='x129-137064r32'></a><span class='ptmr8t-x-x-50'>32</span> 
<a id='x129-137066r33'></a><span class='ptmr8t-x-x-50'>33</span><span class='textcolor-3f7f7f'><span class='textit'>//new board class must be derived from board class defined in board.h</span></span> 
<a id='x129-137068r34'></a><span class='ptmr8t-x-x-50'>34</span><span class='textcolor-007f00'><span class='textbf'>class</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='textbf'>cboard_x</span></span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>:</span></span><span class='textcolor-007f00'><span class='textbf'>public</span></span><span class='pcrr8t-x-x-80'> board_picsim</span> 
<a id='x129-137070r35'></a><span class='ptmr8t-x-x-50'>35</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-137072r36'></a><span class='ptmr8t-x-x-50'>36</span><span class='pcrr8t-x-x-80'>  </span><span class='textcolor-007f00'><span class='textbf'>private</span></span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>:</span></span> 
<a id='x129-137074r37'></a><span class='ptmr8t-x-x-50'>37</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> p_BT1;           </span><span class='textcolor-3f7f7f'><span class='textit'>//first board switch in RD0</span></span> 
<a id='x129-137076r38'></a><span class='ptmr8t-x-x-50'>38</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> p_BT2;           </span><span class='textcolor-3f7f7f'><span class='textit'>//second board switch in RD1  </span></span> 
<a id='x129-137078r39'></a><span class='ptmr8t-x-x-50'>39</span> 
<a id='x129-137080r40'></a><span class='ptmr8t-x-x-50'>40</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-3f7f7f'><span class='textit'>//controls to be added in simulator window</span></span> 
<a id='x129-137082r41'></a><span class='ptmr8t-x-x-50'>41</span><span class='pcrr8t-x-x-80'>     CScroll </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>scroll1; </span><span class='textcolor-3f7f7f'><span class='textit'>//scroll for analog input AN0    </span></span> 
<a id='x129-137084r42'></a><span class='ptmr8t-x-x-50'>42</span><span class='pcrr8t-x-x-80'>     CGauge </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>gauge1;   </span><span class='textcolor-3f7f7f'><span class='textit'>//gauge to show mean value of RB0</span></span> 
<a id='x129-137086r43'></a><span class='ptmr8t-x-x-50'>43</span><span class='pcrr8t-x-x-80'>     CGauge </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>gauge2;   </span><span class='textcolor-3f7f7f'><span class='textit'>//gauge to show mean value of RB1</span></span> 
<a id='x129-137088r44'></a><span class='ptmr8t-x-x-50'>44</span><span class='pcrr8t-x-x-80'>     CLabel </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>label1;   </span><span class='textcolor-3f7f7f'><span class='textit'>//label of scroll AN0</span></span> 
<a id='x129-137090r45'></a><span class='ptmr8t-x-x-50'>45</span><span class='pcrr8t-x-x-80'>     CLabel </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>label2;   </span><span class='textcolor-3f7f7f'><span class='textit'>//label of gauge RB0</span></span> 
<a id='x129-137092r46'></a><span class='ptmr8t-x-x-50'>46</span><span class='pcrr8t-x-x-80'>     CLabel </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>label3;   </span><span class='textcolor-3f7f7f'><span class='textit'>//label of gauge RB1</span></span> 
<a id='x129-137094r47'></a><span class='ptmr8t-x-x-50'>47</span> 
<a id='x129-137096r48'></a><span class='ptmr8t-x-x-50'>48</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>public</span></span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>:</span></span> 
<a id='x129-137098r49'></a><span class='ptmr8t-x-x-50'>49</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Constructor called once on board creation </span></span> 
<a id='x129-137100r50'></a><span class='ptmr8t-x-x-50'>50</span><span class='pcrr8t-x-x-80'>      cboard_x(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-137102r51'></a><span class='ptmr8t-x-x-50'>51</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Destructor called once on board destruction </span></span> 
<a id='x129-137104r52'></a><span class='ptmr8t-x-x-50'>52</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>~</span></span><span class='pcrr8t-x-x-80'>cboard_x(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-137106r53'></a><span class='ptmr8t-x-x-50'>53</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Return the about info of board</span></span> 
<a id='x129-137108r54'></a><span class='ptmr8t-x-x-50'>54</span><span class='pcrr8t-x-x-80'>      String </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>GetAboutInfo</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>){</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> lxT(</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"L.C. Gamboa </span></span><span class='textcolor-ba6521'><span class='textbf'>' n</span></span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'> &lt;lcgamboa@yahoo.com&gt;"</span></span><span class='pcrr8t-x-x-80'>);};</span> 
<a id='x129-137110r55'></a><span class='ptmr8t-x-x-50'>55</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Called ever 100ms to draw board</span></span> 
<a id='x129-137112r56'></a><span class='ptmr8t-x-x-50'>56</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>Draw</span></span><span class='pcrr8t-x-x-80'>(CDraw </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>draw,</span><span class='textcolor-af003f'><span class='textbf'>double</span></span><span class='pcrr8t-x-x-80'> scale);</span> 
<a id='x129-137114r57'></a><span class='ptmr8t-x-x-50'>57</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>Run_CPU</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-137116r58'></a><span class='ptmr8t-x-x-50'>58</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Return a list of board supported microcontrollers</span></span> 
<a id='x129-137118r59'></a><span class='ptmr8t-x-x-50'>59</span><span class='pcrr8t-x-x-80'>      String </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>GetSupportedDevices</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>){</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> lxT(</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"PIC18F4550,PIC16F877A,"</span></span><span class='pcrr8t-x-x-80'>);};</span> 
<a id='x129-137120r60'></a><span class='ptmr8t-x-x-50'>60</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Return the filename of board picture </span></span> 
<a id='x129-137122r61'></a><span class='ptmr8t-x-x-50'>61</span><span class='pcrr8t-x-x-80'>      String </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>GetPictureFileName</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>){</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> lxT(</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"x/board.png"</span></span><span class='pcrr8t-x-x-80'>);};</span> 
<a id='x129-137124r62'></a><span class='ptmr8t-x-x-50'>62</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Return the filename of board picture input map </span></span> 
<a id='x129-137126r63'></a><span class='ptmr8t-x-x-50'>63</span><span class='pcrr8t-x-x-80'>      String </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>GetInputMapFile</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>){</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> lxT(</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"x/input.map"</span></span><span class='pcrr8t-x-x-80'>);};</span> 
<a id='x129-137128r64'></a><span class='ptmr8t-x-x-50'>64</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Return the filename of board picture output map </span></span> 
<a id='x129-137130r65'></a><span class='ptmr8t-x-x-50'>65</span><span class='pcrr8t-x-x-80'>      String </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>GetOutputMapFile</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>){</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> lxT(</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"x/output.map"</span></span><span class='pcrr8t-x-x-80'>);};</span> 
<a id='x129-137132r66'></a><span class='ptmr8t-x-x-50'>66</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Reset board status</span></span> 
<a id='x129-137134r67'></a><span class='ptmr8t-x-x-50'>67</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>Reset</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-137136r68'></a><span class='ptmr8t-x-x-50'>68</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-137138r69'></a><span class='ptmr8t-x-x-50'>69</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>EvMouseButtonPress</span></span><span class='pcrr8t-x-x-80'>(uint button, uint x, uint y,uint state);</span> 
<a id='x129-137140r70'></a><span class='ptmr8t-x-x-50'>70</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-137142r71'></a><span class='ptmr8t-x-x-50'>71</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>EvMouseButtonRelease</span></span><span class='pcrr8t-x-x-80'>(uint button, uint x, uint y,uint state);</span> 
<a id='x129-137144r72'></a><span class='ptmr8t-x-x-50'>72</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-137146r73'></a><span class='ptmr8t-x-x-50'>73</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>EvKeyPress</span></span><span class='pcrr8t-x-x-80'>(uint key,uint mask);</span> 
<a id='x129-137148r74'></a><span class='ptmr8t-x-x-50'>74</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-137150r75'></a><span class='ptmr8t-x-x-50'>75</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>EvKeyRelease</span></span><span class='pcrr8t-x-x-80'>(uint key,uint mask);</span> 
<a id='x129-137152r76'></a><span class='ptmr8t-x-x-50'>76</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>EvOnShow</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>){};</span> 
<a id='x129-137154r77'></a><span class='ptmr8t-x-x-50'>77</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Called ever 1s to refresh status</span></span> 
<a id='x129-137156r78'></a><span class='ptmr8t-x-x-50'>78</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>RefreshStatus</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-137158r79'></a><span class='ptmr8t-x-x-50'>79</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Called to save board preferences in configuration file</span></span> 
<a id='x129-137160r80'></a><span class='ptmr8t-x-x-50'>80</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>WritePreferences</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-137162r81'></a><span class='ptmr8t-x-x-50'>81</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//Called whe configuration file load  preferences </span></span> 
<a id='x129-137164r82'></a><span class='ptmr8t-x-x-50'>82</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-0000ff'><span class='pcrr8t-x-x-80'>ReadPreferences</span></span><span class='pcrr8t-x-x-80'>(</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>name,</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>value);</span> 
<a id='x129-137166r83'></a><span class='ptmr8t-x-x-50'>83</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//return the input ids numbers of names used in input map</span></span> 
<a id='x129-137168r84'></a><span class='ptmr8t-x-x-50'>84</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>short</span></span><span class='pcrr8t-x-x-80'> get_in_id(</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> name);</span> 
<a id='x129-137170r85'></a><span class='ptmr8t-x-x-50'>85</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//return the output ids numbers of names used in output map</span></span> 
<a id='x129-137172r86'></a><span class='ptmr8t-x-x-50'>86</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>short</span></span><span class='pcrr8t-x-x-80'> get_out_id(</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> name);</span> 
<a id='x129-137174r87'></a><span class='ptmr8t-x-x-50'>87</span><span class='pcrr8t-x-x-80'>};</span> 
<a id='x129-137176r88'></a><span class='ptmr8t-x-x-50'>88</span> 
<a id='x129-137178r89'></a><span class='ptmr8t-x-x-50'>89</span><span class='textcolor-bc7a00'><span class='textit'>#endif        </span></span><span class='textcolor-3f7f7f'><span class='textit'>/* BOARD_x_H */</span></span></pre>
                                                                  

                                                                  
<!-- l. 270 --><p class='noindent'>
</p>
   <h5 class='subsubsectionHead'><a id='x129-13800013.2.4'></a>board_x.cc</h5>
<!-- l. 272 --><p class='noindent'><a target='_blank' href='https://github.com/lcgamboa/picsimlab/blob/master/src/boards/board_x.cc'> board_x.cc online file</a>.
</p><!-- l. 274 --><p class='indent'>   <a target='_blank' href='https://lcgamboa.github.io/picsimlab/devel/html/index.html##bcode'> board_x.cc online doxygen version</a>.
</p><!-- l. 1 --><p class='indent'>
</p>
   <pre id='fancyvrb16' class='fancyvrb'><a id='x129-138002r1'></a><span class='ptmr8t-x-x-50'>1</span><span class='textcolor-3f7f7f'><span class='textit'>/* ########################################################################</span></span> 
<a id='x129-138004r2'></a><span class='ptmr8t-x-x-50'>2</span> 
<a id='x129-138006r3'></a><span class='ptmr8t-x-x-50'>3</span><span class='textcolor-3f7f7f'><span class='textit'>   PICsimLab - PIC laboratory simulator</span></span> 
<a id='x129-138008r4'></a><span class='ptmr8t-x-x-50'>4</span> 
<a id='x129-138010r5'></a><span class='ptmr8t-x-x-50'>5</span><span class='textcolor-3f7f7f'><span class='textit'>   ########################################################################</span></span> 
<a id='x129-138012r6'></a><span class='ptmr8t-x-x-50'>6</span> 
<a id='x129-138014r7'></a><span class='ptmr8t-x-x-50'>7</span><span class='textcolor-3f7f7f'><span class='textit'>   Copyright (c) : 2015-2020  Luis Claudio Gambôa Lopes</span></span> 
<a id='x129-138016r8'></a><span class='ptmr8t-x-x-50'>8</span> 
<a id='x129-138018r9'></a><span class='ptmr8t-x-x-50'>9</span><span class='textcolor-3f7f7f'><span class='textit'>   This program is free software; you can redistribute it and/or modify</span></span> 
<a id='x129-138020r10'></a><span class='ptmr8t-x-x-50'>10</span><span class='textcolor-3f7f7f'><span class='textit'>   it under the terms of the GNU General Public License as published by</span></span> 
<a id='x129-138022r11'></a><span class='ptmr8t-x-x-50'>11</span><span class='textcolor-3f7f7f'><span class='textit'>   the Free Software Foundation; either version 2, or (at your option)</span></span> 
<a id='x129-138024r12'></a><span class='ptmr8t-x-x-50'>12</span><span class='textcolor-3f7f7f'><span class='textit'>   any later version.</span></span> 
<a id='x129-138026r13'></a><span class='ptmr8t-x-x-50'>13</span> 
<a id='x129-138028r14'></a><span class='ptmr8t-x-x-50'>14</span><span class='textcolor-3f7f7f'><span class='textit'>   This program is distributed in the hope that it will be useful,</span></span> 
<a id='x129-138030r15'></a><span class='ptmr8t-x-x-50'>15</span><span class='textcolor-3f7f7f'><span class='textit'>   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span> 
<a id='x129-138032r16'></a><span class='ptmr8t-x-x-50'>16</span><span class='textcolor-3f7f7f'><span class='textit'>   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span> 
<a id='x129-138034r17'></a><span class='ptmr8t-x-x-50'>17</span><span class='textcolor-3f7f7f'><span class='textit'>   GNU General Public License for more details.</span></span> 
<a id='x129-138036r18'></a><span class='ptmr8t-x-x-50'>18</span> 
<a id='x129-138038r19'></a><span class='ptmr8t-x-x-50'>19</span><span class='textcolor-3f7f7f'><span class='textit'>   You should have received a copy of the GNU General Public License</span></span> 
<a id='x129-138040r20'></a><span class='ptmr8t-x-x-50'>20</span><span class='textcolor-3f7f7f'><span class='textit'>   along with this program; if not, write to the Free Software</span></span> 
<a id='x129-138042r21'></a><span class='ptmr8t-x-x-50'>21</span><span class='textcolor-3f7f7f'><span class='textit'>   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></span> 
<a id='x129-138044r22'></a><span class='ptmr8t-x-x-50'>22</span> 
<a id='x129-138046r23'></a><span class='ptmr8t-x-x-50'>23</span><span class='textcolor-3f7f7f'><span class='textit'>   For e-mail suggestions :  lcgamboa@yahoo.com</span></span> 
<a id='x129-138048r24'></a><span class='ptmr8t-x-x-50'>24</span><span class='textcolor-3f7f7f'><span class='textit'>   ######################################################################## */</span></span> 
<a id='x129-138050r25'></a><span class='ptmr8t-x-x-50'>25</span> 
<a id='x129-138052r26'></a><span class='ptmr8t-x-x-50'>26</span><span class='textcolor-3f7f7f'><span class='textit'>//include files</span></span> 
<a id='x129-138054r27'></a><span class='ptmr8t-x-x-50'>27</span><span class='textcolor-bc7a00'><span class='textit'>#include</span></span><span class='textcolor-3f7f7f'><span class='textit'>"../picsimlab1.h"</span></span> 
<a id='x129-138056r28'></a><span class='ptmr8t-x-x-50'>28</span><span class='textcolor-bc7a00'><span class='textit'>#include</span></span><span class='textcolor-3f7f7f'><span class='textit'>"../picsimlab4.h" //Oscilloscope</span></span> 
<a id='x129-138058r29'></a><span class='ptmr8t-x-x-50'>29</span><span class='textcolor-bc7a00'><span class='textit'>#include</span></span><span class='textcolor-3f7f7f'><span class='textit'>"../picsimlab5.h" //Spare Parts</span></span> 
<a id='x129-138060r30'></a><span class='ptmr8t-x-x-50'>30</span><span class='textcolor-bc7a00'><span class='textit'>#include</span></span><span class='textcolor-3f7f7f'><span class='textit'>"board_x.h"</span></span> 
<a id='x129-138062r31'></a><span class='ptmr8t-x-x-50'>31</span> 
<a id='x129-138064r32'></a><span class='ptmr8t-x-x-50'>32</span><span class='textcolor-3f7f7f'><span class='textit'>/* ids of inputs of input map*/</span></span> 
<a id='x129-138066r33'></a><span class='ptmr8t-x-x-50'>33</span><span class='textcolor-007f00'><span class='textbf'>enum</span></span> 
<a id='x129-138068r34'></a><span class='ptmr8t-x-x-50'>34</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138070r35'></a><span class='ptmr8t-x-x-50'>35</span><span class='pcrr8t-x-x-80'> I_ICSP, </span><span class='textcolor-3f7f7f'><span class='textit'>//ICSP connector</span></span> 
<a id='x129-138072r36'></a><span class='ptmr8t-x-x-50'>36</span><span class='pcrr8t-x-x-80'> I_PWR, </span><span class='textcolor-3f7f7f'><span class='textit'>//Power button</span></span> 
<a id='x129-138074r37'></a><span class='ptmr8t-x-x-50'>37</span><span class='pcrr8t-x-x-80'> I_RST, </span><span class='textcolor-3f7f7f'><span class='textit'>//Reset button</span></span> 
<a id='x129-138076r38'></a><span class='ptmr8t-x-x-50'>38</span><span class='pcrr8t-x-x-80'> I_D0, </span><span class='textcolor-3f7f7f'><span class='textit'>//RD0 push button</span></span> 
<a id='x129-138078r39'></a><span class='ptmr8t-x-x-50'>39</span><span class='pcrr8t-x-x-80'> I_D1 </span><span class='textcolor-3f7f7f'><span class='textit'>//RD1 switch</span></span> 
<a id='x129-138080r40'></a><span class='ptmr8t-x-x-50'>40</span><span class='pcrr8t-x-x-80'>};</span> 
<a id='x129-138082r41'></a><span class='ptmr8t-x-x-50'>41</span> 
<a id='x129-138084r42'></a><span class='ptmr8t-x-x-50'>42</span><span class='textcolor-3f7f7f'><span class='textit'>/* ids of outputs of output map*/</span></span> 
<a id='x129-138086r43'></a><span class='ptmr8t-x-x-50'>43</span><span class='textcolor-007f00'><span class='textbf'>enum</span></span> 
<a id='x129-138088r44'></a><span class='ptmr8t-x-x-50'>44</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138090r45'></a><span class='ptmr8t-x-x-50'>45</span><span class='pcrr8t-x-x-80'> O_SD1, </span><span class='textcolor-3f7f7f'><span class='textit'>//switch position (On/Off)</span></span> 
<a id='x129-138092r46'></a><span class='ptmr8t-x-x-50'>46</span><span class='pcrr8t-x-x-80'> O_LD0, </span><span class='textcolor-3f7f7f'><span class='textit'>//LED on RD0 push button</span></span> 
<a id='x129-138094r47'></a><span class='ptmr8t-x-x-50'>47</span><span class='pcrr8t-x-x-80'> O_LD1, </span><span class='textcolor-3f7f7f'><span class='textit'>//LED on RD1 switch</span></span> 
<a id='x129-138096r48'></a><span class='ptmr8t-x-x-50'>48</span><span class='pcrr8t-x-x-80'> O_LPWR, </span><span class='textcolor-3f7f7f'><span class='textit'>//Power LED</span></span> 
<a id='x129-138098r49'></a><span class='ptmr8t-x-x-50'>49</span><span class='pcrr8t-x-x-80'> O_RB0, </span><span class='textcolor-3f7f7f'><span class='textit'>//LED on RB0 output</span></span> 
<a id='x129-138100r50'></a><span class='ptmr8t-x-x-50'>50</span><span class='pcrr8t-x-x-80'> O_RB1 </span><span class='textcolor-3f7f7f'><span class='textit'>//LED on RB1 output</span></span> 
<a id='x129-138102r51'></a><span class='ptmr8t-x-x-50'>51</span><span class='pcrr8t-x-x-80'>};</span> 
<a id='x129-138104r52'></a><span class='ptmr8t-x-x-50'>52</span><span class='textcolor-3f7f7f'><span class='textit'>//return the input ids numbers of names used in input map</span></span> 
<a id='x129-138106r53'></a><span class='ptmr8t-x-x-50'>53</span> 
<a id='x129-138108r54'></a><span class='ptmr8t-x-x-50'>54</span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>short</span></span> 
<a id='x129-138110r55'></a><span class='ptmr8t-x-x-50'>55</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>get_in_id(</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> name)</span> 
<a id='x129-138112r56'></a><span class='ptmr8t-x-x-50'>56</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138114r57'></a><span class='ptmr8t-x-x-50'>57</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"I_ICSP"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> I_ICSP;</span> 
<a id='x129-138116r58'></a><span class='ptmr8t-x-x-50'>58</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"I_PWR"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> I_PWR;</span> 
<a id='x129-138118r59'></a><span class='ptmr8t-x-x-50'>59</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"I_RST"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> I_RST;</span> 
<a id='x129-138120r60'></a><span class='ptmr8t-x-x-50'>60</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"I_D0"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> I_D0;</span> 
<a id='x129-138122r61'></a><span class='ptmr8t-x-x-50'>61</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"I_D1"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> I_D1;</span> 
<a id='x129-138124r62'></a><span class='ptmr8t-x-x-50'>62</span> 
<a id='x129-138126r63'></a><span class='ptmr8t-x-x-50'>63</span><span class='pcrr8t-x-x-80'> printf (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Error input </span><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>%s</span><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'> don</span><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>t have a valid id! </span></span><span class='textcolor-ba6521'><span class='textbf'>' n</span></span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"</span></span><span class='pcrr8t-x-x-80'>, name);</span> 
<a id='x129-138128r64'></a><span class='ptmr8t-x-x-50'>64</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138130r65'></a><span class='ptmr8t-x-x-50'>65</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138132r66'></a><span class='ptmr8t-x-x-50'>66</span> 
<a id='x129-138134r67'></a><span class='ptmr8t-x-x-50'>67</span><span class='textcolor-3f7f7f'><span class='textit'>//return the output ids numbers of names used in output map</span></span> 
<a id='x129-138136r68'></a><span class='ptmr8t-x-x-50'>68</span> 
<a id='x129-138138r69'></a><span class='ptmr8t-x-x-50'>69</span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>short</span></span> 
<a id='x129-138140r70'></a><span class='ptmr8t-x-x-50'>70</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>get_out_id(</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> name)</span> 
<a id='x129-138142r71'></a><span class='ptmr8t-x-x-50'>71</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138144r72'></a><span class='ptmr8t-x-x-50'>72</span> 
<a id='x129-138146r73'></a><span class='ptmr8t-x-x-50'>73</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"O_SD1"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> O_SD1;</span> 
<a id='x129-138148r74'></a><span class='ptmr8t-x-x-50'>74</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"O_LD0"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> O_LD0;</span> 
<a id='x129-138150r75'></a><span class='ptmr8t-x-x-50'>75</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"O_LD1"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> O_LD1;</span> 
<a id='x129-138152r76'></a><span class='ptmr8t-x-x-50'>76</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"O_LPWR"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> O_LPWR;</span> 
<a id='x129-138154r77'></a><span class='ptmr8t-x-x-50'>77</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"O_RB1"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> O_RB1;</span> 
<a id='x129-138156r78'></a><span class='ptmr8t-x-x-50'>78</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"O_RB0"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> O_RB0;</span> 
<a id='x129-138158r79'></a><span class='ptmr8t-x-x-50'>79</span> 
<a id='x129-138160r80'></a><span class='ptmr8t-x-x-50'>80</span><span class='pcrr8t-x-x-80'> printf (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Error output </span><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>%s</span><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'> don</span><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>t have a valid id! </span></span><span class='textcolor-ba6521'><span class='textbf'>' n</span></span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"</span></span><span class='pcrr8t-x-x-80'>, name);</span> 
<a id='x129-138162r81'></a><span class='ptmr8t-x-x-50'>81</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>return</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138164r82'></a><span class='ptmr8t-x-x-50'>82</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138166r83'></a><span class='ptmr8t-x-x-50'>83</span> 
<a id='x129-138168r84'></a><span class='ptmr8t-x-x-50'>84</span><span class='textcolor-3f7f7f'><span class='textit'>//Constructor called once on board creation </span></span> 
<a id='x129-138170r85'></a><span class='ptmr8t-x-x-50'>85</span> 
<a id='x129-138172r86'></a><span class='ptmr8t-x-x-50'>86</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>cboard_x(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138174r87'></a><span class='ptmr8t-x-x-50'>87</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138176r88'></a><span class='ptmr8t-x-x-50'>88</span><span class='pcrr8t-x-x-80'> Proc </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"PIC18F4550"</span></span><span class='pcrr8t-x-x-80'>; </span><span class='textcolor-3f7f7f'><span class='textit'>//default microcontroller if none defined in preferences</span></span> 
<a id='x129-138178r89'></a><span class='ptmr8t-x-x-50'>89</span><span class='pcrr8t-x-x-80'> ReadMaps (); </span><span class='textcolor-3f7f7f'><span class='textit'>//Read input and output board maps</span></span> 
<a id='x129-138180r90'></a><span class='ptmr8t-x-x-50'>90</span> 
<a id='x129-138182r91'></a><span class='ptmr8t-x-x-50'>91</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//controls properties and creation</span></span> 
<a id='x129-138184r92'></a><span class='ptmr8t-x-x-50'>92</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//scroll1</span></span> 
<a id='x129-138186r93'></a><span class='ptmr8t-x-x-50'>93</span><span class='pcrr8t-x-x-80'> scroll1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>new</span></span><span class='pcrr8t-x-x-80'> CScroll ();</span> 
<a id='x129-138188r94'></a><span class='ptmr8t-x-x-50'>94</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetFOwner (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;</span></span><span class='pcrr8t-x-x-80'>Window1);</span> 
<a id='x129-138190r95'></a><span class='ptmr8t-x-x-50'>95</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetName (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"scroll1_px"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138192r96'></a><span class='ptmr8t-x-x-50'>96</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetX (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>12</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138194r97'></a><span class='ptmr8t-x-x-50'>97</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetY (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>273</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>160</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138196r98'></a><span class='ptmr8t-x-x-50'>98</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetWidth (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>140</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138198r99'></a><span class='ptmr8t-x-x-50'>99</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetHeight (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>22</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138200r100'></a><span class='ptmr8t-x-x-50'>100</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetEnable (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138202r101'></a><span class='ptmr8t-x-x-50'>101</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetVisible (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138204r102'></a><span class='ptmr8t-x-x-50'>102</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetRange (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138206r103'></a><span class='ptmr8t-x-x-50'>103</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetPosition (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>50</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138208r104'></a><span class='ptmr8t-x-x-50'>104</span><span class='pcrr8t-x-x-80'> scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetType (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>4</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138210r105'></a><span class='ptmr8t-x-x-50'>105</span><span class='pcrr8t-x-x-80'> Window1.CreateChild (scroll1);</span> 
<a id='x129-138212r106'></a><span class='ptmr8t-x-x-50'>106</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//gauge1</span></span> 
<a id='x129-138214r107'></a><span class='ptmr8t-x-x-50'>107</span><span class='pcrr8t-x-x-80'> gauge1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>new</span></span><span class='pcrr8t-x-x-80'> CGauge ();</span> 
<a id='x129-138216r108'></a><span class='ptmr8t-x-x-50'>108</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetFOwner (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;</span></span><span class='pcrr8t-x-x-80'>Window1);</span> 
<a id='x129-138218r109'></a><span class='ptmr8t-x-x-50'>109</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetName (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"gauge1_px"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138220r110'></a><span class='ptmr8t-x-x-50'>110</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetX (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>13</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138222r111'></a><span class='ptmr8t-x-x-50'>111</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetY (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>382</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>160</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138224r112'></a><span class='ptmr8t-x-x-50'>112</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetWidth (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>140</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138226r113'></a><span class='ptmr8t-x-x-50'>113</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetHeight (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138228r114'></a><span class='ptmr8t-x-x-50'>114</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetEnable (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138230r115'></a><span class='ptmr8t-x-x-50'>115</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetVisible (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138232r116'></a><span class='ptmr8t-x-x-50'>116</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetRange (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138234r117'></a><span class='ptmr8t-x-x-50'>117</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetValue (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138236r118'></a><span class='ptmr8t-x-x-50'>118</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetType (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>4</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138238r119'></a><span class='ptmr8t-x-x-50'>119</span><span class='pcrr8t-x-x-80'> Window1.CreateChild (gauge1);</span> 
<a id='x129-138240r120'></a><span class='ptmr8t-x-x-50'>120</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//gauge2</span></span> 
<a id='x129-138242r121'></a><span class='ptmr8t-x-x-50'>121</span><span class='pcrr8t-x-x-80'> gauge2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>new</span></span><span class='pcrr8t-x-x-80'> CGauge ();</span> 
<a id='x129-138244r122'></a><span class='ptmr8t-x-x-50'>122</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetFOwner (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;</span></span><span class='pcrr8t-x-x-80'>Window1);</span> 
<a id='x129-138246r123'></a><span class='ptmr8t-x-x-50'>123</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetName (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"gauge2_px"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138248r124'></a><span class='ptmr8t-x-x-50'>124</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetX (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>12</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138250r125'></a><span class='ptmr8t-x-x-50'>125</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetY (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>330</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>160</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138252r126'></a><span class='ptmr8t-x-x-50'>126</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetWidth (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>140</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138254r127'></a><span class='ptmr8t-x-x-50'>127</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetHeight (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138256r128'></a><span class='ptmr8t-x-x-50'>128</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetEnable (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138258r129'></a><span class='ptmr8t-x-x-50'>129</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetVisible (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138260r130'></a><span class='ptmr8t-x-x-50'>130</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetRange (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138262r131'></a><span class='ptmr8t-x-x-50'>131</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetValue (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138264r132'></a><span class='ptmr8t-x-x-50'>132</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetType (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>4</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138266r133'></a><span class='ptmr8t-x-x-50'>133</span><span class='pcrr8t-x-x-80'> Window1.CreateChild (gauge2);</span> 
<a id='x129-138268r134'></a><span class='ptmr8t-x-x-50'>134</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//label1</span></span> 
<a id='x129-138270r135'></a><span class='ptmr8t-x-x-50'>135</span><span class='pcrr8t-x-x-80'> label1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>new</span></span><span class='pcrr8t-x-x-80'> CLabel ();</span> 
<a id='x129-138272r136'></a><span class='ptmr8t-x-x-50'>136</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetFOwner (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;</span></span><span class='pcrr8t-x-x-80'>Window1);</span> 
<a id='x129-138274r137'></a><span class='ptmr8t-x-x-50'>137</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetName (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"label1_px"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138276r138'></a><span class='ptmr8t-x-x-50'>138</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetX (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>12</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138278r139'></a><span class='ptmr8t-x-x-50'>139</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetY (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>249</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>160</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138280r140'></a><span class='ptmr8t-x-x-50'>140</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetWidth (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>60</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138282r141'></a><span class='ptmr8t-x-x-50'>141</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetHeight (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138284r142'></a><span class='ptmr8t-x-x-50'>142</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetEnable (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138286r143'></a><span class='ptmr8t-x-x-50'>143</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetVisible (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138288r144'></a><span class='ptmr8t-x-x-50'>144</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetText (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"AN0"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138290r145'></a><span class='ptmr8t-x-x-50'>145</span><span class='pcrr8t-x-x-80'> label1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetAlign (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138292r146'></a><span class='ptmr8t-x-x-50'>146</span><span class='pcrr8t-x-x-80'> Window1.CreateChild (label1);</span> 
<a id='x129-138294r147'></a><span class='ptmr8t-x-x-50'>147</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//label2</span></span> 
<a id='x129-138296r148'></a><span class='ptmr8t-x-x-50'>148</span><span class='pcrr8t-x-x-80'> label2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>new</span></span><span class='pcrr8t-x-x-80'> CLabel ();</span> 
<a id='x129-138298r149'></a><span class='ptmr8t-x-x-50'>149</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetFOwner (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;</span></span><span class='pcrr8t-x-x-80'>Window1);</span> 
<a id='x129-138300r150'></a><span class='ptmr8t-x-x-50'>150</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetName (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"label2_px"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138302r151'></a><span class='ptmr8t-x-x-50'>151</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetX (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>12</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138304r152'></a><span class='ptmr8t-x-x-50'>152</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetY (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>306</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>160</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138306r153'></a><span class='ptmr8t-x-x-50'>153</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetWidth (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>60</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138308r154'></a><span class='ptmr8t-x-x-50'>154</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetHeight (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138310r155'></a><span class='ptmr8t-x-x-50'>155</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetEnable (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138312r156'></a><span class='ptmr8t-x-x-50'>156</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetVisible (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138314r157'></a><span class='ptmr8t-x-x-50'>157</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetText (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"RB0"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138316r158'></a><span class='ptmr8t-x-x-50'>158</span><span class='pcrr8t-x-x-80'> label2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetAlign (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138318r159'></a><span class='ptmr8t-x-x-50'>159</span><span class='pcrr8t-x-x-80'> Window1.CreateChild (label2);</span> 
<a id='x129-138320r160'></a><span class='ptmr8t-x-x-50'>160</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//label3</span></span> 
<a id='x129-138322r161'></a><span class='ptmr8t-x-x-50'>161</span><span class='pcrr8t-x-x-80'> label3 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>new</span></span><span class='pcrr8t-x-x-80'> CLabel ();</span> 
<a id='x129-138324r162'></a><span class='ptmr8t-x-x-50'>162</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetFOwner (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;</span></span><span class='pcrr8t-x-x-80'>Window1);</span> 
<a id='x129-138326r163'></a><span class='ptmr8t-x-x-50'>163</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetName (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"label3_px"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138328r164'></a><span class='ptmr8t-x-x-50'>164</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetX (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>13</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138330r165'></a><span class='ptmr8t-x-x-50'>165</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetY (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>357</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>160</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138332r166'></a><span class='ptmr8t-x-x-50'>166</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetWidth (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>60</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138334r167'></a><span class='ptmr8t-x-x-50'>167</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetHeight (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138336r168'></a><span class='ptmr8t-x-x-50'>168</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetEnable (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138338r169'></a><span class='ptmr8t-x-x-50'>169</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetVisible (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138340r170'></a><span class='ptmr8t-x-x-50'>170</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetText (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"RB1"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138342r171'></a><span class='ptmr8t-x-x-50'>171</span><span class='pcrr8t-x-x-80'> label3</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetAlign (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138344r172'></a><span class='ptmr8t-x-x-50'>172</span><span class='pcrr8t-x-x-80'> Window1.CreateChild (label3);</span> 
<a id='x129-138346r173'></a><span class='ptmr8t-x-x-50'>173</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138348r174'></a><span class='ptmr8t-x-x-50'>174</span> 
<a id='x129-138350r175'></a><span class='ptmr8t-x-x-50'>175</span><span class='textcolor-3f7f7f'><span class='textit'>//Destructor called once on board destruction </span></span> 
<a id='x129-138352r176'></a><span class='ptmr8t-x-x-50'>176</span> 
<a id='x129-138354r177'></a><span class='ptmr8t-x-x-50'>177</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::~</span></span><span class='pcrr8t-x-x-80'>cboard_x(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138356r178'></a><span class='ptmr8t-x-x-50'>178</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138358r179'></a><span class='ptmr8t-x-x-50'>179</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//controls destruction </span></span> 
<a id='x129-138360r180'></a><span class='ptmr8t-x-x-50'>180</span><span class='pcrr8t-x-x-80'> Window1.DestroyChild (scroll1);</span> 
<a id='x129-138362r181'></a><span class='ptmr8t-x-x-50'>181</span><span class='pcrr8t-x-x-80'> Window1.DestroyChild (gauge1);</span> 
<a id='x129-138364r182'></a><span class='ptmr8t-x-x-50'>182</span><span class='pcrr8t-x-x-80'> Window1.DestroyChild (gauge2);</span> 
<a id='x129-138366r183'></a><span class='ptmr8t-x-x-50'>183</span><span class='pcrr8t-x-x-80'> Window1.DestroyChild (label1);</span> 
<a id='x129-138368r184'></a><span class='ptmr8t-x-x-50'>184</span><span class='pcrr8t-x-x-80'> Window1.DestroyChild (label2);</span> 
<a id='x129-138370r185'></a><span class='ptmr8t-x-x-50'>185</span><span class='pcrr8t-x-x-80'> Window1.DestroyChild (label3);</span> 
<a id='x129-138372r186'></a><span class='ptmr8t-x-x-50'>186</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138374r187'></a><span class='ptmr8t-x-x-50'>187</span> 
<a id='x129-138376r188'></a><span class='ptmr8t-x-x-50'>188</span><span class='textcolor-3f7f7f'><span class='textit'>//Reset board status</span></span> 
<a id='x129-138378r189'></a><span class='ptmr8t-x-x-50'>189</span> 
<a id='x129-138380r190'></a><span class='ptmr8t-x-x-50'>190</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138382r191'></a><span class='ptmr8t-x-x-50'>191</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>Reset(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138384r192'></a><span class='ptmr8t-x-x-50'>192</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138386r193'></a><span class='ptmr8t-x-x-50'>193</span><span class='pcrr8t-x-x-80'> pic_reset (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138388r194'></a><span class='ptmr8t-x-x-50'>194</span> 
<a id='x129-138390r195'></a><span class='ptmr8t-x-x-50'>195</span><span class='pcrr8t-x-x-80'> p_BT1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>; </span><span class='textcolor-3f7f7f'><span class='textit'>//set push button  in default state (high) </span></span> 
<a id='x129-138392r196'></a><span class='ptmr8t-x-x-50'>196</span> 
<a id='x129-138394r197'></a><span class='ptmr8t-x-x-50'>197</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//write button state to pic pin 19 (RD0)</span></span> 
<a id='x129-138396r198'></a><span class='ptmr8t-x-x-50'>198</span><span class='pcrr8t-x-x-80'> pic_set_pin (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>19</span></span><span class='pcrr8t-x-x-80'>, p_BT1);</span> 
<a id='x129-138398r199'></a><span class='ptmr8t-x-x-50'>199</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//write switch state to pic pin 20 (RD1)</span></span> 
<a id='x129-138400r200'></a><span class='ptmr8t-x-x-50'>200</span><span class='pcrr8t-x-x-80'> pic_set_pin (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>, p_BT2);</span> 
<a id='x129-138402r201'></a><span class='ptmr8t-x-x-50'>201</span> 
<a id='x129-138404r202'></a><span class='ptmr8t-x-x-50'>202</span> 
<a id='x129-138406r203'></a><span class='ptmr8t-x-x-50'>203</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//verify serial port state and refresh status bar  </span></span> 
<a id='x129-138408r204'></a><span class='ptmr8t-x-x-50'>204</span><span class='textcolor-bc7a00'><span class='textit'>#ifndef _WIN_</span></span> 
<a id='x129-138410r205'></a><span class='ptmr8t-x-x-50'>205</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialfd </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138412r206'></a><span class='ptmr8t-x-x-50'>206</span><span class='textcolor-bc7a00'><span class='textit'>#else</span></span> 
<a id='x129-138414r207'></a><span class='ptmr8t-x-x-50'>207</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialfd </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!=</span></span><span class='pcrr8t-x-x-80'> INVALID_HANDLE_VALUE)</span> 
<a id='x129-138416r208'></a><span class='ptmr8t-x-x-50'>208</span><span class='textcolor-bc7a00'><span class='textit'>#endif</span></span> 
<a id='x129-138418r209'></a><span class='ptmr8t-x-x-50'>209</span><span class='pcrr8t-x-x-80'>  Window1.statusbar1.SetField (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>2</span></span><span class='pcrr8t-x-x-80'>, lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Serial: "</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138420r210'></a><span class='ptmr8t-x-x-50'>210</span><span class='pcrr8t-x-x-80'>                               String</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>FromAscii (SERIALDEVICE) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>":"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> itoa (pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialbaud) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"("</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138422r211'></a><span class='ptmr8t-x-x-50'>211</span><span class='pcrr8t-x-x-80'>                               String ().Format (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"%4.1f"</span></span><span class='pcrr8t-x-x-80'>, fabs ((</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100.0</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialexbaud </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100.0</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span> 
<a id='x129-138424r212'></a><span class='ptmr8t-x-x-50'>212</span><span class='pcrr8t-x-x-80'>                                                                 pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialbaud) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>/</span></span><span class='pcrr8t-x-x-80'> pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialexbaud)) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"%)"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138426r213'></a><span class='ptmr8t-x-x-50'>213</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>else</span></span> 
<a id='x129-138428r214'></a><span class='ptmr8t-x-x-50'>214</span><span class='pcrr8t-x-x-80'>  Window1.statusbar1.SetField (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>2</span></span><span class='pcrr8t-x-x-80'>, lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Serial: "</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138430r215'></a><span class='ptmr8t-x-x-50'>215</span><span class='pcrr8t-x-x-80'>                               String</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>FromAscii (SERIALDEVICE) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>" (ERROR)"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138432r216'></a><span class='ptmr8t-x-x-50'>216</span> 
<a id='x129-138434r217'></a><span class='ptmr8t-x-x-50'>217</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (use_spare)Window5.Reset ();</span> 
<a id='x129-138436r218'></a><span class='ptmr8t-x-x-50'>218</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138438r219'></a><span class='ptmr8t-x-x-50'>219</span> 
<a id='x129-138440r220'></a><span class='ptmr8t-x-x-50'>220</span><span class='textcolor-3f7f7f'><span class='textit'>//Called ever 1s to refresh status</span></span> 
<a id='x129-138442r221'></a><span class='ptmr8t-x-x-50'>221</span> 
<a id='x129-138444r222'></a><span class='ptmr8t-x-x-50'>222</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138446r223'></a><span class='ptmr8t-x-x-50'>223</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>RefreshStatus(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138448r224'></a><span class='ptmr8t-x-x-50'>224</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138450r225'></a><span class='ptmr8t-x-x-50'>225</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//verify serial port state and refresh status bar   </span></span> 
<a id='x129-138452r226'></a><span class='ptmr8t-x-x-50'>226</span><span class='textcolor-bc7a00'><span class='textit'>#ifndef _WIN_</span></span> 
<a id='x129-138454r227'></a><span class='ptmr8t-x-x-50'>227</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialfd </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138456r228'></a><span class='ptmr8t-x-x-50'>228</span><span class='textcolor-bc7a00'><span class='textit'>#else</span></span> 
<a id='x129-138458r229'></a><span class='ptmr8t-x-x-50'>229</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialfd </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!=</span></span><span class='pcrr8t-x-x-80'> INVALID_HANDLE_VALUE)</span> 
<a id='x129-138460r230'></a><span class='ptmr8t-x-x-50'>230</span><span class='textcolor-bc7a00'><span class='textit'>#endif</span></span> 
<a id='x129-138462r231'></a><span class='ptmr8t-x-x-50'>231</span><span class='pcrr8t-x-x-80'>  Window1.statusbar1.SetField (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>2</span></span><span class='pcrr8t-x-x-80'>, lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Serial: "</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138464r232'></a><span class='ptmr8t-x-x-50'>232</span><span class='pcrr8t-x-x-80'>                               String</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>FromAscii (SERIALDEVICE) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>":"</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> itoa (pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialbaud) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"("</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138466r233'></a><span class='ptmr8t-x-x-50'>233</span><span class='pcrr8t-x-x-80'>                               String ().Format (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"%4.1f"</span></span><span class='pcrr8t-x-x-80'>, fabs ((</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100.0</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialexbaud </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>100.0</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span> 
<a id='x129-138468r234'></a><span class='ptmr8t-x-x-50'>234</span><span class='pcrr8t-x-x-80'>                                                                 pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialbaud) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>/</span></span><span class='pcrr8t-x-x-80'> pic.serial[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>].serialexbaud)) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"%)"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138470r235'></a><span class='ptmr8t-x-x-50'>235</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>else</span></span> 
<a id='x129-138472r236'></a><span class='ptmr8t-x-x-50'>236</span><span class='pcrr8t-x-x-80'>  Window1.statusbar1.SetField (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>2</span></span><span class='pcrr8t-x-x-80'>, lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Serial: "</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138474r237'></a><span class='ptmr8t-x-x-50'>237</span><span class='pcrr8t-x-x-80'>                               String</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>FromAscii (SERIALDEVICE) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>" (ERROR)"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138476r238'></a><span class='ptmr8t-x-x-50'>238</span> 
<a id='x129-138478r239'></a><span class='ptmr8t-x-x-50'>239</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138480r240'></a><span class='ptmr8t-x-x-50'>240</span> 
<a id='x129-138482r241'></a><span class='ptmr8t-x-x-50'>241</span><span class='textcolor-3f7f7f'><span class='textit'>//Called to save board preferences in configuration file</span></span> 
<a id='x129-138484r242'></a><span class='ptmr8t-x-x-50'>242</span> 
<a id='x129-138486r243'></a><span class='ptmr8t-x-x-50'>243</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138488r244'></a><span class='ptmr8t-x-x-50'>244</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>WritePreferences(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138490r245'></a><span class='ptmr8t-x-x-50'>245</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138492r246'></a><span class='ptmr8t-x-x-50'>246</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//write selected microcontroller of board_x to preferences</span></span> 
<a id='x129-138494r247'></a><span class='ptmr8t-x-x-50'>247</span><span class='pcrr8t-x-x-80'> Window1.saveprefs (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X_proc"</span></span><span class='pcrr8t-x-x-80'>), Proc);</span> 
<a id='x129-138496r248'></a><span class='ptmr8t-x-x-50'>248</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//write switch state of board_x to preferences </span></span> 
<a id='x129-138498r249'></a><span class='ptmr8t-x-x-50'>249</span><span class='pcrr8t-x-x-80'> Window1.saveprefs (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X_bt2"</span></span><span class='pcrr8t-x-x-80'>), String ().Format (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"%i"</span></span><span class='pcrr8t-x-x-80'>, p_BT2));</span> 
<a id='x129-138500r250'></a><span class='ptmr8t-x-x-50'>250</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//write microcontroller clock to preferences</span></span> 
<a id='x129-138502r251'></a><span class='ptmr8t-x-x-50'>251</span><span class='pcrr8t-x-x-80'> Window1.saveprefs (lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X_clock"</span></span><span class='pcrr8t-x-x-80'>), String ().Format (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"%2.1f"</span></span><span class='pcrr8t-x-x-80'>, Window1.GetClock()));</span> 
<a id='x129-138504r252'></a><span class='ptmr8t-x-x-50'>252</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138506r253'></a><span class='ptmr8t-x-x-50'>253</span> 
<a id='x129-138508r254'></a><span class='ptmr8t-x-x-50'>254</span><span class='textcolor-3f7f7f'><span class='textit'>//Called whe configuration file load  preferences </span></span> 
<a id='x129-138510r255'></a><span class='ptmr8t-x-x-50'>255</span> 
<a id='x129-138512r256'></a><span class='ptmr8t-x-x-50'>256</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138514r257'></a><span class='ptmr8t-x-x-50'>257</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>ReadPreferences(</span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>name, </span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>value)</span> 
<a id='x129-138516r258'></a><span class='ptmr8t-x-x-50'>258</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138518r259'></a><span class='ptmr8t-x-x-50'>259</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//read switch state of board_x of preferences </span></span> 
<a id='x129-138520r260'></a><span class='ptmr8t-x-x-50'>260</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!</span></span><span class='pcrr8t-x-x-80'>strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X_bt2"</span></span><span class='pcrr8t-x-x-80'>))</span> 
<a id='x129-138522r261'></a><span class='ptmr8t-x-x-50'>261</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138524r262'></a><span class='ptmr8t-x-x-50'>262</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (value[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>] </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-ba2121'><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>0</span><span class='pcrr8c-x-x-80'></span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138526r263'></a><span class='ptmr8t-x-x-50'>263</span><span class='pcrr8t-x-x-80'>    p_BT2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138528r264'></a><span class='ptmr8t-x-x-50'>264</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>else</span></span> 
<a id='x129-138530r265'></a><span class='ptmr8t-x-x-50'>265</span><span class='pcrr8t-x-x-80'>    p_BT2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138532r266'></a><span class='ptmr8t-x-x-50'>266</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138534r267'></a><span class='ptmr8t-x-x-50'>267</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//read microcontroller of preferences</span></span> 
<a id='x129-138536r268'></a><span class='ptmr8t-x-x-50'>268</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!</span></span><span class='pcrr8t-x-x-80'>strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X_proc"</span></span><span class='pcrr8t-x-x-80'>))</span> 
<a id='x129-138538r269'></a><span class='ptmr8t-x-x-50'>269</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138540r270'></a><span class='ptmr8t-x-x-50'>270</span><span class='pcrr8t-x-x-80'>   Proc </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> value;</span> 
<a id='x129-138542r271'></a><span class='ptmr8t-x-x-50'>271</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138544r272'></a><span class='ptmr8t-x-x-50'>272</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//read microcontroller clock</span></span> 
<a id='x129-138546r273'></a><span class='ptmr8t-x-x-50'>273</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!</span></span><span class='pcrr8t-x-x-80'>strcmp (name, </span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X_clock"</span></span><span class='pcrr8t-x-x-80'>))</span> 
<a id='x129-138548r274'></a><span class='ptmr8t-x-x-50'>274</span><span class='pcrr8t-x-x-80'> {</span> 
<a id='x129-138550r275'></a><span class='ptmr8t-x-x-50'>275</span><span class='pcrr8t-x-x-80'>  Window1.SetClock (atof(value));</span> 
<a id='x129-138552r276'></a><span class='ptmr8t-x-x-50'>276</span><span class='pcrr8t-x-x-80'> }</span> 
<a id='x129-138554r277'></a><span class='ptmr8t-x-x-50'>277</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138556r278'></a><span class='ptmr8t-x-x-50'>278</span> 
<a id='x129-138558r279'></a><span class='ptmr8t-x-x-50'>279</span> 
<a id='x129-138560r280'></a><span class='ptmr8t-x-x-50'>280</span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-138562r281'></a><span class='ptmr8t-x-x-50'>281</span> 
<a id='x129-138564r282'></a><span class='ptmr8t-x-x-50'>282</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138566r283'></a><span class='ptmr8t-x-x-50'>283</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>EvKeyPress(uint key, uint mask)</span> 
<a id='x129-138568r284'></a><span class='ptmr8t-x-x-50'>284</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138570r285'></a><span class='ptmr8t-x-x-50'>285</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//if keyboard key 1 is pressed then activate button (state=0)   </span></span> 
<a id='x129-138572r286'></a><span class='ptmr8t-x-x-50'>286</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (key </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-ba2121'><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>1</span><span class='pcrr8c-x-x-80'></span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138574r287'></a><span class='ptmr8t-x-x-50'>287</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138576r288'></a><span class='ptmr8t-x-x-50'>288</span><span class='pcrr8t-x-x-80'>   p_BT1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138578r289'></a><span class='ptmr8t-x-x-50'>289</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138580r290'></a><span class='ptmr8t-x-x-50'>290</span> 
<a id='x129-138582r291'></a><span class='ptmr8t-x-x-50'>291</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//if keyboard key 2 is pressed then toggle switch state   </span></span> 
<a id='x129-138584r292'></a><span class='ptmr8t-x-x-50'>292</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (key </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-ba2121'><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>2</span><span class='pcrr8c-x-x-80'></span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138586r293'></a><span class='ptmr8t-x-x-50'>293</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138588r294'></a><span class='ptmr8t-x-x-50'>294</span><span class='pcrr8t-x-x-80'>   p_BT2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>^=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138590r295'></a><span class='ptmr8t-x-x-50'>295</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138592r296'></a><span class='ptmr8t-x-x-50'>296</span> 
<a id='x129-138594r297'></a><span class='ptmr8t-x-x-50'>297</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138596r298'></a><span class='ptmr8t-x-x-50'>298</span> 
<a id='x129-138598r299'></a><span class='ptmr8t-x-x-50'>299</span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-138600r300'></a><span class='ptmr8t-x-x-50'>300</span> 
<a id='x129-138602r301'></a><span class='ptmr8t-x-x-50'>301</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138604r302'></a><span class='ptmr8t-x-x-50'>302</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>EvKeyRelease(uint key, uint mask)</span> 
<a id='x129-138606r303'></a><span class='ptmr8t-x-x-50'>303</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138608r304'></a><span class='ptmr8t-x-x-50'>304</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//if keyboard key 1 is pressed then deactivate button (state=1)     </span></span> 
<a id='x129-138610r305'></a><span class='ptmr8t-x-x-50'>305</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (key </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-ba2121'><span class='pcrr8c-x-x-80'></span><span class='pcrr8t-x-x-80'>1</span><span class='pcrr8c-x-x-80'></span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138612r306'></a><span class='ptmr8t-x-x-50'>306</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138614r307'></a><span class='ptmr8t-x-x-50'>307</span><span class='pcrr8t-x-x-80'>   p_BT1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138616r308'></a><span class='ptmr8t-x-x-50'>308</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138618r309'></a><span class='ptmr8t-x-x-50'>309</span> 
<a id='x129-138620r310'></a><span class='ptmr8t-x-x-50'>310</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138622r311'></a><span class='ptmr8t-x-x-50'>311</span> 
<a id='x129-138624r312'></a><span class='ptmr8t-x-x-50'>312</span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-138626r313'></a><span class='ptmr8t-x-x-50'>313</span> 
<a id='x129-138628r314'></a><span class='ptmr8t-x-x-50'>314</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138630r315'></a><span class='ptmr8t-x-x-50'>315</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>EvMouseButtonPress(uint button, uint x, uint y, uint state)</span> 
<a id='x129-138632r316'></a><span class='ptmr8t-x-x-50'>316</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138634r317'></a><span class='ptmr8t-x-x-50'>317</span> 
<a id='x129-138636r318'></a><span class='ptmr8t-x-x-50'>318</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> i;</span> 
<a id='x129-138638r319'></a><span class='ptmr8t-x-x-50'>319</span> 
<a id='x129-138640r320'></a><span class='ptmr8t-x-x-50'>320</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//search for the input area which owner the event    </span></span> 
<a id='x129-138642r321'></a><span class='ptmr8t-x-x-50'>321</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>for</span></span><span class='pcrr8t-x-x-80'> (i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>; i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;</span></span><span class='pcrr8t-x-x-80'> inputc; i</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>++</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138644r322'></a><span class='ptmr8t-x-x-50'>322</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138646r323'></a><span class='ptmr8t-x-x-50'>323</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (((input[i].x1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;=</span></span><span class='pcrr8t-x-x-80'> x)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span><span class='pcrr8t-x-x-80'>(input[i].x2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;=</span></span><span class='pcrr8t-x-x-80'> x))</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span><span class='pcrr8t-x-x-80'>((input[i].y1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;=</span></span><span class='pcrr8t-x-x-80'> y)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span> 
<a id='x129-138648r324'></a><span class='ptmr8t-x-x-50'>324</span><span class='pcrr8t-x-x-80'>                                                  (input[i].y2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;=</span></span><span class='pcrr8t-x-x-80'> y)))</span> 
<a id='x129-138650r325'></a><span class='ptmr8t-x-x-50'>325</span><span class='pcrr8t-x-x-80'>    {</span> 
<a id='x129-138652r326'></a><span class='ptmr8t-x-x-50'>326</span> 
<a id='x129-138654r327'></a><span class='ptmr8t-x-x-50'>327</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-007f00'><span class='textbf'>switch</span></span><span class='pcrr8t-x-x-80'> (input[i].id)</span> 
<a id='x129-138656r328'></a><span class='ptmr8t-x-x-50'>328</span><span class='pcrr8t-x-x-80'>      {</span> 
<a id='x129-138658r329'></a><span class='ptmr8t-x-x-50'>329</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_ISCP area then load hex file  </span></span> 
<a id='x129-138660r330'></a><span class='ptmr8t-x-x-50'>330</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_ICSP</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138662r331'></a><span class='ptmr8t-x-x-50'>331</span><span class='pcrr8t-x-x-80'>       Window1.menu1_File_LoadHex_EvMenuActive (</span><span class='textcolor-007f00'><span class='pcrr8t-x-x-80'>NULL</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138664r332'></a><span class='ptmr8t-x-x-50'>332</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138666r333'></a><span class='ptmr8t-x-x-50'>333</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_PWR area then toggle board on/off</span></span> 
<a id='x129-138668r334'></a><span class='ptmr8t-x-x-50'>334</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_PWR</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138670r335'></a><span class='ptmr8t-x-x-50'>335</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (Window1.Get_mcupwr ()) </span><span class='textcolor-3f7f7f'><span class='textit'>//if on turn off</span></span> 
<a id='x129-138672r336'></a><span class='ptmr8t-x-x-50'>336</span><span class='pcrr8t-x-x-80'>        {</span> 
<a id='x129-138674r337'></a><span class='ptmr8t-x-x-50'>337</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcurun (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138676r338'></a><span class='ptmr8t-x-x-50'>338</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcupwr (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138678r339'></a><span class='ptmr8t-x-x-50'>339</span><span class='pcrr8t-x-x-80'>         Reset ();</span> 
<a id='x129-138680r340'></a><span class='ptmr8t-x-x-50'>340</span><span class='pcrr8t-x-x-80'>         p_BT1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138682r341'></a><span class='ptmr8t-x-x-50'>341</span><span class='pcrr8t-x-x-80'>         Window1.statusbar1.SetField (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Stoped"</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138684r342'></a><span class='ptmr8t-x-x-50'>342</span><span class='pcrr8t-x-x-80'>        }</span> 
<a id='x129-138686r343'></a><span class='ptmr8t-x-x-50'>343</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>else</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//if off turn on</span></span> 
<a id='x129-138688r344'></a><span class='ptmr8t-x-x-50'>344</span><span class='pcrr8t-x-x-80'>        {</span> 
<a id='x129-138690r345'></a><span class='ptmr8t-x-x-50'>345</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcupwr (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138692r346'></a><span class='ptmr8t-x-x-50'>346</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcurun (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138694r347'></a><span class='ptmr8t-x-x-50'>347</span><span class='pcrr8t-x-x-80'>         Reset ();</span> 
<a id='x129-138696r348'></a><span class='ptmr8t-x-x-50'>348</span><span class='pcrr8t-x-x-80'>         Window1.statusbar1.SetField (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, lxT (</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"Running..."</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138698r349'></a><span class='ptmr8t-x-x-50'>349</span><span class='pcrr8t-x-x-80'>        }</span> 
<a id='x129-138700r350'></a><span class='ptmr8t-x-x-50'>350</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138702r351'></a><span class='ptmr8t-x-x-50'>351</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_RST area then turn off and reset</span></span> 
<a id='x129-138704r352'></a><span class='ptmr8t-x-x-50'>352</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_RST</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138706r353'></a><span class='ptmr8t-x-x-50'>353</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (Window1.Get_mcupwr () </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span><span class='pcrr8t-x-x-80'> pic_reset (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-1</span></span><span class='pcrr8t-x-x-80'>))</span><span class='textcolor-3f7f7f'><span class='textit'>//if powered</span></span> 
<a id='x129-138708r354'></a><span class='ptmr8t-x-x-50'>354</span><span class='pcrr8t-x-x-80'>        {</span> 
<a id='x129-138710r355'></a><span class='ptmr8t-x-x-50'>355</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcupwr (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138712r356'></a><span class='ptmr8t-x-x-50'>356</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcurst (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138714r357'></a><span class='ptmr8t-x-x-50'>357</span><span class='pcrr8t-x-x-80'>        }</span> 
<a id='x129-138716r358'></a><span class='ptmr8t-x-x-50'>358</span><span class='pcrr8t-x-x-80'>       p_MCLR </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138718r359'></a><span class='ptmr8t-x-x-50'>359</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138720r360'></a><span class='ptmr8t-x-x-50'>360</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_D0 area then activate button (state=0) </span></span> 
<a id='x129-138722r361'></a><span class='ptmr8t-x-x-50'>361</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_D0</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138724r362'></a><span class='ptmr8t-x-x-50'>362</span><span class='pcrr8t-x-x-80'>       p_BT1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138726r363'></a><span class='ptmr8t-x-x-50'>363</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138728r364'></a><span class='ptmr8t-x-x-50'>364</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_D1 area then toggle switch state   </span></span> 
<a id='x129-138730r365'></a><span class='ptmr8t-x-x-50'>365</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_D1</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138732r366'></a><span class='ptmr8t-x-x-50'>366</span><span class='pcrr8t-x-x-80'>       p_BT2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>^=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138734r367'></a><span class='ptmr8t-x-x-50'>367</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138736r368'></a><span class='ptmr8t-x-x-50'>368</span><span class='pcrr8t-x-x-80'>      }</span> 
<a id='x129-138738r369'></a><span class='ptmr8t-x-x-50'>369</span><span class='pcrr8t-x-x-80'>    }</span> 
<a id='x129-138740r370'></a><span class='ptmr8t-x-x-50'>370</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138742r371'></a><span class='ptmr8t-x-x-50'>371</span> 
<a id='x129-138744r372'></a><span class='ptmr8t-x-x-50'>372</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138746r373'></a><span class='ptmr8t-x-x-50'>373</span> 
<a id='x129-138748r374'></a><span class='ptmr8t-x-x-50'>374</span><span class='textcolor-3f7f7f'><span class='textit'>//Event on the board</span></span> 
<a id='x129-138750r375'></a><span class='ptmr8t-x-x-50'>375</span> 
<a id='x129-138752r376'></a><span class='ptmr8t-x-x-50'>376</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138754r377'></a><span class='ptmr8t-x-x-50'>377</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>EvMouseButtonRelease(uint button, uint x, uint y, uint state)</span> 
<a id='x129-138756r378'></a><span class='ptmr8t-x-x-50'>378</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138758r379'></a><span class='ptmr8t-x-x-50'>379</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> i;</span> 
<a id='x129-138760r380'></a><span class='ptmr8t-x-x-50'>380</span> 
<a id='x129-138762r381'></a><span class='ptmr8t-x-x-50'>381</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//search for the input area which owner the event  </span></span> 
<a id='x129-138764r382'></a><span class='ptmr8t-x-x-50'>382</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>for</span></span><span class='pcrr8t-x-x-80'> (i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>; i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;</span></span><span class='pcrr8t-x-x-80'> inputc; i</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>++</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138766r383'></a><span class='ptmr8t-x-x-50'>383</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138768r384'></a><span class='ptmr8t-x-x-50'>384</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (((input[i].x1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;=</span></span><span class='pcrr8t-x-x-80'> x)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span><span class='pcrr8t-x-x-80'>(input[i].x2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;=</span></span><span class='pcrr8t-x-x-80'> x))</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span><span class='pcrr8t-x-x-80'>((input[i].y1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;=</span></span><span class='pcrr8t-x-x-80'> y)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&amp;&amp;</span></span> 
<a id='x129-138770r385'></a><span class='ptmr8t-x-x-50'>385</span><span class='pcrr8t-x-x-80'>                                                  (input[i].y2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;=</span></span><span class='pcrr8t-x-x-80'> y)))</span> 
<a id='x129-138772r386'></a><span class='ptmr8t-x-x-50'>386</span><span class='pcrr8t-x-x-80'>    {</span> 
<a id='x129-138774r387'></a><span class='ptmr8t-x-x-50'>387</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-007f00'><span class='textbf'>switch</span></span><span class='pcrr8t-x-x-80'> (input[i].id)</span> 
<a id='x129-138776r388'></a><span class='ptmr8t-x-x-50'>388</span><span class='pcrr8t-x-x-80'>      {</span> 
<a id='x129-138778r389'></a><span class='ptmr8t-x-x-50'>389</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_RST area then turn on  </span></span> 
<a id='x129-138780r390'></a><span class='ptmr8t-x-x-50'>390</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_RST</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138782r391'></a><span class='ptmr8t-x-x-50'>391</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (Window1.Get_mcurst ())</span><span class='textcolor-3f7f7f'><span class='textit'>//if powered</span></span> 
<a id='x129-138784r392'></a><span class='ptmr8t-x-x-50'>392</span><span class='pcrr8t-x-x-80'>        {</span> 
<a id='x129-138786r393'></a><span class='ptmr8t-x-x-50'>393</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcupwr (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138788r394'></a><span class='ptmr8t-x-x-50'>394</span><span class='pcrr8t-x-x-80'>         Window1.Set_mcurst (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138790r395'></a><span class='ptmr8t-x-x-50'>395</span> 
<a id='x129-138792r396'></a><span class='ptmr8t-x-x-50'>396</span><span class='pcrr8t-x-x-80'>         </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (pic_reset (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-1</span></span><span class='pcrr8t-x-x-80'>))</span> 
<a id='x129-138794r397'></a><span class='ptmr8t-x-x-50'>397</span><span class='pcrr8t-x-x-80'>          {</span> 
<a id='x129-138796r398'></a><span class='ptmr8t-x-x-50'>398</span><span class='pcrr8t-x-x-80'>           Reset ();</span> 
<a id='x129-138798r399'></a><span class='ptmr8t-x-x-50'>399</span><span class='pcrr8t-x-x-80'>          }</span> 
<a id='x129-138800r400'></a><span class='ptmr8t-x-x-50'>400</span><span class='pcrr8t-x-x-80'>        }</span> 
<a id='x129-138802r401'></a><span class='ptmr8t-x-x-50'>401</span><span class='pcrr8t-x-x-80'>       p_MCLR </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138804r402'></a><span class='ptmr8t-x-x-50'>402</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138806r403'></a><span class='ptmr8t-x-x-50'>403</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//if event is over I_D0 area then deactivate button (state=1) </span></span> 
<a id='x129-138808r404'></a><span class='ptmr8t-x-x-50'>404</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>I_D0</span></span><span class='pcrr8t-x-x-80'>:</span> 
<a id='x129-138810r405'></a><span class='ptmr8t-x-x-50'>405</span><span class='pcrr8t-x-x-80'>       p_BT1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138812r406'></a><span class='ptmr8t-x-x-50'>406</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138814r407'></a><span class='ptmr8t-x-x-50'>407</span><span class='pcrr8t-x-x-80'>      }</span> 
<a id='x129-138816r408'></a><span class='ptmr8t-x-x-50'>408</span><span class='pcrr8t-x-x-80'>    }</span> 
<a id='x129-138818r409'></a><span class='ptmr8t-x-x-50'>409</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138820r410'></a><span class='ptmr8t-x-x-50'>410</span> 
<a id='x129-138822r411'></a><span class='ptmr8t-x-x-50'>411</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138824r412'></a><span class='ptmr8t-x-x-50'>412</span> 
<a id='x129-138826r413'></a><span class='ptmr8t-x-x-50'>413</span> 
<a id='x129-138828r414'></a><span class='ptmr8t-x-x-50'>414</span><span class='textcolor-3f7f7f'><span class='textit'>//Called ever 100ms to draw board</span></span> 
<a id='x129-138830r415'></a><span class='ptmr8t-x-x-50'>415</span><span class='textcolor-3f7f7f'><span class='textit'>//This is the critical code for simulator running speed</span></span> 
<a id='x129-138832r416'></a><span class='ptmr8t-x-x-50'>416</span> 
<a id='x129-138834r417'></a><span class='ptmr8t-x-x-50'>417</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138836r418'></a><span class='ptmr8t-x-x-50'>418</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>Draw(CDraw </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'>draw, </span><span class='textcolor-af003f'><span class='textbf'>double</span></span><span class='pcrr8t-x-x-80'> scale)</span> 
<a id='x129-138838r419'></a><span class='ptmr8t-x-x-50'>419</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138840r420'></a><span class='ptmr8t-x-x-50'>420</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> i;</span> 
<a id='x129-138842r421'></a><span class='ptmr8t-x-x-50'>421</span> 
<a id='x129-138844r422'></a><span class='ptmr8t-x-x-50'>422</span><span class='pcrr8t-x-x-80'> draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.Init (scale, scale); </span><span class='textcolor-3f7f7f'><span class='textit'>//initialize draw context</span></span> 
<a id='x129-138846r423'></a><span class='ptmr8t-x-x-50'>423</span> 
<a id='x129-138848r424'></a><span class='ptmr8t-x-x-50'>424</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//board_x draw </span></span> 
<a id='x129-138850r425'></a><span class='ptmr8t-x-x-50'>425</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>for</span></span><span class='pcrr8t-x-x-80'> (i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>; i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;</span></span><span class='pcrr8t-x-x-80'> outputc; i</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>++</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-3f7f7f'><span class='textit'>//run over all outputs</span></span> 
<a id='x129-138852r426'></a><span class='ptmr8t-x-x-50'>426</span><span class='pcrr8t-x-x-80'>  {</span> 
<a id='x129-138854r427'></a><span class='ptmr8t-x-x-50'>427</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!</span></span><span class='pcrr8t-x-x-80'>output[i].r)</span><span class='textcolor-3f7f7f'><span class='textit'>//if output shape is a rectangle</span></span> 
<a id='x129-138856r428'></a><span class='ptmr8t-x-x-50'>428</span><span class='pcrr8t-x-x-80'>    {</span> 
<a id='x129-138858r429'></a><span class='ptmr8t-x-x-50'>429</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (output[i].id </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>==</span></span><span class='pcrr8t-x-x-80'> O_SD1)</span><span class='textcolor-3f7f7f'><span class='textit'>//if output is switch</span></span> 
<a id='x129-138860r430'></a><span class='ptmr8t-x-x-50'>430</span><span class='pcrr8t-x-x-80'>      {</span> 
<a id='x129-138862r431'></a><span class='ptmr8t-x-x-50'>431</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-3f7f7f'><span class='textit'>//draw a background white rectangle   </span></span> 
<a id='x129-138864r432'></a><span class='ptmr8t-x-x-50'>432</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetBgColor (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>255</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>255</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>255</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138866r433'></a><span class='ptmr8t-x-x-50'>433</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.Rectangle (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>, output[i].x1, output[i].y1,</span> 
<a id='x129-138868r434'></a><span class='ptmr8t-x-x-50'>434</span><span class='pcrr8t-x-x-80'>                               output[i].x2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].x1, output[i].y2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].y1);</span> 
<a id='x129-138870r435'></a><span class='ptmr8t-x-x-50'>435</span> 
<a id='x129-138872r436'></a><span class='ptmr8t-x-x-50'>436</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!</span></span><span class='pcrr8t-x-x-80'>p_BT2) </span><span class='textcolor-3f7f7f'><span class='textit'>//draw switch off</span></span> 
<a id='x129-138874r437'></a><span class='ptmr8t-x-x-50'>437</span><span class='pcrr8t-x-x-80'>        {</span> 
<a id='x129-138876r438'></a><span class='ptmr8t-x-x-50'>438</span><span class='pcrr8t-x-x-80'>         </span><span class='textcolor-3f7f7f'><span class='textit'>//draw a grey rectangle  </span></span> 
<a id='x129-138878r439'></a><span class='ptmr8t-x-x-50'>439</span><span class='pcrr8t-x-x-80'>         draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetBgColor (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>70</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>70</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>70</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138880r440'></a><span class='ptmr8t-x-x-50'>440</span><span class='pcrr8t-x-x-80'>         draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.Rectangle (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>, output[i].x1, output[i].y1 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span> 
<a id='x129-138882r441'></a><span class='ptmr8t-x-x-50'>441</span><span class='pcrr8t-x-x-80'>                                 ((</span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'>) ((output[i].y2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].y1)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*0.35</span></span><span class='pcrr8t-x-x-80'>)), output[i].x2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].x1,</span> 
<a id='x129-138884r442'></a><span class='ptmr8t-x-x-50'>442</span><span class='pcrr8t-x-x-80'>                                 (</span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'>) ((output[i].y2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].y1)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*0.65</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138886r443'></a><span class='ptmr8t-x-x-50'>443</span><span class='pcrr8t-x-x-80'>        }</span> 
<a id='x129-138888r444'></a><span class='ptmr8t-x-x-50'>444</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>else</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//draw switch on</span></span> 
<a id='x129-138890r445'></a><span class='ptmr8t-x-x-50'>445</span><span class='pcrr8t-x-x-80'>        {</span> 
<a id='x129-138892r446'></a><span class='ptmr8t-x-x-50'>446</span><span class='pcrr8t-x-x-80'>         </span><span class='textcolor-3f7f7f'><span class='textit'>//draw a grey rectangle  </span></span> 
<a id='x129-138894r447'></a><span class='ptmr8t-x-x-50'>447</span><span class='pcrr8t-x-x-80'>         draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetBgColor (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>70</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>70</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>70</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138896r448'></a><span class='ptmr8t-x-x-50'>448</span><span class='pcrr8t-x-x-80'>         draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.Rectangle (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>, output[i].x1,</span> 
<a id='x129-138898r449'></a><span class='ptmr8t-x-x-50'>449</span><span class='pcrr8t-x-x-80'>                                 output[i].y1, output[i].x2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].x1,</span> 
<a id='x129-138900r450'></a><span class='ptmr8t-x-x-50'>450</span><span class='pcrr8t-x-x-80'>                                 (</span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'>) ((output[i].y2 </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> output[i].y1)</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*0.65</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138902r451'></a><span class='ptmr8t-x-x-50'>451</span><span class='pcrr8t-x-x-80'>        }</span> 
<a id='x129-138904r452'></a><span class='ptmr8t-x-x-50'>452</span><span class='pcrr8t-x-x-80'>      }</span> 
<a id='x129-138906r453'></a><span class='ptmr8t-x-x-50'>453</span><span class='pcrr8t-x-x-80'>    }</span> 
<a id='x129-138908r454'></a><span class='ptmr8t-x-x-50'>454</span><span class='pcrr8t-x-x-80'>   </span><span class='textcolor-007f00'><span class='textbf'>else</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//if output shape is a circle</span></span> 
<a id='x129-138910r455'></a><span class='ptmr8t-x-x-50'>455</span><span class='pcrr8t-x-x-80'>    {</span> 
<a id='x129-138912r456'></a><span class='ptmr8t-x-x-50'>456</span> 
<a id='x129-138914r457'></a><span class='ptmr8t-x-x-50'>457</span><span class='pcrr8t-x-x-80'>     draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetFgColor (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>); </span><span class='textcolor-3f7f7f'><span class='textit'>//black</span></span> 
<a id='x129-138916r458'></a><span class='ptmr8t-x-x-50'>458</span> 
<a id='x129-138918r459'></a><span class='ptmr8t-x-x-50'>459</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-007f00'><span class='textbf'>switch</span></span><span class='pcrr8t-x-x-80'> (output[i].id)</span><span class='textcolor-3f7f7f'><span class='textit'>//search for color of output</span></span> 
<a id='x129-138920r460'></a><span class='ptmr8t-x-x-50'>460</span><span class='pcrr8t-x-x-80'>      {</span> 
<a id='x129-138922r461'></a><span class='ptmr8t-x-x-50'>461</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>O_LD0</span></span><span class='pcrr8t-x-x-80'>: </span><span class='textcolor-3f7f7f'><span class='textit'>//White using pin 19 mean value (RD0)</span></span> 
<a id='x129-138924r462'></a><span class='ptmr8t-x-x-50'>462</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetColor (pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>18</span></span><span class='pcrr8t-x-x-80'>].oavalue, pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>18</span></span><span class='pcrr8t-x-x-80'>].oavalue, pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>18</span></span><span class='pcrr8t-x-x-80'>].oavalue);</span> 
<a id='x129-138926r463'></a><span class='ptmr8t-x-x-50'>463</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138928r464'></a><span class='ptmr8t-x-x-50'>464</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>O_LD1</span></span><span class='pcrr8t-x-x-80'>: </span><span class='textcolor-3f7f7f'><span class='textit'>//Yelllow using pin 20 mean value (RD1)</span></span> 
<a id='x129-138930r465'></a><span class='ptmr8t-x-x-50'>465</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetColor (pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>19</span></span><span class='pcrr8t-x-x-80'>].oavalue, pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>19</span></span><span class='pcrr8t-x-x-80'>].oavalue, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138932r466'></a><span class='ptmr8t-x-x-50'>466</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138934r467'></a><span class='ptmr8t-x-x-50'>467</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>O_LPWR</span></span><span class='pcrr8t-x-x-80'>: </span><span class='textcolor-3f7f7f'><span class='textit'>//Blue using mcupwr value</span></span> 
<a id='x129-138936r468'></a><span class='ptmr8t-x-x-50'>468</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetColor (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>225</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> Window1.Get_mcupwr () </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>30</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138938r469'></a><span class='ptmr8t-x-x-50'>469</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138940r470'></a><span class='ptmr8t-x-x-50'>470</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>O_RB0</span></span><span class='pcrr8t-x-x-80'>: </span><span class='textcolor-3f7f7f'><span class='textit'>//Green using pin 33 mean value (RB0)</span></span> 
<a id='x129-138942r471'></a><span class='ptmr8t-x-x-50'>471</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetColor (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>32</span></span><span class='pcrr8t-x-x-80'>].oavalue, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138944r472'></a><span class='ptmr8t-x-x-50'>472</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138946r473'></a><span class='ptmr8t-x-x-50'>473</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-007f00'><span class='textbf'>case</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-a0a000'><span class='pcrr8t-x-x-80'>O_RB1</span></span><span class='pcrr8t-x-x-80'>: </span><span class='textcolor-3f7f7f'><span class='textit'>//Red using pin 34 mean value (RB1)</span></span> 
<a id='x129-138948r474'></a><span class='ptmr8t-x-x-50'>474</span><span class='pcrr8t-x-x-80'>       draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.SetColor (pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>33</span></span><span class='pcrr8t-x-x-80'>].oavalue, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>);</span> 
<a id='x129-138950r475'></a><span class='ptmr8t-x-x-50'>475</span><span class='pcrr8t-x-x-80'>       </span><span class='textcolor-007f00'><span class='textbf'>break</span></span><span class='pcrr8t-x-x-80'>;</span> 
<a id='x129-138952r476'></a><span class='ptmr8t-x-x-50'>476</span><span class='pcrr8t-x-x-80'>      }</span> 
<a id='x129-138954r477'></a><span class='ptmr8t-x-x-50'>477</span> 
<a id='x129-138956r478'></a><span class='ptmr8t-x-x-50'>478</span><span class='pcrr8t-x-x-80'>     </span><span class='textcolor-3f7f7f'><span class='textit'>//draw a circle</span></span> 
<a id='x129-138958r479'></a><span class='ptmr8t-x-x-50'>479</span><span class='pcrr8t-x-x-80'>     draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.Circle (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>, output[i].x1, output[i].y1, output[i].r);</span> 
<a id='x129-138960r480'></a><span class='ptmr8t-x-x-50'>480</span><span class='pcrr8t-x-x-80'>    }</span> 
<a id='x129-138962r481'></a><span class='ptmr8t-x-x-50'>481</span> 
<a id='x129-138964r482'></a><span class='ptmr8t-x-x-50'>482</span><span class='pcrr8t-x-x-80'>  }</span> 
<a id='x129-138966r483'></a><span class='ptmr8t-x-x-50'>483</span> 
<a id='x129-138968r484'></a><span class='ptmr8t-x-x-50'>484</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//end draw</span></span> 
<a id='x129-138970r485'></a><span class='ptmr8t-x-x-50'>485</span><span class='pcrr8t-x-x-80'> draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Canvas.End ();</span> 
<a id='x129-138972r486'></a><span class='ptmr8t-x-x-50'>486</span><span class='pcrr8t-x-x-80'> draw</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>Update ();</span> 
<a id='x129-138974r487'></a><span class='ptmr8t-x-x-50'>487</span> 
<a id='x129-138976r488'></a><span class='ptmr8t-x-x-50'>488</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//RB0 mean value to gauge1</span></span> 
<a id='x129-138978r489'></a><span class='ptmr8t-x-x-50'>489</span><span class='pcrr8t-x-x-80'> gauge1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetValue (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0.4444</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> (pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>33</span></span><span class='pcrr8t-x-x-80'>].oavalue </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>30</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138980r490'></a><span class='ptmr8t-x-x-50'>490</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//RB1 mean value to gauge2</span></span> 
<a id='x129-138982r491'></a><span class='ptmr8t-x-x-50'>491</span><span class='pcrr8t-x-x-80'> gauge2</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>SetValue (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0.44444</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> (pic.pins[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>32</span></span><span class='pcrr8t-x-x-80'>].oavalue </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>30</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-138984r492'></a><span class='ptmr8t-x-x-50'>492</span> 
<a id='x129-138986r493'></a><span class='ptmr8t-x-x-50'>493</span><span class='pcrr8t-x-x-80'>}</span> 
<a id='x129-138988r494'></a><span class='ptmr8t-x-x-50'>494</span> 
<a id='x129-138990r495'></a><span class='ptmr8t-x-x-50'>495</span><span class='textcolor-af003f'><span class='textbf'>void</span></span> 
<a id='x129-138992r496'></a><span class='ptmr8t-x-x-50'>496</span><span class='pcrr8t-x-x-80'>cboard_x</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>::</span></span><span class='pcrr8t-x-x-80'>Run_CPU(</span><span class='textcolor-af003f'><span class='textbf'>void</span></span><span class='pcrr8t-x-x-80'>)</span> 
<a id='x129-138994r497'></a><span class='ptmr8t-x-x-50'>497</span><span class='pcrr8t-x-x-80'>{</span> 
<a id='x129-138996r498'></a><span class='ptmr8t-x-x-50'>498</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> i;</span> 
<a id='x129-138998r499'></a><span class='ptmr8t-x-x-50'>499</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> j;</span> 
<a id='x129-139000r500'></a><span class='ptmr8t-x-x-50'>500</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>char</span></span><span class='pcrr8t-x-x-80'> pi;</span> 
<a id='x129-139002r501'></a><span class='ptmr8t-x-x-50'>501</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>const</span></span><span class='pcrr8t-x-x-80'> picpin </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> pins;</span> 
<a id='x129-139004r502'></a><span class='ptmr8t-x-x-50'>502</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> alm[</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>40</span></span><span class='pcrr8t-x-x-80'>];</span> 
<a id='x129-139006r503'></a><span class='ptmr8t-x-x-50'>503</span> 
<a id='x129-139008r504'></a><span class='ptmr8t-x-x-50'>504</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> JUMPSTEPS </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> Window1.GetJUMPSTEPS (); </span><span class='textcolor-3f7f7f'><span class='textit'>//number of steps skipped</span></span> 
<a id='x129-139010r505'></a><span class='ptmr8t-x-x-50'>505</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>long</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'> NSTEPJ </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> Window1.GetNSTEPJ (); </span><span class='textcolor-3f7f7f'><span class='textit'>//number of steps in 100ms</span></span> 
<a id='x129-139012r506'></a><span class='ptmr8t-x-x-50'>506</span> 
<a id='x129-139014r507'></a><span class='ptmr8t-x-x-50'>507</span> 
<a id='x129-139016r508'></a><span class='ptmr8t-x-x-50'>508</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//reset pins mean value</span></span> 
<a id='x129-139018r509'></a><span class='ptmr8t-x-x-50'>509</span><span class='pcrr8t-x-x-80'> memset (alm, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>, </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>40</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>sizeof</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-af003f'><span class='textbf'>unsigned</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'>));</span> 
<a id='x129-139020r510'></a><span class='ptmr8t-x-x-50'>510</span> 
<a id='x129-139022r511'></a><span class='ptmr8t-x-x-50'>511</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//read pic.pins to a local variable to speed up </span></span> 
<a id='x129-139024r512'></a><span class='ptmr8t-x-x-50'>512</span><span class='pcrr8t-x-x-80'> pins </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> pic.pins;</span> 
<a id='x129-139026r513'></a><span class='ptmr8t-x-x-50'>513</span> 
<a id='x129-139028r514'></a><span class='ptmr8t-x-x-50'>514</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//Spare parts window pre process</span></span> 
<a id='x129-139030r515'></a><span class='ptmr8t-x-x-50'>515</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (use_spare)Window5.PreProcess ();</span> 
<a id='x129-139032r516'></a><span class='ptmr8t-x-x-50'>516</span> 
<a id='x129-139034r517'></a><span class='ptmr8t-x-x-50'>517</span><span class='pcrr8t-x-x-80'> j </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> JUMPSTEPS; </span><span class='textcolor-3f7f7f'><span class='textit'>//step counter</span></span> 
<a id='x129-139036r518'></a><span class='ptmr8t-x-x-50'>518</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (Window1.Get_mcupwr ()) </span><span class='textcolor-3f7f7f'><span class='textit'>//if powered</span></span> 
<a id='x129-139038r519'></a><span class='ptmr8t-x-x-50'>519</span><span class='pcrr8t-x-x-80'>  </span><span class='textcolor-007f00'><span class='textbf'>for</span></span><span class='pcrr8t-x-x-80'> (i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>; i </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;</span></span><span class='pcrr8t-x-x-80'> Window1.GetNSTEP (); i</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>++</span></span><span class='pcrr8t-x-x-80'>) </span><span class='textcolor-3f7f7f'><span class='textit'>//repeat for number of steps in 100ms</span></span> 
<a id='x129-139040r520'></a><span class='ptmr8t-x-x-50'>520</span><span class='pcrr8t-x-x-80'>   {</span> 
<a id='x129-139042r521'></a><span class='ptmr8t-x-x-50'>521</span> 
<a id='x129-139044r522'></a><span class='ptmr8t-x-x-50'>522</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (j </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;=</span></span><span class='pcrr8t-x-x-80'> JUMPSTEPS)</span><span class='textcolor-3f7f7f'><span class='textit'>//if number of step is bigger than steps to skip </span></span> 
<a id='x129-139046r523'></a><span class='ptmr8t-x-x-50'>523</span><span class='pcrr8t-x-x-80'>     {</span> 
<a id='x129-139048r524'></a><span class='ptmr8t-x-x-50'>524</span><span class='pcrr8t-x-x-80'>      pic_set_pin (pic.mclr, p_MCLR);</span> 
<a id='x129-139050r525'></a><span class='ptmr8t-x-x-50'>525</span><span class='pcrr8t-x-x-80'>      pic_set_pin (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>19</span></span><span class='pcrr8t-x-x-80'>, p_BT1); </span><span class='textcolor-3f7f7f'><span class='textit'>//Set pin 19 (RD0) with button state </span></span> 
<a id='x129-139052r526'></a><span class='ptmr8t-x-x-50'>526</span><span class='pcrr8t-x-x-80'>      pic_set_pin (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>20</span></span><span class='pcrr8t-x-x-80'>, p_BT2); </span><span class='textcolor-3f7f7f'><span class='textit'>//Set pin 20 (RD1) with switch state </span></span>  
<a id='x129-139054r527'></a><span class='ptmr8t-x-x-50'>527</span><span class='pcrr8t-x-x-80'>     }</span>  
<a id='x129-139056r528'></a><span class='ptmr8t-x-x-50'>528</span>  
<a id='x129-139058r529'></a><span class='ptmr8t-x-x-50'>529</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-3f7f7f'><span class='textit'>//verify if a breakpoint is reached if not run one instruction </span></span>  
<a id='x129-139060r530'></a><span class='ptmr8t-x-x-50'>530</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>!</span></span><span class='pcrr8t-x-x-80'>mplabxd_testbp ())pic_step ();</span>  
<a id='x129-139062r531'></a><span class='ptmr8t-x-x-50'>531</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-3f7f7f'><span class='textit'>//Oscilloscope window process</span></span>  
<a id='x129-139064r532'></a><span class='ptmr8t-x-x-50'>532</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (use_oscope)Window4.SetSample ();</span>  
<a id='x129-139066r533'></a><span class='ptmr8t-x-x-50'>533</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-3f7f7f'><span class='textit'>//Spare parts window process</span></span>  
<a id='x129-139068r534'></a><span class='ptmr8t-x-x-50'>534</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (use_spare)Window5.Process ();</span>  
<a id='x129-139070r535'></a><span class='ptmr8t-x-x-50'>535</span>  
<a id='x129-139072r536'></a><span class='ptmr8t-x-x-50'>536</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-3f7f7f'><span class='textit'>//increment mean value counter if pin is high </span></span>  
<a id='x129-139074r537'></a><span class='ptmr8t-x-x-50'>537</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (j </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;</span></span><span class='pcrr8t-x-x-80'> pic.PINCOUNT)</span>  
<a id='x129-139076r538'></a><span class='ptmr8t-x-x-50'>538</span><span class='pcrr8t-x-x-80'>     alm[j] </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+=</span></span><span class='pcrr8t-x-x-80'> pins[j].value;</span>  
<a id='x129-139078r539'></a><span class='ptmr8t-x-x-50'>539</span>  
<a id='x129-139080r540'></a><span class='ptmr8t-x-x-50'>540</span><span class='pcrr8t-x-x-80'>    </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (j </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&gt;=</span></span><span class='pcrr8t-x-x-80'> JUMPSTEPS)</span><span class='textcolor-3f7f7f'><span class='textit'>//if number of step is bigger than steps to skip </span></span>  
<a id='x129-139082r541'></a><span class='ptmr8t-x-x-50'>541</span><span class='pcrr8t-x-x-80'>     {</span>  
<a id='x129-139084r542'></a><span class='ptmr8t-x-x-50'>542</span>  
<a id='x129-139086r543'></a><span class='ptmr8t-x-x-50'>543</span><span class='pcrr8t-x-x-80'>      </span><span class='textcolor-3f7f7f'><span class='textit'>//set analog pin 2 (AN0) with value from scroll  </span></span>  
<a id='x129-139088r544'></a><span class='ptmr8t-x-x-50'>544</span><span class='pcrr8t-x-x-80'>      pic_set_apin (</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>2</span></span><span class='pcrr8t-x-x-80'>, ((</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>5.0</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> (scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>GetPosition ())) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>/</span></span>  
<a id='x129-139090r545'></a><span class='ptmr8t-x-x-50'>545</span><span class='pcrr8t-x-x-80'>                        (scroll1</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-&gt;</span></span><span class='pcrr8t-x-x-80'>GetRange () </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>1</span></span><span class='pcrr8t-x-x-80'>)));</span>  
<a id='x129-139092r546'></a><span class='ptmr8t-x-x-50'>546</span>  
<a id='x129-139094r547'></a><span class='ptmr8t-x-x-50'>547</span><span class='pcrr8t-x-x-80'>      j </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>-1</span></span><span class='pcrr8t-x-x-80'>; </span><span class='textcolor-3f7f7f'><span class='textit'>//reset counter</span></span>  
<a id='x129-139096r548'></a><span class='ptmr8t-x-x-50'>548</span><span class='pcrr8t-x-x-80'>     }</span>  
<a id='x129-139098r549'></a><span class='ptmr8t-x-x-50'>549</span><span class='pcrr8t-x-x-80'>    j</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>++</span></span><span class='pcrr8t-x-x-80'>; </span><span class='textcolor-3f7f7f'><span class='textit'>//counter increment</span></span>  
<a id='x129-139100r550'></a><span class='ptmr8t-x-x-50'>550</span><span class='pcrr8t-x-x-80'>   }</span>  
<a id='x129-139102r551'></a><span class='ptmr8t-x-x-50'>551</span>  
<a id='x129-139104r552'></a><span class='ptmr8t-x-x-50'>552</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//calculate mean value</span></span>  
<a id='x129-139106r553'></a><span class='ptmr8t-x-x-50'>553</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>for</span></span><span class='pcrr8t-x-x-80'> (pi </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>0</span></span><span class='pcrr8t-x-x-80'>; pi </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>&lt;</span></span><span class='pcrr8t-x-x-80'> pic.PINCOUNT; pi</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>++</span></span><span class='pcrr8t-x-x-80'>)</span>  
<a id='x129-139108r554'></a><span class='ptmr8t-x-x-50'>554</span><span class='pcrr8t-x-x-80'>  {</span>  
<a id='x129-139110r555'></a><span class='ptmr8t-x-x-50'>555</span><span class='pcrr8t-x-x-80'>   pic.pins[pi].oavalue </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>=</span></span><span class='pcrr8t-x-x-80'> (</span><span class='textcolor-af003f'><span class='textbf'>int</span></span><span class='pcrr8t-x-x-80'>) (((</span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>225.0</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>*</span></span><span class='pcrr8t-x-x-80'> alm[pi]) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>/</span></span><span class='pcrr8t-x-x-80'> NSTEPJ) </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>+</span></span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-656565'><span class='pcrr8t-x-x-80'>30</span></span><span class='pcrr8t-x-x-80'>);</span>  
<a id='x129-139112r556'></a><span class='ptmr8t-x-x-50'>556</span><span class='pcrr8t-x-x-80'>  }</span>  
<a id='x129-139114r557'></a><span class='ptmr8t-x-x-50'>557</span>  
<a id='x129-139116r558'></a><span class='ptmr8t-x-x-50'>558</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-3f7f7f'><span class='textit'>//Spare parts window pre post process</span></span>  
<a id='x129-139118r559'></a><span class='ptmr8t-x-x-50'>559</span><span class='pcrr8t-x-x-80'> </span><span class='textcolor-007f00'><span class='textbf'>if</span></span><span class='pcrr8t-x-x-80'> (use_spare)Window5.PostProcess ();</span>  
<a id='x129-139120r560'></a><span class='ptmr8t-x-x-50'>560</span>  
<a id='x129-139122r561'></a><span class='ptmr8t-x-x-50'>561</span><span class='pcrr8t-x-x-80'>}</span>  
<a id='x129-139124r562'></a><span class='ptmr8t-x-x-50'>562</span>  
<a id='x129-139126r563'></a><span class='ptmr8t-x-x-50'>563</span><span class='textcolor-3f7f7f'><span class='textit'>//Register the board in PICSimLab</span></span>  
<a id='x129-139128r564'></a><span class='ptmr8t-x-x-50'>564</span><span class='pcrr8t-x-x-80'>board_init(</span><span class='textcolor-ba2121'><span class='pcrr8t-x-x-80'>"X"</span></span><span class='pcrr8t-x-x-80'>, cboard_x);</span> </pre>
                                                                  

                                                                  
   <nav class='crosslinks-bottom'>[<a href='Picturemaps.html'>prev</a>] [<a href='CreatingaNewBoard.html#Boardcode.html'>up</a>] [<a href='IntegrationwithPICsimLab.html'>next</a>] </nav>  </main><div id='google_translate_element' style='position:absolute;right:0px;top:0px;width:200px;'> </div> <p><script> function googleTranslateElementInit() { new google.translate.TranslateElement( {pageLanguage: 'en',autoDisplay: false}, 'google_translate_element' ); } </script></p> <p><script src='https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit'></script></p>  
 
</body> 
</html>