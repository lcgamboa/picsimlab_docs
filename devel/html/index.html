<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PICSimLab - Programmable IC Simulator Laboratory: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="picsimlab.png"/></td>
  <td id="projectalign">
   <div id="projectname">PICSimLab - Programmable IC Simulator Laboratory<span id="projectnumber">&#160;0.9.2</span>
   </div>
   <div id="projectbrief">PICSimLab - API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>This is the documentation to explain the use of picsimlab internal classes.</p>
<p>The main objective of this domentation is to enable the expansion of the simulator with the creation of new boards (<a class="el" href="classboard.html">board</a>) and parts (<a class="el" href="classpart.html">part</a>).</p>
<h1><a class="anchor" id="partex"></a>
Part example</h1>
<h2><a class="anchor" id="pinc"></a>
output_step.h</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICSimLab - Programmable IC Simulator Laboratory</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2010-2025  Luis Claudio Gambôa Lopes &lt;lcgamboa@yahoo.com&gt;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef PART_STEP_H</span></div>
<div class="line"><span class="preprocessor">#define PART_STEP_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;../lib/part.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define PART_STEP_Name &quot;Step Motor&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="classcpart__step.html">cpart_step</a> : <span class="keyword">public</span> <a class="code hl_class" href="classpart.html">part</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    std::string <a class="code hl_function" href="classcpart__step.html#a18e01df76485247a833238fa5143adca">GetAboutInfo</a>(<span class="keywordtype">void</span>)<span class="keyword"> override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;L.C. Gamboa \n &lt;lcgamboa@yahoo.com&gt;&quot;</span>; };</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classcpart__step.html">cpart_step</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> x, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> y, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <span class="keywordtype">char</span>* type, <a class="code hl_class" href="classboard.html">board</a>* pboard_, <span class="keyword">const</span> <span class="keywordtype">int</span> id_);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="classcpart__step.html#a91a0941165fa7531f44c7b74321533f3">~cpart_step</a>(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a406716b623a2635c48eefe7630a2d8c9">DrawOutput</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a19c45dc044f0d8484d775a5da8fa95ec">PreProcess</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a6892916acaf8198565079b952c61d846">Process</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#ae9c71fcf6de5804a5483d8e42c3edf57">PostProcess</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a64f356815a82b28a11590c9161117364">ConfigurePropertiesWindow</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a3fd447bc89d374c88779444cc23d4805">ReadPropertiesWindow</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    std::string <a class="code hl_function" href="classcpart__step.html#a25d18418cee7103962b3f8f2d65a1ae9">WritePreferences</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#ad6a3e6d24c2529395058e33cfab9c93f">ReadPreferences</a>(std::string value) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcpart__step.html#a55297faec243e7aab6a1cb9a21031bc7">GetInputId</a>(<span class="keywordtype">char</span>* name) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcpart__step.html#ab42f4bd7f3f11d659cdbe726323edc9a">GetOutputId</a>(<span class="keywordtype">char</span>* name) <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a9023bfe76e703c10930a713591165743">RegisterRemoteControl</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[4];   </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[1];  </div>
<div class="line">    <span class="keywordtype">float</span> steps;</div>
<div class="line">    <span class="keywordtype">float</span> angle;</div>
<div class="line">    <span class="keywordtype">int</span> input[2];</div>
<div class="line">    <span class="keywordtype">int</span> turns;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* PART_STEP */</span><span class="preprocessor"></span></div>
<div class="ttc" id="aclassboard_html"><div class="ttname"><a href="classboard.html">board</a></div><div class="ttdoc">Board class.</div><div class="ttdef"><b>Definition</b> board.h:114</div></div>
<div class="ttc" id="aclasscpart__step_html"><div class="ttname"><a href="classcpart__step.html">cpart_step</a></div><div class="ttdoc">step motor part class</div><div class="ttdef"><b>Definition</b> output_step.h:38</div></div>
<div class="ttc" id="aclasscpart__step_html_a18e01df76485247a833238fa5143adca"><div class="ttname"><a href="classcpart__step.html#a18e01df76485247a833238fa5143adca">cpart_step::GetAboutInfo</a></div><div class="ttdeci">std::string GetAboutInfo(void) override</div><div class="ttdoc">Return the about information of part.</div><div class="ttdef"><b>Definition</b> output_step.h:40</div></div>
<div class="ttc" id="aclasscpart__step_html_a19c45dc044f0d8484d775a5da8fa95ec"><div class="ttname"><a href="classcpart__step.html#a19c45dc044f0d8484d775a5da8fa95ec">cpart_step::PreProcess</a></div><div class="ttdeci">void PreProcess(void) override</div><div class="ttdoc">Called every start of CPU process.</div><div class="ttdef"><b>Definition</b> output_step.cc:151</div></div>
<div class="ttc" id="aclasscpart__step_html_a25d18418cee7103962b3f8f2d65a1ae9"><div class="ttname"><a href="classcpart__step.html#a25d18418cee7103962b3f8f2d65a1ae9">cpart_step::WritePreferences</a></div><div class="ttdeci">std::string WritePreferences(void) override</div><div class="ttdoc">Called to save part preferences in configuration file.</div><div class="ttdef"><b>Definition</b> output_step.cc:391</div></div>
<div class="ttc" id="aclasscpart__step_html_a3da50407c2419060293a8a7d6da931fa"><div class="ttname"><a href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">cpart_step::input_pins</a></div><div class="ttdeci">unsigned char input_pins[4]</div><div class="ttdoc">pulse input pind</div><div class="ttdef"><b>Definition</b> output_step.h:67</div></div>
<div class="ttc" id="aclasscpart__step_html_a3fd447bc89d374c88779444cc23d4805"><div class="ttname"><a href="classcpart__step.html#a3fd447bc89d374c88779444cc23d4805">cpart_step::ReadPropertiesWindow</a></div><div class="ttdeci">void ReadPropertiesWindow(void) override</div><div class="ttdoc">Called when properties window close.</div><div class="ttdef"><b>Definition</b> output_step.cc:417</div></div>
<div class="ttc" id="aclasscpart__step_html_a406716b623a2635c48eefe7630a2d8c9"><div class="ttname"><a href="classcpart__step.html#a406716b623a2635c48eefe7630a2d8c9">cpart_step::DrawOutput</a></div><div class="ttdeci">void DrawOutput(const unsigned int index) override</div><div class="ttdoc">Called to draw every output.</div><div class="ttdef"><b>Definition</b> output_step.cc:71</div></div>
<div class="ttc" id="aclasscpart__step_html_a55297faec243e7aab6a1cb9a21031bc7"><div class="ttname"><a href="classcpart__step.html#a55297faec243e7aab6a1cb9a21031bc7">cpart_step::GetInputId</a></div><div class="ttdeci">unsigned short GetInputId(char *name) override</div><div class="ttdoc">return the input ids numbers of names used in input map</div><div class="ttdef"><b>Definition</b> output_step.cc:358</div></div>
<div class="ttc" id="aclasscpart__step_html_a64f356815a82b28a11590c9161117364"><div class="ttname"><a href="classcpart__step.html#a64f356815a82b28a11590c9161117364">cpart_step::ConfigurePropertiesWindow</a></div><div class="ttdeci">void ConfigurePropertiesWindow(void) override</div><div class="ttdoc">Called to configure the properties window.</div><div class="ttdef"><b>Definition</b> output_step.cc:409</div></div>
<div class="ttc" id="aclasscpart__step_html_a6892916acaf8198565079b952c61d846"><div class="ttname"><a href="classcpart__step.html#a6892916acaf8198565079b952c61d846">cpart_step::Process</a></div><div class="ttdeci">void Process(void) override</div><div class="ttdoc">Called every CPU step.</div><div class="ttdef"><b>Definition</b> output_step.cc:174</div></div>
<div class="ttc" id="aclasscpart__step_html_a7ee6c2cbf8b8fcf3757b8a4d999d5903"><div class="ttname"><a href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">cpart_step::output_pins</a></div><div class="ttdeci">unsigned char output_pins[1]</div><div class="ttdoc">pulse output pin</div><div class="ttdef"><b>Definition</b> output_step.h:68</div></div>
<div class="ttc" id="aclasscpart__step_html_a9023bfe76e703c10930a713591165743"><div class="ttname"><a href="classcpart__step.html#a9023bfe76e703c10930a713591165743">cpart_step::RegisterRemoteControl</a></div><div class="ttdeci">void RegisterRemoteControl(void) override</div><div class="ttdoc">Register remote control variables.</div><div class="ttdef"><b>Definition</b> output_step.cc:405</div></div>
<div class="ttc" id="aclasscpart__step_html_a91a0941165fa7531f44c7b74321533f3"><div class="ttname"><a href="classcpart__step.html#a91a0941165fa7531f44c7b74321533f3">cpart_step::~cpart_step</a></div><div class="ttdeci">~cpart_step(void)</div><div class="ttdoc">destructor called once on part destruction</div><div class="ttdef"><b>Definition</b> output_step.cc:65</div></div>
<div class="ttc" id="aclasscpart__step_html_ab42f4bd7f3f11d659cdbe726323edc9a"><div class="ttname"><a href="classcpart__step.html#ab42f4bd7f3f11d659cdbe726323edc9a">cpart_step::GetOutputId</a></div><div class="ttdeci">unsigned short GetOutputId(char *name) override</div><div class="ttdoc">return the output ids numbers of names used in output map</div><div class="ttdef"><b>Definition</b> output_step.cc:363</div></div>
<div class="ttc" id="aclasscpart__step_html_ad6a3e6d24c2529395058e33cfab9c93f"><div class="ttname"><a href="classcpart__step.html#ad6a3e6d24c2529395058e33cfab9c93f">cpart_step::ReadPreferences</a></div><div class="ttdeci">void ReadPreferences(std::string value) override</div><div class="ttdoc">Called whe configuration file load preferences.</div><div class="ttdef"><b>Definition</b> output_step.cc:400</div></div>
<div class="ttc" id="aclasscpart__step_html_ae9c71fcf6de5804a5483d8e42c3edf57"><div class="ttname"><a href="classcpart__step.html#ae9c71fcf6de5804a5483d8e42c3edf57">cpart_step::PostProcess</a></div><div class="ttdeci">void PostProcess(void) override</div><div class="ttdoc">Called every end of CPU process.</div><div class="ttdef"><b>Definition</b> output_step.cc:341</div></div>
<div class="ttc" id="aclasspart_html"><div class="ttname"><a href="classpart.html">part</a></div><div class="ttdoc">PART class.</div><div class="ttdef"><b>Definition</b> part.h:49</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="pcode"></a>
output_step.cc</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICSimLab - Programmable IC Simulator Laboratory</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2010-2025  Luis Claudio Gambôa Lopes &lt;lcgamboa@yahoo.com&gt;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define _USE_MATH_DEFINES</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;output_step.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../lib/oscilloscope.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../lib/picsimlab.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../lib/spareparts.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;math.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* outputs */</span></div>
<div class="line"><span class="keyword">enum</span> { O_P1, O_P2, O_P3, O_P4, O_P5, O_L1, O_L2, O_L3, O_L4, O_ROT, O_STEPS };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="struct_p_c_w_prop.html">PCWProp</a> pcwprop[6] = {{PCW_COMBO, <span class="stringliteral">&quot;Pin 1&quot;</span>}, {PCW_COMBO, <span class="stringliteral">&quot;Pin 2&quot;</span>}, {PCW_COMBO, <span class="stringliteral">&quot;Pin 3&quot;</span>},</div>
<div class="line">                             {PCW_COMBO, <span class="stringliteral">&quot;Pin 4&quot;</span>}, {PCW_COMBO, <span class="stringliteral">&quot;Home&quot;</span>},  {PCW_END, <span class="stringliteral">&quot;&quot;</span>}};</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="classcpart__step.html#a075240a7c5962251a0f970ba76f69319">cpart_step::cpart_step</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> x, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> y, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <span class="keywordtype">char</span>* type, <a class="code hl_class" href="classboard.html">board</a>* pboard_,</div>
<div class="line">                       <span class="keyword">const</span> <span class="keywordtype">int</span> id_)</div>
<div class="line">    : <a class="code hl_class" href="classpart.html">part</a>(x, y, name, type, pboard_, id_) {</div>
<div class="line">    angle = 0;</div>
<div class="line"> </div>
<div class="line">    steps = 0;</div>
<div class="line"> </div>
<div class="line">    input_pins[0] = 0;</div>
<div class="line">    input_pins[1] = 0;</div>
<div class="line">    input_pins[2] = 0;</div>
<div class="line">    input_pins[3] = 0;</div>
<div class="line"> </div>
<div class="line">    output_pins[0] = 0;</div>
<div class="line"> </div>
<div class="line">    input[0] = 0;</div>
<div class="line">    input[1] = 0;</div>
<div class="line"> </div>
<div class="line">    turns = 0;</div>
<div class="line"> </div>
<div class="line">    SetPCWProperties(pcwprop);</div>
<div class="line"> </div>
<div class="line">    PinCount = 4;</div>
<div class="line">    Pins = input_pins;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="classcpart__step.html#a91a0941165fa7531f44c7b74321533f3">cpart_step::~cpart_step</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    SpareParts.SetPartOnDraw(<span class="keywordtype">id</span>);</div>
<div class="line">    SpareParts.CanvasCmd({.cmd = CC_FREEBITMAP, .FreeBitmap{<a class="code hl_variable" href="classpart.html#a8be6411af24128a67d40a780ca13949f">BitmapId</a>}});</div>
<div class="line">    SpareParts.CanvasCmd({.cmd = CC_DESTROY});</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a406716b623a2635c48eefe7630a2d8c9">cpart_step::DrawOutput</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) {</div>
<div class="line">    <span class="keywordtype">float</span> x2, y2;</div>
<div class="line">    <span class="keyword">const</span> picpin* ppins = SpareParts.GetPinsValues();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span>) {</div>
<div class="line">        <span class="keywordflow">case</span> O_P1:</div>
<div class="line">        <span class="keywordflow">case</span> O_P2:</div>
<div class="line">        <span class="keywordflow">case</span> O_P3:</div>
<div class="line">        <span class="keywordflow">case</span> O_P4:</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{49, 61, 99}});</div>
<div class="line">            SpareParts.CanvasCmd(</div>
<div class="line">                {.cmd = CC_RECTANGLE,</div>
<div class="line">                 .Rectangle{1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{255, 255, 255}});</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span> - O_P1] == 0)</div>
<div class="line">                SpareParts.CanvasCmd({.cmd = CC_ROTATEDTEXT, .RotatedText{<span class="stringliteral">&quot;NC&quot;</span>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, 0}});</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                SpareParts.CanvasCmd({.cmd = CC_ROTATEDTEXT,</div>
<div class="line">                                      .RotatedText{SpareParts.<a class="code hl_function" href="class_c_spare_parts.html#ad7e1b221b4e7e910aa67374036a6353c">GetPinName</a>(<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span> - O_P1]).c_str(),</div>
<div class="line">                                                   <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].x1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].y1, 0}});</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> O_P5:</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{49, 61, 99}});</div>
<div class="line">            SpareParts.CanvasCmd(</div>
<div class="line">                {.cmd = CC_RECTANGLE,</div>
<div class="line">                 .Rectangle{1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{255, 255, 255}});</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span> - O_P5] == 0)</div>
<div class="line">                SpareParts.CanvasCmd({.cmd = CC_ROTATEDTEXT, .RotatedText{<span class="stringliteral">&quot;NC&quot;</span>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, 0}});</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                SpareParts.CanvasCmd({.cmd = CC_ROTATEDTEXT,</div>
<div class="line">                                      .RotatedText{SpareParts.<a class="code hl_function" href="class_c_spare_parts.html#ad7e1b221b4e7e910aa67374036a6353c">GetPinName</a>(<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span> - O_P5]).c_str(),</div>
<div class="line">                                                   <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].x1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].y1, 0}});</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> O_STEPS: {</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{49, 61, 99}});</div>
<div class="line">            SpareParts.CanvasCmd(</div>
<div class="line">                {.cmd = CC_RECTANGLE,</div>
<div class="line">                 .Rectangle{1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{255, 255, 255}});</div>
<div class="line">            <span class="keywordtype">char</span> text[100];</div>
<div class="line">            snprintf(text, 100, <span class="stringliteral">&quot;S=%5.1f&quot;</span>, steps);</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_ROTATEDTEXT, .RotatedText{text, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, 0}});</div>
<div class="line">            snprintf(text, 100, <span class="stringliteral">&quot;T=%3i&quot;</span>, turns);</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_ROTATEDTEXT, .RotatedText{text, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a> + 12, 0}});</div>
<div class="line">        } <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> O_ROT:</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{77, 77, 77}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a1c8fbe56e1138c7c34c42d97923c1c8d">r</a> + 10}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{0, 0, 0}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{250, 250, 250}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a1c8fbe56e1138c7c34c42d97923c1c8d">r</a>}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{55, 55, 55}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a1c8fbe56e1138c7c34c42d97923c1c8d">r</a> / 3}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETLINEWIDTH, .SetLineWidth{8}});</div>
<div class="line">            x2 = <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a> + (<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a1c8fbe56e1138c7c34c42d97923c1c8d">r</a> - 2) * sin(angle);</div>
<div class="line">            y2 = <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a> + (<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a1c8fbe56e1138c7c34c42d97923c1c8d">r</a> - 2) * cos(angle);</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_LINE, .Line{<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, x2, y2}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETLINEWIDTH, .SetLineWidth{6}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{77, 77, 77}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_LINE, .Line{<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, x2, y2}});</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETLINEWIDTH, .SetLineWidth{1}});</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> O_L1:</div>
<div class="line">        <span class="keywordflow">case</span> O_L2:</div>
<div class="line">        <span class="keywordflow">case</span> O_L3:</div>
<div class="line">        <span class="keywordflow">case</span> O_L4:</div>
<div class="line">            SpareParts.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{0, 0, 0}});</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span> - O_L1] &gt; 0) {</div>
<div class="line">                SpareParts.CanvasCmd(</div>
<div class="line">                    {.cmd = CC_SETBGCOLOR,</div>
<div class="line">                     .SetBgColor{(<span class="keywordtype">unsigned</span> int)ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i].<span class="keywordtype">id</span> - O_L1] - 1].oavalue, 0, 0}});</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                SpareParts.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{55, 0, 0}});</div>
<div class="line">            }</div>
<div class="line">            DrawLED(SpareParts.CanvasCmd, &amp;<a class="code hl_variable" href="classpart.html#a59acce60a142219873a9cb5c61a5e710">output</a>[i]);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a19c45dc044f0d8484d775a5da8fa95ec">cpart_step::PreProcess</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0] &gt; 0) {</div>
<div class="line">        <span class="keywordflow">if</span> ((steps == 0) &amp;&amp; (turns == 0)) {</div>
<div class="line">            SpareParts.SetPin(<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0], 0);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            SpareParts.SetPin(<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0], 1);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#define STEP (1.8 * M_PI / 180.0)</span></div>
<div class="line"><span class="preprocessor">#define HSTEP (STEP / 2.0)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define NSTEP 200  </span><span class="comment">// 360/1.8</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define S1 1</span></div>
<div class="line"><span class="preprocessor">#define S12 3</span></div>
<div class="line"><span class="preprocessor">#define S2 2</span></div>
<div class="line"><span class="preprocessor">#define S23 6</span></div>
<div class="line"><span class="preprocessor">#define S3 4</span></div>
<div class="line"><span class="preprocessor">#define S34 12</span></div>
<div class="line"><span class="preprocessor">#define S4 8</span></div>
<div class="line"><span class="preprocessor">#define S41 9</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a6892916acaf8198565079b952c61d846">cpart_step::Process</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">const</span> picpin* ppins = SpareParts.GetPinsValues();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[0] &gt; 0) &amp;&amp; (<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[1] &gt; 0) &amp;&amp; (<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[2] &gt; 0) &amp;&amp; (<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[3] &gt; 0)) {</div>
<div class="line">        input[1] = input[0];</div>
<div class="line">        input[0] = (ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[0] - 1].value &lt;&lt; 3) | (ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[1] - 1].value &lt;&lt; 2) |</div>
<div class="line">                   (ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[2] - 1].value &lt;&lt; 1) | ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[3] - 1].value;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (input[0] ^ input[1]) {</div>
<div class="line">            <span class="keywordflow">switch</span> (input[0]) {</div>
<div class="line">                <span class="keywordflow">case</span> S1:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S4:  <span class="comment">// foward full step</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S2:  <span class="comment">// backward full step</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S41:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S12:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S2:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S1:  <span class="comment">// foward full step</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S3:  <span class="comment">// backward full step</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S12:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S23:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S3:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S2:  <span class="comment">// foward full step</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S4:  <span class="comment">// backward full step</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S23:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S34:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S4:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S3:  <span class="comment">// foward full step</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S1:  <span class="comment">// backward full step</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S34:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S41:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S12:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S41:  <span class="comment">// foward full step double phase</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S23:  <span class="comment">// backward full step double phase</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S1:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S2:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S23:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S12:  <span class="comment">// foward full step double phase</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S34:  <span class="comment">// backward full step double phase</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S2:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S3:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S34:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S23:  <span class="comment">// foward full step double phase</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S41:  <span class="comment">// backward full step double phase</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S3:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S4:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> S41:</div>
<div class="line">                    <span class="keywordflow">switch</span> (input[1]) {</div>
<div class="line">                        <span class="keywordflow">case</span> S34:  <span class="comment">// foward full step double phase</span></div>
<div class="line">                            steps += 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S12:  <span class="comment">// backward full step double phase</span></div>
<div class="line">                            steps -= 1;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S4:  <span class="comment">// foward half step</span></div>
<div class="line">                            steps += 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> S1:  <span class="comment">// backward half step</span></div>
<div class="line">                            steps -= 0.5;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:  <span class="comment">// invalid</span></div>
<div class="line">                    input[0] = input[1];</div>
<div class="line">                    <span class="keywordflow">return</span>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (steps &gt;= NSTEP) {</div>
<div class="line">                steps -= NSTEP;</div>
<div class="line">                turns++;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (steps &lt; 0) {</div>
<div class="line">                steps += NSTEP;</div>
<div class="line">                turns--;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            angle = STEP * steps;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0] &gt; 0) {</div>
<div class="line">                <span class="keywordflow">if</span> ((steps == 0) &amp;&amp; (turns == 0)) {</div>
<div class="line">                    SpareParts.SetPin(<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0], 0);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    SpareParts.SetPin(<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0], 1);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#ae9c71fcf6de5804a5483d8e42c3edf57">cpart_step::PostProcess</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">const</span> picpin* ppins = SpareParts.GetPinsValues();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[i] &amp;&amp; (<a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_L1 + i]-&gt;value != ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[i] - 1].oavalue)) {</div>
<div class="line">            <a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_L1 + i]-&gt;<a class="code hl_variable" href="structoutput__t.html#a23bc69196fed4d0e4924453a11e182bd">value</a> = ppins[<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[i] - 1].oavalue;</div>
<div class="line">            <a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_L1 + i]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_ROT]-&gt;value_f != angle) {</div>
<div class="line">        <a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_ROT]-&gt;<a class="code hl_variable" href="structoutput__t.html#a9b57cc8e6b609a849171298f1fcf1f9f">value_f</a> = angle;</div>
<div class="line">        <a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_ROT]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">        <a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_STEPS]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcpart__step.html#a55297faec243e7aab6a1cb9a21031bc7">cpart_step::GetInputId</a>(<span class="keywordtype">char</span>* name) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Error input &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line">    <span class="keywordflow">return</span> INVALID_ID;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcpart__step.html#ab42f4bd7f3f11d659cdbe726323edc9a">cpart_step::GetOutputId</a>(<span class="keywordtype">char</span>* name) {</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PN_1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_P1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PN_2&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_P2;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PN_3&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_P3;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PN_4&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_P4;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PN_5&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_P5;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_L1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_2&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_L2;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_3&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_L3;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_4&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_L4;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;DG_ROT&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_ROT;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;DI_STEPS&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_STEPS;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Error output &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line">    <span class="keywordflow">return</span> INVALID_ID;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">std::string <a class="code hl_function" href="classcpart__step.html#a25d18418cee7103962b3f8f2d65a1ae9">cpart_step::WritePreferences</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keywordtype">char</span> prefs[256];</div>
<div class="line"> </div>
<div class="line">    sprintf(prefs, <span class="stringliteral">&quot;%hhu,%hhu,%hhu,%hhu,%hhu&quot;</span>, <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[0], <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[1], <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[2], <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[3],</div>
<div class="line">            <a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> prefs;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#ad6a3e6d24c2529395058e33cfab9c93f">cpart_step::ReadPreferences</a>(std::string value) {</div>
<div class="line">    sscanf(value.c_str(), <span class="stringliteral">&quot;%hhu,%hhu,%hhu,%hhu,%hhu&quot;</span>, &amp;<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[0], &amp;<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[1], &amp;<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[2], &amp;<a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[3],</div>
<div class="line">           &amp;<a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a9023bfe76e703c10930a713591165743">cpart_step::RegisterRemoteControl</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_variable" href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">output_ids</a>[O_ROT]-&gt;<a class="code hl_variable" href="structoutput__t.html#a394c193a9f75a821997918c3fe8525a5">status</a> = (<span class="keywordtype">void</span>*)&amp;angle;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a64f356815a82b28a11590c9161117364">cpart_step::ConfigurePropertiesWindow</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    SetPCWComboWithPinNames(<span class="stringliteral">&quot;combo1&quot;</span>, <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[0]);</div>
<div class="line">    SetPCWComboWithPinNames(<span class="stringliteral">&quot;combo2&quot;</span>, <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[1]);</div>
<div class="line">    SetPCWComboWithPinNames(<span class="stringliteral">&quot;combo3&quot;</span>, <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[2]);</div>
<div class="line">    SetPCWComboWithPinNames(<span class="stringliteral">&quot;combo4&quot;</span>, <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[3]);</div>
<div class="line">    SetPCWComboWithPinNames(<span class="stringliteral">&quot;combo5&quot;</span>, <a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcpart__step.html#a3fd447bc89d374c88779444cc23d4805">cpart_step::ReadPropertiesWindow</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[0] = GetPWCComboSelectedPin(<span class="stringliteral">&quot;combo1&quot;</span>);</div>
<div class="line">    <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[1] = GetPWCComboSelectedPin(<span class="stringliteral">&quot;combo2&quot;</span>);</div>
<div class="line">    <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[2] = GetPWCComboSelectedPin(<span class="stringliteral">&quot;combo3&quot;</span>);</div>
<div class="line">    <a class="code hl_variable" href="classcpart__step.html#a3da50407c2419060293a8a7d6da931fa">input_pins</a>[3] = GetPWCComboSelectedPin(<span class="stringliteral">&quot;combo4&quot;</span>);</div>
<div class="line">    <a class="code hl_variable" href="classcpart__step.html#a7ee6c2cbf8b8fcf3757b8a4d999d5903">output_pins</a>[0] = GetPWCComboSelectedPin(<span class="stringliteral">&quot;combo5&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">part_init(PART_STEP_Name, <a class="code hl_class" href="classcpart__step.html">cpart_step</a>, <span class="stringliteral">&quot;Output&quot;</span>);</div>
<div class="ttc" id="aclass_c_spare_parts_html_ad7e1b221b4e7e910aa67374036a6353c"><div class="ttname"><a href="class_c_spare_parts.html#ad7e1b221b4e7e910aa67374036a6353c">CSpareParts::GetPinName</a></div><div class="ttdeci">std::string GetPinName(unsigned char pin)</div><div class="ttdoc">Return the name of one pin.</div><div class="ttdef"><b>Definition</b> spareparts.cc:146</div></div>
<div class="ttc" id="aclasscpart__step_html_a075240a7c5962251a0f970ba76f69319"><div class="ttname"><a href="classcpart__step.html#a075240a7c5962251a0f970ba76f69319">cpart_step::cpart_step</a></div><div class="ttdeci">cpart_step(const unsigned x, const unsigned y, const char *name, const char *type, board *pboard_, const int id_)</div><div class="ttdoc">constructor called once on part creation</div><div class="ttdef"><b>Definition</b> output_step.cc:40</div></div>
<div class="ttc" id="aclasspart_html_a59acce60a142219873a9cb5c61a5e710"><div class="ttname"><a href="classpart.html#a59acce60a142219873a9cb5c61a5e710">part::output</a></div><div class="ttdeci">output_t output[MAX_IDS]</div><div class="ttdoc">output map elements</div><div class="ttdef"><b>Definition</b> part.h:378</div></div>
<div class="ttc" id="aclasspart_html_a6ed77d574615ad6b11ba0f6d8a4b044c"><div class="ttname"><a href="classpart.html#a6ed77d574615ad6b11ba0f6d8a4b044c">part::output_ids</a></div><div class="ttdeci">output_t * output_ids[MAX_IDS]</div><div class="ttdoc">output map elements by id order</div><div class="ttdef"><b>Definition</b> part.h:379</div></div>
<div class="ttc" id="aclasspart_html_a8be6411af24128a67d40a780ca13949f"><div class="ttname"><a href="classpart.html#a8be6411af24128a67d40a780ca13949f">part::BitmapId</a></div><div class="ttdeci">int BitmapId</div><div class="ttdoc">Internal Bitmap.</div><div class="ttdef"><b>Definition</b> part.h:386</div></div>
<div class="ttc" id="astruct_p_c_w_prop_html"><div class="ttname"><a href="struct_p_c_w_prop.html">PCWProp</a></div><div class="ttdef"><b>Definition</b> part.h:39</div></div>
<div class="ttc" id="astructoutput__t_html_a1c8fbe56e1138c7c34c42d97923c1c8d"><div class="ttname"><a href="structoutput__t.html#a1c8fbe56e1138c7c34c42d97923c1c8d">output_t::r</a></div><div class="ttdeci">float r</div><div class="ttdoc">radius</div><div class="ttdef"><b>Definition</b> board.h:75</div></div>
<div class="ttc" id="astructoutput__t_html_a20905237f1b3c1c9a506b05eaf026a4f"><div class="ttname"><a href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">output_t::x2</a></div><div class="ttdeci">float x2</div><div class="ttdoc">x2 position</div><div class="ttdef"><b>Definition</b> board.h:70</div></div>
<div class="ttc" id="astructoutput__t_html_a23bc69196fed4d0e4924453a11e182bd"><div class="ttname"><a href="structoutput__t.html#a23bc69196fed4d0e4924453a11e182bd">output_t::value</a></div><div class="ttdeci">unsigned char value</div><div class="ttdoc">updated value</div><div class="ttdef"><b>Definition</b> board.h:81</div></div>
<div class="ttc" id="astructoutput__t_html_a2e400ca1489c4e43e4dba849f51be806"><div class="ttname"><a href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">output_t::y2</a></div><div class="ttdeci">float y2</div><div class="ttdoc">y2 position</div><div class="ttdef"><b>Definition</b> board.h:72</div></div>
<div class="ttc" id="astructoutput__t_html_a359ec6bdcab8295763a041e29bd29404"><div class="ttname"><a href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">output_t::y1</a></div><div class="ttdeci">float y1</div><div class="ttdoc">y1 position</div><div class="ttdef"><b>Definition</b> board.h:71</div></div>
<div class="ttc" id="astructoutput__t_html_a394c193a9f75a821997918c3fe8525a5"><div class="ttname"><a href="structoutput__t.html#a394c193a9f75a821997918c3fe8525a5">output_t::status</a></div><div class="ttdeci">void * status</div><div class="ttdoc">rcontrol status</div><div class="ttdef"><b>Definition</b> board.h:78</div></div>
<div class="ttc" id="astructoutput__t_html_a86e451633b99e28a1d5632c24d00d08c"><div class="ttname"><a href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">output_t::x1</a></div><div class="ttdeci">float x1</div><div class="ttdoc">x1 position</div><div class="ttdef"><b>Definition</b> board.h:69</div></div>
<div class="ttc" id="astructoutput__t_html_a9b57cc8e6b609a849171298f1fcf1f9f"><div class="ttname"><a href="structoutput__t.html#a9b57cc8e6b609a849171298f1fcf1f9f">output_t::value_f</a></div><div class="ttdeci">float value_f</div><div class="ttdoc">updated value float</div><div class="ttdef"><b>Definition</b> board.h:83</div></div>
<div class="ttc" id="astructoutput__t_html_aa91b1205a6823abba2269f91bb87863d"><div class="ttname"><a href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">output_t::update</a></div><div class="ttdeci">unsigned char update</div><div class="ttdoc">need draw update</div><div class="ttdef"><b>Definition</b> board.h:79</div></div>
</div><!-- fragment --><h1><a class="anchor" id="boardex"></a>
Board example</h1>
<h2><a class="anchor" id="binc"></a>
board_x.h</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICSimLab - Programmable IC Simulator Laboratory</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2015-2025  Luis Claudio Gambôa Lopes &lt;lcgamboa@yahoo.com&gt;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef BOARD_x_H</span></div>
<div class="line"><span class="preprocessor">#define BOARD_x_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;../devices/swbounce.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../sim_backend/bsim_picsim.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define BOARD_x_Name &quot;X&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// new board class must be derived from board class defined in board.h</span></div>
<div class="line"><span class="keyword">class </span><a class="code hl_class" href="classcboard__x.html">cboard_x</a> : <span class="keyword">public</span> <a class="code hl_class" href="classbsim__picsim.html">bsim_picsim</a> {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p_BT1;  <span class="comment">// first board push button in RD0</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p_BT2;  <span class="comment">// second board switch in RD1</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// value of potentiometer</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pot1;</div>
<div class="line">    <span class="comment">// flag to control if potentiometer is active</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> active;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Register controls for remote interface called once on board creation</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a9c1664ce551c79209b4e6dc9d0ed8730">RegisterRemoteControl</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="struct_s_w_bounce__t.html">SWBounce_t</a> bounce;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">// Constructor called once on board creation</span></div>
<div class="line">    <a class="code hl_class" href="classcboard__x.html">cboard_x</a>(<span class="keywordtype">void</span>);</div>
<div class="line">    <span class="comment">// Destructor called once on board destruction</span></div>
<div class="line">    <a class="code hl_class" href="classcboard__x.html">~cboard_x</a>(<span class="keywordtype">void</span>);</div>
<div class="line">    <span class="comment">// Return the board name</span></div>
<div class="line">    std::string <a class="code hl_function" href="classcboard__x.html#a53deb20060268afc55ebd0735749c808">GetName</a>(<span class="keywordtype">void</span>)<span class="keyword"> override </span>{ <span class="keywordflow">return</span> BOARD_x_Name; };</div>
<div class="line">    <span class="comment">// Return the about info of board</span></div>
<div class="line">    std::string <a class="code hl_function" href="classcboard__x.html#ade950561bb6b28e30fe9396a5033afe8">GetAboutInfo</a>(<span class="keywordtype">void</span>)<span class="keyword"> override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;L.C. Gamboa \n &lt;lcgamboa@yahoo.com&gt;&quot;</span>; };</div>
<div class="line">    <span class="comment">// Called ever 100ms to draw board</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a57f002f7c4329808257b80387bdcc4d1">Draw</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a6337aae979579d9d180026dfcd2c55c0">Run_CPU</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Return a list of board supported microcontrollers</span></div>
<div class="line">    std::string <a class="code hl_function" href="classcboard__x.html#a1b3cd82ccb8f75820ac39966bc814bfe">GetSupportedDevices</a>(<span class="keywordtype">void</span>)<span class="keyword"> override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;PIC16F877A,PIC18F4550,PIC18F4620,&quot;</span>; };</div>
<div class="line">    <span class="comment">// Reset board status</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a6f87b4f00b9297a5893a805820c4a436">Reset</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Event on the board</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a35a4d84f51f61a8588dd2210add76ec6">EvMouseButtonPress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Event on the board</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a8c99a17217563667dc7e45275d278f97">EvMouseButtonRelease</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Event on the board</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a8a9c6d055e0956832fe171beb4d22b4f">EvMouseMove</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Event on the board</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a97c4888c156147762630f5d73d5c3bb7">EvKeyPress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Event on the board</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#abf7fe80a9d70adcd34da8ce6749a36c2">EvKeyRelease</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Called ever 1s to refresh status</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a1492d042e89665dba3924b193f5bf9cc">RefreshStatus</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Called to save board preferences in configuration file</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a5603baefc099825eeb53634ece32b2f8">WritePreferences</a>(<span class="keywordtype">void</span>) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// Called whe configuration file load  preferences</span></div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a696180daddb7dfc9b5bf5ad45fca0124">ReadPreferences</a>(<span class="keywordtype">char</span>* name, <span class="keywordtype">char</span>* value) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// return the input ids numbers of names used in input map</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcboard__x.html#a870b8977726aba5c91a863efb1175c1f">GetInputId</a>(<span class="keywordtype">char</span>* name) <span class="keyword">override</span>;</div>
<div class="line">    <span class="comment">// return the output ids numbers of names used in output map</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcboard__x.html#a99605f65ae5f4a210d57113fa805194e">GetOutputId</a>(<span class="keywordtype">char</span>* name) <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* BOARD_x_H */</span><span class="preprocessor"></span></div>
<div class="ttc" id="aclassbsim__picsim_html"><div class="ttname"><a href="classbsim__picsim.html">bsim_picsim</a></div><div class="ttdef"><b>Definition</b> bsim_picsim.h:34</div></div>
<div class="ttc" id="aclasscboard__x_html"><div class="ttname"><a href="classcboard__x.html">cboard_x</a></div><div class="ttdef"><b>Definition</b> board_x.h:35</div></div>
<div class="ttc" id="aclasscboard__x_html_a1492d042e89665dba3924b193f5bf9cc"><div class="ttname"><a href="classcboard__x.html#a1492d042e89665dba3924b193f5bf9cc">cboard_x::RefreshStatus</a></div><div class="ttdeci">void RefreshStatus(void) override</div><div class="ttdoc">Called ever 1s to refresh status.</div><div class="ttdef"><b>Definition</b> board_x.cc:174</div></div>
<div class="ttc" id="aclasscboard__x_html_a1b3cd82ccb8f75820ac39966bc814bfe"><div class="ttname"><a href="classcboard__x.html#a1b3cd82ccb8f75820ac39966bc814bfe">cboard_x::GetSupportedDevices</a></div><div class="ttdeci">std::string GetSupportedDevices(void) override</div><div class="ttdoc">Return a list of supported microcontrollers.</div><div class="ttdef"><b>Definition</b> board_x.h:63</div></div>
<div class="ttc" id="aclasscboard__x_html_a35a4d84f51f61a8588dd2210add76ec6"><div class="ttname"><a href="classcboard__x.html#a35a4d84f51f61a8588dd2210add76ec6">cboard_x::EvMouseButtonPress</a></div><div class="ttdeci">void EvMouseButtonPress(unsigned int button, unsigned int x, unsigned int y, unsigned int state) override</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition</b> board_x.cc:245</div></div>
<div class="ttc" id="aclasscboard__x_html_a53deb20060268afc55ebd0735749c808"><div class="ttname"><a href="classcboard__x.html#a53deb20060268afc55ebd0735749c808">cboard_x::GetName</a></div><div class="ttdeci">std::string GetName(void) override</div><div class="ttdoc">Get board name registered in PICSimLab.</div><div class="ttdef"><b>Definition</b> board_x.h:56</div></div>
<div class="ttc" id="aclasscboard__x_html_a5603baefc099825eeb53634ece32b2f8"><div class="ttname"><a href="classcboard__x.html#a5603baefc099825eeb53634ece32b2f8">cboard_x::WritePreferences</a></div><div class="ttdeci">void WritePreferences(void) override</div><div class="ttdoc">Called to save board preferences in configuration file.</div><div class="ttdef"><b>Definition</b> board_x.cc:181</div></div>
<div class="ttc" id="aclasscboard__x_html_a57f002f7c4329808257b80387bdcc4d1"><div class="ttname"><a href="classcboard__x.html#a57f002f7c4329808257b80387bdcc4d1">cboard_x::Draw</a></div><div class="ttdeci">void Draw(void) override</div><div class="ttdoc">Called ever 100ms to draw board.</div><div class="ttdef"><b>Definition</b> board_x.cc:366</div></div>
<div class="ttc" id="aclasscboard__x_html_a6337aae979579d9d180026dfcd2c55c0"><div class="ttname"><a href="classcboard__x.html#a6337aae979579d9d180026dfcd2c55c0">cboard_x::Run_CPU</a></div><div class="ttdeci">void Run_CPU(void) override</div><div class="ttdoc">Paralle thread called ever 100ms to run cpu code.</div><div class="ttdef"><b>Definition</b> board_x.cc:497</div></div>
<div class="ttc" id="aclasscboard__x_html_a696180daddb7dfc9b5bf5ad45fca0124"><div class="ttname"><a href="classcboard__x.html#a696180daddb7dfc9b5bf5ad45fca0124">cboard_x::ReadPreferences</a></div><div class="ttdeci">void ReadPreferences(char *name, char *value) override</div><div class="ttdoc">Called whe configuration file load preferences.</div><div class="ttdef"><b>Definition</b> board_x.cc:194</div></div>
<div class="ttc" id="aclasscboard__x_html_a6f87b4f00b9297a5893a805820c4a436"><div class="ttname"><a href="classcboard__x.html#a6f87b4f00b9297a5893a805820c4a436">cboard_x::Reset</a></div><div class="ttdeci">void Reset(void) override</div><div class="ttdoc">Reset board status.</div><div class="ttdef"><b>Definition</b> board_x.cc:133</div></div>
<div class="ttc" id="aclasscboard__x_html_a870b8977726aba5c91a863efb1175c1f"><div class="ttname"><a href="classcboard__x.html#a870b8977726aba5c91a863efb1175c1f">cboard_x::GetInputId</a></div><div class="ttdeci">unsigned short GetInputId(char *name) override</div><div class="ttdoc">return the input ids numbers of names used in input map</div><div class="ttdef"><b>Definition</b> board_x.cc:61</div></div>
<div class="ttc" id="aclasscboard__x_html_a8a9c6d055e0956832fe171beb4d22b4f"><div class="ttname"><a href="classcboard__x.html#a8a9c6d055e0956832fe171beb4d22b4f">cboard_x::EvMouseMove</a></div><div class="ttdeci">void EvMouseMove(unsigned int button, unsigned int x, unsigned int y, unsigned int state) override</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition</b> board_x.cc:305</div></div>
<div class="ttc" id="aclasscboard__x_html_a8c99a17217563667dc7e45275d278f97"><div class="ttname"><a href="classcboard__x.html#a8c99a17217563667dc7e45275d278f97">cboard_x::EvMouseButtonRelease</a></div><div class="ttdeci">void EvMouseButtonRelease(unsigned int button, unsigned int x, unsigned int y, unsigned int state) override</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition</b> board_x.cc:328</div></div>
<div class="ttc" id="aclasscboard__x_html_a97c4888c156147762630f5d73d5c3bb7"><div class="ttname"><a href="classcboard__x.html#a97c4888c156147762630f5d73d5c3bb7">cboard_x::EvKeyPress</a></div><div class="ttdeci">void EvKeyPress(unsigned int key, unsigned int mask) override</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition</b> board_x.cc:219</div></div>
<div class="ttc" id="aclasscboard__x_html_a99605f65ae5f4a210d57113fa805194e"><div class="ttname"><a href="classcboard__x.html#a99605f65ae5f4a210d57113fa805194e">cboard_x::GetOutputId</a></div><div class="ttdeci">unsigned short GetOutputId(char *name) override</div><div class="ttdoc">return the output ids numbers of names used in output map</div><div class="ttdef"><b>Definition</b> board_x.cc:81</div></div>
<div class="ttc" id="aclasscboard__x_html_a9c1664ce551c79209b4e6dc9d0ed8730"><div class="ttname"><a href="classcboard__x.html#a9c1664ce551c79209b4e6dc9d0ed8730">cboard_x::RegisterRemoteControl</a></div><div class="ttdeci">void RegisterRemoteControl(void) override</div><div class="ttdoc">Register remote control variables.</div><div class="ttdef"><b>Definition</b> board_x.cc:154</div></div>
<div class="ttc" id="aclasscboard__x_html_abf7fe80a9d70adcd34da8ce6749a36c2"><div class="ttname"><a href="classcboard__x.html#abf7fe80a9d70adcd34da8ce6749a36c2">cboard_x::EvKeyRelease</a></div><div class="ttdeci">void EvKeyRelease(unsigned int key, unsigned int mask) override</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition</b> board_x.cc:235</div></div>
<div class="ttc" id="aclasscboard__x_html_ade950561bb6b28e30fe9396a5033afe8"><div class="ttname"><a href="classcboard__x.html#ade950561bb6b28e30fe9396a5033afe8">cboard_x::GetAboutInfo</a></div><div class="ttdeci">std::string GetAboutInfo(void) override</div><div class="ttdoc">Return the about information of part.</div><div class="ttdef"><b>Definition</b> board_x.h:58</div></div>
<div class="ttc" id="astruct_s_w_bounce__t_html"><div class="ttname"><a href="struct_s_w_bounce__t.html">SWBounce_t</a></div><div class="ttdef"><b>Definition</b> swbounce.h:29</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="bcode"></a>
board_x.cc</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICSimLab - Programmable IC Simulator Laboratory</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2015-2025  Luis Claudio Gambôa Lopes &lt;lcgamboa@yahoo.com&gt;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// include files</span></div>
<div class="line"><span class="preprocessor">#include &quot;board_x.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../lib/oscilloscope.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../lib/picsimlab.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;../lib/spareparts.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* ids of inputs of input map*/</span></div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    I_POT1,  <span class="comment">// potentiometer</span></div>
<div class="line">    I_ICSP,  <span class="comment">// ICSP connector</span></div>
<div class="line">    I_PWR,   <span class="comment">// Power button</span></div>
<div class="line">    I_RST,   <span class="comment">// Reset button</span></div>
<div class="line">    I_BD0,   <span class="comment">// RD0 push button</span></div>
<div class="line">    I_SD1    <span class="comment">// RD1 switch</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* ids of outputs of output map*/</span></div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    O_POT1,  <span class="comment">// potentiometer</span></div>
<div class="line">    O_RST,   <span class="comment">// Reset button</span></div>
<div class="line">    O_SD1,   <span class="comment">// switch position (On/Off)</span></div>
<div class="line">    O_LD0,   <span class="comment">// LED on RD0 push button</span></div>
<div class="line">    O_LD1,   <span class="comment">// LED on RD1 switch</span></div>
<div class="line">    O_LPWR,  <span class="comment">// Power LED</span></div>
<div class="line">    O_RB0,   <span class="comment">// LED on RB0 output</span></div>
<div class="line">    O_RB1,   <span class="comment">// LED on RB1 output</span></div>
<div class="line">    O_BD0,   <span class="comment">// RD1 switch</span></div>
<div class="line">    O_CPU    <span class="comment">// CPU name</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> { PWM0 = 1, PWM1 };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// return the input ids numbers of names used in input map</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcboard__x.html#a870b8977726aba5c91a863efb1175c1f">cboard_x::GetInputId</a>(<span class="keywordtype">char</span>* name) {</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PG_ICSP&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> I_ICSP;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;SW_PWR&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> I_PWR;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PB_RST&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> I_RST;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PB_D0&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> I_BD0;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;SW_D1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> I_SD1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PO_1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> I_POT1;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Error input &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line">    <span class="keywordflow">return</span> INVALID_ID;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// return the output ids numbers of names used in output map</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code hl_function" href="classcboard__x.html#a99605f65ae5f4a210d57113fa805194e">cboard_x::GetOutputId</a>(<span class="keywordtype">char</span>* name) {</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;SW_D1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_SD1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_LD0&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_LD0;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_LD1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_LD1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_LPWR&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_LPWR;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_RB1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_RB1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;LD_RB0&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_RB0;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PB_D0&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_BD0;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PO_1&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_POT1;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;PB_RST&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_RST;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, <span class="stringliteral">&quot;IC_CPU&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> O_CPU;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Error output &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line">    <span class="keywordflow">return</span> INVALID_ID;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Constructor called once on board creation</span></div>
<div class="line"> </div>
<div class="line">cboard_x::cboard_x(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#afd891fba5b6023fcc2704717dec484ec">Proc</a> = <span class="stringliteral">&quot;PIC18F4550&quot;</span>;  <span class="comment">// default microcontroller if none defined in preferences</span></div>
<div class="line">    <a class="code hl_function" href="classboard.html#aec4781344e8ceebccdc6ac543a04ce15">ReadMaps</a>();           <span class="comment">// Read input and output board maps</span></div>
<div class="line"> </div>
<div class="line">    pot1 = 100;</div>
<div class="line"> </div>
<div class="line">    active = 0;</div>
<div class="line"> </div>
<div class="line">    PICSimLab.UpdateGUI(PWM0, GT_GAUGE, GA_ADD, (<span class="keywordtype">void</span>*)<span class="stringliteral">&quot;*RB0&quot;</span>);</div>
<div class="line">    PICSimLab.UpdateGUI(PWM1, GT_GAUGE, GA_ADD, (<span class="keywordtype">void</span>*)<span class="stringliteral">&quot;*RB1&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    SWBounce_init(&amp;bounce, 2);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Destructor called once on board destruction</span></div>
<div class="line"> </div>
<div class="line">cboard_x::~cboard_x(<span class="keywordtype">void</span>) {</div>
<div class="line">    PICSimLab.UpdateGUI(PWM0, GT_GAUGE, GA_DEL, NULL);</div>
<div class="line">    PICSimLab.UpdateGUI(PWM1, GT_GAUGE, GA_DEL, NULL);</div>
<div class="line">    SWBounce_end(&amp;bounce);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reset board status</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a6f87b4f00b9297a5893a805820c4a436">cboard_x::Reset</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_function" href="classbsim__picsim.html#af1c79adb0ee61952daf1791ea8c0b071">MReset</a>(1);</div>
<div class="line"> </div>
<div class="line">    p_BT1 = 1;  <span class="comment">// set push button  in default state (high)</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// write button state to pin 19 (RD0)</span></div>
<div class="line">    <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(19, p_BT1);</div>
<div class="line">    <span class="comment">// write switch state to pin 20 (RD1)</span></div>
<div class="line">    <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(20, p_BT2);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// verify serial port state and refresh status bar</span></div>
<div class="line">    PICSimLab.UpdateStatus(PS_SERIAL, GetUARTStrStatus(0));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)</div>
<div class="line">        SpareParts.Reset();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="classcboard__x.html#a9c1664ce551c79209b4e6dc9d0ed8730">RegisterRemoteControl</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register variables to be controled by remote control</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a9c1664ce551c79209b4e6dc9d0ed8730">cboard_x::RegisterRemoteControl</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// register inputa</span></div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a112ae48766ff45fd7ddf88b246825509">input_ids</a>[I_BD0]-&gt;<a class="code hl_variable" href="structinput__t.html#aa46e9709c149cb3cdc28825ba28fb7ed">status</a> = &amp;p_BT1;</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a112ae48766ff45fd7ddf88b246825509">input_ids</a>[I_SD1]-&gt;<a class="code hl_variable" href="structinput__t.html#aa46e9709c149cb3cdc28825ba28fb7ed">status</a> = &amp;p_BT2;</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a112ae48766ff45fd7ddf88b246825509">input_ids</a>[I_POT1]-&gt;<a class="code hl_variable" href="structinput__t.html#aa46e9709c149cb3cdc28825ba28fb7ed">status</a> = &amp;pot1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// register output to be updated on input change</span></div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a112ae48766ff45fd7ddf88b246825509">input_ids</a>[I_BD0]-&gt;<a class="code hl_variable" href="structinput__t.html#a7a312dba32cd784ba2673747b24cd24c">update</a> = &amp;<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_BD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a>;</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a112ae48766ff45fd7ddf88b246825509">input_ids</a>[I_SD1]-&gt;<a class="code hl_variable" href="structinput__t.html#a7a312dba32cd784ba2673747b24cd24c">update</a> = &amp;<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_SD1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a>;</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a112ae48766ff45fd7ddf88b246825509">input_ids</a>[I_POT1]-&gt;<a class="code hl_variable" href="structinput__t.html#a7a312dba32cd784ba2673747b24cd24c">update</a> = &amp;<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_POT1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// register outputa</span></div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB0]-&gt;<a class="code hl_variable" href="structoutput__t.html#a394c193a9f75a821997918c3fe8525a5">status</a> = <a class="code hl_function" href="classbsim__picsim.html#aca8e96408f27a2c90b28b0b8fe0a0ad9">MGetPinOAVPtr</a>(33);</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB1]-&gt;<a class="code hl_variable" href="structoutput__t.html#a394c193a9f75a821997918c3fe8525a5">status</a> = <a class="code hl_function" href="classbsim__picsim.html#aca8e96408f27a2c90b28b0b8fe0a0ad9">MGetPinOAVPtr</a>(34);</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#a394c193a9f75a821997918c3fe8525a5">status</a> = <a class="code hl_function" href="classbsim__picsim.html#aca8e96408f27a2c90b28b0b8fe0a0ad9">MGetPinOAVPtr</a>(19);</div>
<div class="line">    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD1]-&gt;<a class="code hl_variable" href="structoutput__t.html#a394c193a9f75a821997918c3fe8525a5">status</a> = <a class="code hl_function" href="classbsim__picsim.html#aca8e96408f27a2c90b28b0b8fe0a0ad9">MGetPinOAVPtr</a>(20);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Called ever 1s to refresh status</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a1492d042e89665dba3924b193f5bf9cc">cboard_x::RefreshStatus</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// verify serial port state and refresh status bar</span></div>
<div class="line">    PICSimLab.UpdateStatus(PS_SERIAL, GetUARTStrStatus(0));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Called to save board preferences in configuration file</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a5603baefc099825eeb53634ece32b2f8">cboard_x::WritePreferences</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// write selected microcontroller of board_x to preferences</span></div>
<div class="line">    PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#af51368feda52c27ca672b7c7eab7319f">SavePrefs</a>(<span class="stringliteral">&quot;X_proc&quot;</span>, <a class="code hl_variable" href="classboard.html#afd891fba5b6023fcc2704717dec484ec">Proc</a>);</div>
<div class="line">    <span class="comment">// write switch state of board_x to preferences</span></div>
<div class="line">    PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#af51368feda52c27ca672b7c7eab7319f">SavePrefs</a>(<span class="stringliteral">&quot;X_bt2&quot;</span>, std::to_string(p_BT2));</div>
<div class="line">    <span class="comment">// write microcontroller clock to preferences</span></div>
<div class="line">    PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#af51368feda52c27ca672b7c7eab7319f">SavePrefs</a>(<span class="stringliteral">&quot;X_clock&quot;</span>, FloatStrFormat(<span class="stringliteral">&quot;%2.1f&quot;</span>, PICSimLab.GetClock()));</div>
<div class="line">    <span class="comment">// write potentiometer position to preferences</span></div>
<div class="line">    PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#af51368feda52c27ca672b7c7eab7319f">SavePrefs</a>(<span class="stringliteral">&quot;X_pot1&quot;</span>, std::to_string(pot1));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Called whe configuration file load  preferences</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a696180daddb7dfc9b5bf5ad45fca0124">cboard_x::ReadPreferences</a>(<span class="keywordtype">char</span>* name, <span class="keywordtype">char</span>* value) {</div>
<div class="line">    <span class="comment">// read switch state of board_x of preferences</span></div>
<div class="line">    <span class="keywordflow">if</span> (!strcmp(name, <span class="stringliteral">&quot;X_bt2&quot;</span>)) {</div>
<div class="line">        <span class="keywordflow">if</span> (value[0] == <span class="charliteral">&#39;0&#39;</span>)</div>
<div class="line">            p_BT2 = 0;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            p_BT2 = 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// read microcontroller of preferences</span></div>
<div class="line">    <span class="keywordflow">if</span> (!strcmp(name, <span class="stringliteral">&quot;X_proc&quot;</span>)) {</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#afd891fba5b6023fcc2704717dec484ec">Proc</a> = value;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// read microcontroller clock</span></div>
<div class="line">    <span class="keywordflow">if</span> (!strcmp(name, <span class="stringliteral">&quot;X_clock&quot;</span>)) {</div>
<div class="line">        PICSimLab.SetClock(atof(value));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// read potentiometer position</span></div>
<div class="line">    <span class="keywordflow">if</span> (!strcmp(name, <span class="stringliteral">&quot;X_pot1&quot;</span>)) {</div>
<div class="line">        pot1 = atoi(value);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a97c4888c156147762630f5d73d5c3bb7">cboard_x::EvKeyPress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask) {</div>
<div class="line">    <span class="comment">// if keyboard key 1 is pressed then activate button (state=0)</span></div>
<div class="line">    <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;1&#39;</span>) {</div>
<div class="line">        p_BT1 = 0;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_BD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// if keyboard key 2 is pressed then toggle switch state</span></div>
<div class="line">    <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;2&#39;</span>) {</div>
<div class="line">        p_BT2 ^= 1;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_SD1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#abf7fe80a9d70adcd34da8ce6749a36c2">cboard_x::EvKeyRelease</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> key, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mask) {</div>
<div class="line">    <span class="comment">// if keyboard key 1 is pressed then deactivate button (state=1)</span></div>
<div class="line">    <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;1&#39;</span>) {</div>
<div class="line">        p_BT1 = 1;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_BD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a35a4d84f51f61a8588dd2210add76ec6">cboard_x::EvMouseButtonPress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state) {</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// search for the input area which owner the event</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_variable" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (((<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].x1 &lt;= x) &amp;&amp; (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].x2 &gt;= x)) &amp;&amp; ((<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].y1 &lt;= y) &amp;&amp; (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].y2 &gt;= y))) {</div>
<div class="line">            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].<span class="keywordtype">id</span>) {</div>
<div class="line">                    <span class="comment">// if event is over I_ISCP area then load hex file</span></div>
<div class="line">                <span class="keywordflow">case</span> I_ICSP:</div>
<div class="line">                    PICSimLab.OpenLoadHexFileDialog();</div>
<div class="line">                    ;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="comment">// if event is over I_PWR area then toggle board on/off</span></div>
<div class="line">                <span class="keywordflow">case</span> I_PWR:</div>
<div class="line">                    <span class="keywordflow">if</span> (PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#abe7b589c0de06036c5b167e815af9498">GetMcuPwr</a>())  <span class="comment">// if on turn off</span></div>
<div class="line">                    {</div>
<div class="line">                        PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a9c6f3626c3818890de8b8d8f758cdca6">SetMcuPwr</a>(0);</div>
<div class="line">                        <a class="code hl_function" href="classcboard__x.html#a6f87b4f00b9297a5893a805820c4a436">Reset</a>();</div>
<div class="line">                        p_BT1 = 1;</div>
<div class="line">                    } <span class="keywordflow">else</span>  <span class="comment">// if off turn on</span></div>
<div class="line">                    {</div>
<div class="line">                        PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a9c6f3626c3818890de8b8d8f758cdca6">SetMcuPwr</a>(1);</div>
<div class="line">                        <a class="code hl_function" href="classcboard__x.html#a6f87b4f00b9297a5893a805820c4a436">Reset</a>();</div>
<div class="line">                    }</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LPWR]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="comment">// if event is over I_RST area then turn off and reset</span></div>
<div class="line">                <span class="keywordflow">case</span> I_RST:</div>
<div class="line">                    <span class="keywordflow">if</span> (PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#abe7b589c0de06036c5b167e815af9498">GetMcuPwr</a>() &amp;&amp; <a class="code hl_function" href="classbsim__picsim.html#af1c79adb0ee61952daf1791ea8c0b071">MReset</a>(-1))  <span class="comment">// if powered</span></div>
<div class="line">                    {</div>
<div class="line">                        PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a9c6f3626c3818890de8b8d8f758cdca6">SetMcuPwr</a>(0);</div>
<div class="line">                        PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a077c76d5582e27431d8dceda7ff08d2f">SetMcuRst</a>(1);</div>
<div class="line">                    }</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a> = 0;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RST]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="comment">// if event is over I_D0 area then activate button (state=0)</span></div>
<div class="line">                <span class="keywordflow">case</span> I_BD0:</div>
<div class="line">                    p_BT1 = 0;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_BD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="comment">// if event is over I_D1 area then toggle switch state</span></div>
<div class="line">                <span class="keywordflow">case</span> I_SD1:</div>
<div class="line">                    p_BT2 ^= 1;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_SD1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> I_POT1: {</div>
<div class="line">                    active = 1;</div>
<div class="line">                    pot1 = (x - <a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].<a class="code hl_variable" href="structinput__t.html#aa159507da56a667157c4ce6b4930b44a">x1</a>) * 2.77;</div>
<div class="line">                    <span class="keywordflow">if</span> (pot1 &gt; 199)</div>
<div class="line">                        pot1 = 199;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_POT1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                } <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a8a9c6d055e0956832fe171beb4d22b4f">cboard_x::EvMouseMove</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state) {</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_variable" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++) {</div>
<div class="line">        <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].<span class="keywordtype">id</span>) {</div>
<div class="line">            <span class="keywordflow">case</span> I_POT1:</div>
<div class="line">                <span class="keywordflow">if</span> (((<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].x1 &lt;= x) &amp;&amp; (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].x2 &gt;= x)) &amp;&amp; ((<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].y1 &lt;= y) &amp;&amp; (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].y2 &gt;= y))) {</div>
<div class="line">                    <span class="keywordflow">if</span> (active) {</div>
<div class="line">                        pot1 = (x - <a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].<a class="code hl_variable" href="structinput__t.html#aa159507da56a667157c4ce6b4930b44a">x1</a>) * 2.77;</div>
<div class="line">                        <span class="keywordflow">if</span> (pot1 &gt; 199)</div>
<div class="line">                            pot1 = 199;</div>
<div class="line">                        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_POT1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    active = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a8c99a17217563667dc7e45275d278f97">cboard_x::EvMouseButtonRelease</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> button, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> state) {</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// search for the input area which owner the event</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_variable" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (((<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].x1 &lt;= x) &amp;&amp; (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].x2 &gt;= x)) &amp;&amp; ((<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].y1 &lt;= y) &amp;&amp; (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].y2 &gt;= y))) {</div>
<div class="line">            <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classboard.html#a8263f81e92db703ec57c319e7785fc74">input</a>[i].<span class="keywordtype">id</span>) {</div>
<div class="line">                    <span class="comment">// if event is over I_RST area then turn on</span></div>
<div class="line">                <span class="keywordflow">case</span> I_RST:</div>
<div class="line">                    <span class="keywordflow">if</span> (PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a17031743eb40a15b9ed14272f6187f18">GetMcuRst</a>())  <span class="comment">// if powered</span></div>
<div class="line">                    {</div>
<div class="line">                        PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a9c6f3626c3818890de8b8d8f758cdca6">SetMcuPwr</a>(1);</div>
<div class="line">                        PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#a077c76d5582e27431d8dceda7ff08d2f">SetMcuRst</a>(0);</div>
<div class="line"> </div>
<div class="line">                        <span class="keywordflow">if</span> (<a class="code hl_function" href="classbsim__picsim.html#af1c79adb0ee61952daf1791ea8c0b071">MReset</a>(-1)) {</div>
<div class="line">                            <a class="code hl_function" href="classcboard__x.html#a6f87b4f00b9297a5893a805820c4a436">Reset</a>();</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a> = 1;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RST]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="comment">// if event is over I_D0 area then deactivate button (state=1)</span></div>
<div class="line">                <span class="keywordflow">case</span> I_BD0:</div>
<div class="line">                    p_BT1 = 1;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_BD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> I_POT1: {</div>
<div class="line">                    active = 0;</div>
<div class="line">                    <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_POT1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">                } <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Called ever 100ms to draw board</span></div>
<div class="line"><span class="comment">// This is the critical code for simulator running speed</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a57f002f7c4329808257b80387bdcc4d1">cboard_x::Draw</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keywordtype">int</span> update = 0;  <span class="comment">// verifiy if updated is needed</span></div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keyword">const</span> picpin* pins = <a class="code hl_function" href="classbsim__picsim.html#ab650e99646909a5c379f5bc90bd36c3d">MGetPinsValues</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// board_x draw</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code hl_variable" href="classboard.html#a52d4e88ddf5f29d1648ea94dafbf87de">outputc</a>; i++)  <span class="comment">// run over all outputs</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].update)  <span class="comment">// only if need update</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 0;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (!update) {</div>
<div class="line">                PICSimLab.CanvasCmd({.cmd = CC_INIT, .Init{Scale, Scale, 0}});</div>
<div class="line">                PICSimLab.CanvasCmd({.cmd = CC_SETFONTWEIGHT, .SetFontWeight{CC_FONTWEIGHT_BOLD}});</div>
<div class="line">            }</div>
<div class="line">            update++;  <span class="comment">// set to update buffer</span></div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].r)  <span class="comment">// if output shape is a rectangle</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<span class="keywordtype">id</span> == O_SD1)  <span class="comment">// if output is switch</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// draw a background white rectangle</span></div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{255, 255, 255}});</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_RECTANGLE,</div>
<div class="line">                                         .Rectangle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>,</div>
<div class="line">                                                    <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>}});</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">if</span> (!p_BT2)  <span class="comment">// draw switch off</span></div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// draw a grey rectangle</span></div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{70, 70, 70}});</div>
<div class="line">                        PICSimLab.CanvasCmd(</div>
<div class="line">                            {.cmd = CC_RECTANGLE,</div>
<div class="line">                             .Rectangle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a> + ((int)((<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].y2 - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].y1) * 0.35)),</div>
<div class="line">                                        <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].x2 - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].x1, ((<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].y2 - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].y1) * 0.65f)}});</div>
<div class="line">                    } <span class="keywordflow">else</span>  <span class="comment">// draw switch on</span></div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// draw a grey rectangle</span></div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{70, 70, 70}});</div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_RECTANGLE,</div>
<div class="line">                                             .Rectangle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>,</div>
<div class="line">                                                        ((<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>) * 0.65f)}});</div>
<div class="line">                    }</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<span class="keywordtype">id</span> == O_BD0) {</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{102, 102, 102}});</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#ac18979fb819695066bbba318fd652ee2">cx</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#addda931aa862010662d5dd65146c73f7">cy</a>, 10}});</div>
<div class="line">                    <span class="keywordflow">if</span> (p_BT1) {</div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{15, 15, 15}});</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{55, 55, 55}});</div>
<div class="line">                    }</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#ac18979fb819695066bbba318fd652ee2">cx</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#addda931aa862010662d5dd65146c73f7">cy</a>, 8}});</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<span class="keywordtype">id</span> == O_RST) {</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{102, 102, 102}});</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#ac18979fb819695066bbba318fd652ee2">cx</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#addda931aa862010662d5dd65146c73f7">cy</a>, 10}});</div>
<div class="line"> </div>
<div class="line">                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a>) {</div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{15, 15, 15}});</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{55, 55, 55}});</div>
<div class="line">                    }</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_CIRCLE, .Circle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#ac18979fb819695066bbba318fd652ee2">cx</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#addda931aa862010662d5dd65146c73f7">cy</a>, 8}});</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<span class="keywordtype">id</span> == O_POT1) {</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{0, 50, 215}});</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_RECTANGLE,</div>
<div class="line">                                         .Rectangle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>,</div>
<div class="line">                                                    <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>}});</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{250, 250, 250}});</div>
<div class="line">                    PICSimLab.CanvasCmd(</div>
<div class="line">                        {.cmd = CC_RECTANGLE, .Rectangle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a> + pot1 / 2.77f, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a> + 2, 10, 15}});</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<span class="keywordtype">id</span> == O_CPU) {</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETFONTSIZE, .SetFontSize{10}});</div>
<div class="line">                    <span class="keywordtype">float</span> x, y;</div>
<div class="line">                    <span class="keywordtype">int</span> w, h;</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{26, 26, 26}});</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_RECTANGLE,</div>
<div class="line">                                         .Rectangle{1, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>, <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>,</div>
<div class="line">                                                    <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a>}});</div>
<div class="line"> </div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_SETCOLOR, .SetColor{230, 230, 230}});</div>
<div class="line">                    w = <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a20905237f1b3c1c9a506b05eaf026a4f">x2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a>;</div>
<div class="line">                    h = <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a> - <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a2e400ca1489c4e43e4dba849f51be806">y2</a>;</div>
<div class="line">                    x = <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a86e451633b99e28a1d5632c24d00d08c">x1</a> + (w / 2) + 7;</div>
<div class="line">                    y = <a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<a class="code hl_variable" href="structoutput__t.html#a359ec6bdcab8295763a041e29bd29404">y1</a> + (h / 2) + (<a class="code hl_variable" href="classboard.html#afd891fba5b6023fcc2704717dec484ec">Proc</a>.length());</div>
<div class="line">                    PICSimLab.CanvasCmd({.cmd = CC_ROTATEDTEXT, .RotatedText{<a class="code hl_variable" href="classboard.html#afd891fba5b6023fcc2704717dec484ec">Proc</a>.c_str(), x, y, 270}});</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span>  <span class="comment">// if output shape is a circle</span></div>
<div class="line">            {</div>
<div class="line">                PICSimLab.CanvasCmd({.cmd = CC_SETFGCOLOR, .SetFgColor{0, 0, 0}});  <span class="comment">// black</span></div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i].<span class="keywordtype">id</span>)  <span class="comment">// search for color of output</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">case</span> O_LD0:  <span class="comment">// White using pin 19 mean value (RD0)</span></div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR,</div>
<div class="line">                                             .SetBgColor{(<span class="keywordtype">unsigned</span> int)pins[18].oavalue, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)pins[18].oavalue,</div>
<div class="line">                                                         (<span class="keywordtype">unsigned</span> int)pins[18].oavalue}});</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> O_LD1:  <span class="comment">// Yelllow using pin 20 mean value (RD1)</span></div>
<div class="line">                        PICSimLab.CanvasCmd(</div>
<div class="line">                            {.cmd = CC_SETBGCOLOR,</div>
<div class="line">                             .SetBgColor{(<span class="keywordtype">unsigned</span> int)pins[19].oavalue, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)pins[19].oavalue, 0}});</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> O_LPWR:  <span class="comment">// Blue using mcupwr value</span></div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR,</div>
<div class="line">                                             .SetBgColor{0, 0, (<span class="keywordtype">unsigned</span> int)(200 * PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#abe7b589c0de06036c5b167e815af9498">GetMcuPwr</a>() + 55)}});</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> O_RB0:  <span class="comment">// Green using pin 33 mean value (RB0)</span></div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{0, (<span class="keywordtype">unsigned</span> int)pins[32].oavalue, 0}});</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> O_RB1:  <span class="comment">// Red using pin 34 mean value (RB1)</span></div>
<div class="line">                        PICSimLab.CanvasCmd({.cmd = CC_SETBGCOLOR, .SetBgColor{(<span class="keywordtype">unsigned</span> int)pins[33].oavalue, 0, 0}});</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                DrawLED(PICSimLab.CanvasCmd, &amp;<a class="code hl_variable" href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">output</a>[i]);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// end draw</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (update) {</div>
<div class="line">        PICSimLab.CanvasCmd({.cmd = CC_END});</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> value = (pins[33].oavalue - 55) / 2;  <span class="comment">// RB0 mean value</span></div>
<div class="line">    PICSimLab.UpdateGUI(PWM0, GT_GAUGE, GA_SET, (<span class="keywordtype">void</span>*)&amp;value);</div>
<div class="line">    value = (pins[32].oavalue - 55) / 2;  <span class="comment">// RB1 mean value</span></div>
<div class="line">    PICSimLab.UpdateGUI(PWM1, GT_GAUGE, GA_SET, (<span class="keywordtype">void</span>*)&amp;value);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="classcboard__x.html#a6337aae979579d9d180026dfcd2c55c0">cboard_x::Run_CPU</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keywordtype">int</span> j;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pi;</div>
<div class="line">    <span class="keyword">const</span> picpin* pins;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alm[40];</div>
<div class="line">    <span class="keywordtype">int</span> bret;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> JUMPSTEPS = PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#ae7593e716065463586ba688d1d39d3c4">GetJUMPSTEPS</a>();  <span class="comment">// number of steps skipped</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> NSTEP = PICSimLab.GetNSTEP();     <span class="comment">// number of steps in 100ms</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> RNSTEP = 200.0 * <a class="code hl_function" href="classbsim__picsim.html#a1292f439e9d10fa0d6c934b9394e4da8">MGetPinCount</a>() / NSTEP;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// reset pins mean value</span></div>
<div class="line">    memset(alm, 0, 40 * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// read pins to a local variable to speed up</span></div>
<div class="line">    pins = <a class="code hl_function" href="classbsim__picsim.html#ab650e99646909a5c379f5bc90bd36c3d">MGetPinsValues</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Spare parts window pre process</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)</div>
<div class="line">        SpareParts.<a class="code hl_function" href="class_c_spare_parts.html#aeb04eb62a248ea4f07e83d8752baf96f">PreProcess</a>();</div>
<div class="line"> </div>
<div class="line">    SWBounce_prepare(&amp;bounce, PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#aeae1956b61d48261081fc1b2bf339017">GetBoard</a>()-&gt;<a class="code hl_function" href="classboard.html#a2c5a0def304361ca54f770b2cd9520fd">MGetInstClockFreq</a>());</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p_BT1_ = p_BT1;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p_BT2_ = p_BT2;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((pins[19 - 1].dir == PD_IN) &amp;&amp; (pins[19 - 1].value != p_BT1_)) {</div>
<div class="line">        SWBounce_bounce(&amp;bounce, 0);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> ((pins[20 - 1].dir == PD_IN) &amp;&amp; (pins[20 - 1].value != p_BT2_)) {</div>
<div class="line">        SWBounce_bounce(&amp;bounce, 1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    j = JUMPSTEPS;  <span class="comment">// step counter</span></div>
<div class="line">    pi = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (PICSimLab.<a class="code hl_function" href="class_c_p_i_c_sim_lab.html#abe7b589c0de06036c5b167e815af9498">GetMcuPwr</a>())       <span class="comment">// if powered</span></div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; NSTEP; i++)  <span class="comment">// repeat for number of steps in 100ms</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (j &gt;= JUMPSTEPS)  <span class="comment">// if number of step is bigger than step to skip</span></div>
<div class="line">            {</div>
<div class="line">                <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(<a class="code hl_function" href="classbsim__picsim.html#a771e1c03ab778acae76004ba2340cb72">MGetResetPin</a>(), <a class="code hl_variable" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a>);</div>
<div class="line">                <span class="keywordflow">if</span> (!bounce.do_bounce) {</div>
<div class="line">                    <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(19, p_BT1_);  <span class="comment">// Set pin 19 (RD0) with button state</span></div>
<div class="line">                    <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(20, p_BT2_);  <span class="comment">// Set pin 20 (RD1) with switch state</span></div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (bounce.do_bounce) {</div>
<div class="line">                bret = SWBounce_process(&amp;bounce);</div>
<div class="line">                <span class="keywordflow">if</span> (bret) {</div>
<div class="line">                    <span class="keywordflow">if</span> (bounce.bounce[0]) {</div>
<div class="line">                        <span class="keywordflow">if</span> (bret == 1) {</div>
<div class="line">                            <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(19, !pins[19 - 1].value);</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(19, p_BT1_);</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">if</span> (bounce.bounce[1]) {</div>
<div class="line">                        <span class="keywordflow">if</span> (bret == 1) {</div>
<div class="line">                            <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(20, !pins[20 - 1].value);</div>
<div class="line">                        } <span class="keywordflow">else</span> {</div>
<div class="line">                            <a class="code hl_function" href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">MSetPin</a>(20, p_BT2_);</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// verify if a breakpoint is reached if not run one instruction</span></div>
<div class="line">            <span class="keywordflow">if</span> (!mplabxd_testbp())</div>
<div class="line">                <a class="code hl_function" href="classbsim__picsim.html#ad1f08d0a2a2e9ee9398faa300db9eeae">MStep</a>();</div>
<div class="line">            ioupdated = <a class="code hl_function" href="classbsim__picsim.html#add60f508df2921813a8f686c2accadd8">MGetIOUpdated</a>();</div>
<div class="line">            <a class="code hl_function" href="classboard.html#a4baf2e6e854e2c46eac9104b82ed4d66">InstCounterInc</a>();</div>
<div class="line">            <span class="comment">// Oscilloscope window process</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a1f5dedbf50d1ebd86af96429a4a3d180">use_oscope</a>)</div>
<div class="line">                Oscilloscope.<a class="code hl_function" href="class_c_oscilloscope.html#a4455bcb15a36ee7a8f2e8a6c2befea9e">SetSample</a>();</div>
<div class="line">            <span class="comment">// Spare parts window process</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)</div>
<div class="line">                SpareParts.<a class="code hl_function" href="class_c_spare_parts.html#a3c9d0706b999f36f96de45530f097724">Process</a>();</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// increment mean value counter if pin is high</span></div>
<div class="line">            alm[pi] += pins[pi].value;</div>
<div class="line">            pi++;</div>
<div class="line">            <span class="keywordflow">if</span> (pi == <a class="code hl_function" href="classbsim__picsim.html#a1292f439e9d10fa0d6c934b9394e4da8">MGetPinCount</a>())</div>
<div class="line">                pi = 0;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (j &gt;= JUMPSTEPS)  <span class="comment">// if number of step is bigger than steps to skip</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// set analog pin 2 (AN0) with value from scroll</span></div>
<div class="line">                <a class="code hl_function" href="classbsim__picsim.html#a2254afa80b8a239297a27dac5d9950cd">MSetAPin</a>(2, (5.0 * pot1 / 199));</div>
<div class="line"> </div>
<div class="line">                j = -1;  <span class="comment">// reset counter</span></div>
<div class="line">            }</div>
<div class="line">            j++;  <span class="comment">// counter increment</span></div>
<div class="line">            <a class="code hl_function" href="classbsim__picsim.html#ad202eb58507e7f72715b636c7c5b6262">MClearIOUpdated</a>();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// calculate mean value</span></div>
<div class="line">    <span class="keywordflow">for</span> (pi = 0; pi &lt; <a class="code hl_function" href="classbsim__picsim.html#a1292f439e9d10fa0d6c934b9394e4da8">MGetPinCount</a>(); pi++) {</div>
<div class="line">        <a class="code hl_function" href="classbsim__picsim.html#a723ff508206680107bcfcfb711562d9c">MSetPinOAV</a>(pi + 1, (alm[pi] * RNSTEP) + 55);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Spare parts window pre post process</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)</div>
<div class="line">        SpareParts.<a class="code hl_function" href="class_c_spare_parts.html#adf2184d88f05dfb8d880c2c08473d0b8">PostProcess</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// verifiy if LEDS need update</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD0]-&gt;value != pins[18].oavalue) {</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#a23bc69196fed4d0e4924453a11e182bd">value</a> = pins[18].oavalue;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD1]-&gt;value != pins[19].oavalue) {</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD1]-&gt;<a class="code hl_variable" href="structoutput__t.html#a23bc69196fed4d0e4924453a11e182bd">value</a> = pins[19].oavalue;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_LD1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB0]-&gt;value != pins[32].oavalue) {</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB0]-&gt;<a class="code hl_variable" href="structoutput__t.html#a23bc69196fed4d0e4924453a11e182bd">value</a> = pins[32].oavalue;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB0]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB1]-&gt;value != pins[33].oavalue) {</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB1]-&gt;<a class="code hl_variable" href="structoutput__t.html#a23bc69196fed4d0e4924453a11e182bd">value</a> = pins[33].oavalue;</div>
<div class="line">        <a class="code hl_variable" href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">output_ids</a>[O_RB1]-&gt;<a class="code hl_variable" href="structoutput__t.html#aa91b1205a6823abba2269f91bb87863d">update</a> = 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register the board in PICSimLab</span></div>
<div class="line">board_init(BOARD_x_Name, <a class="code hl_class" href="classcboard__x.html">cboard_x</a>);</div>
<div class="ttc" id="aclass_c_oscilloscope_html_a4455bcb15a36ee7a8f2e8a6c2befea9e"><div class="ttname"><a href="class_c_oscilloscope.html#a4455bcb15a36ee7a8f2e8a6c2befea9e">COscilloscope::SetSample</a></div><div class="ttdeci">void SetSample(void)</div><div class="ttdoc">Sample and update oscilloscope data aquisition.</div><div class="ttdef"><b>Definition</b> oscilloscope.cc:63</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_a077c76d5582e27431d8dceda7ff08d2f"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#a077c76d5582e27431d8dceda7ff08d2f">CPICSimLab::SetMcuRst</a></div><div class="ttdeci">void SetMcuRst(int pr)</div><div class="ttdoc">Set mcu rst flag (inform simulator about mcu reset state)</div><div class="ttdef"><b>Definition</b> picsimlab.h:122</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_a17031743eb40a15b9ed14272f6187f18"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#a17031743eb40a15b9ed14272f6187f18">CPICSimLab::GetMcuRst</a></div><div class="ttdeci">int GetMcuRst(void)</div><div class="ttdoc">Retunr if microcontroller reset pin is enabled.</div><div class="ttdef"><b>Definition</b> picsimlab.h:102</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_a9c6f3626c3818890de8b8d8f758cdca6"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#a9c6f3626c3818890de8b8d8f758cdca6">CPICSimLab::SetMcuPwr</a></div><div class="ttdeci">void SetMcuPwr(int pp)</div><div class="ttdoc">Set the power status of microcontroller ON/OFF.</div><div class="ttdef"><b>Definition</b> picsimlab.h:109</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_abe7b589c0de06036c5b167e815af9498"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#abe7b589c0de06036c5b167e815af9498">CPICSimLab::GetMcuPwr</a></div><div class="ttdeci">int GetMcuPwr(void)</div><div class="ttdoc">Return actual power status of microcontroller ON/OFF.</div><div class="ttdef"><b>Definition</b> picsimlab.h:97</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_ae7593e716065463586ba688d1d39d3c4"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#ae7593e716065463586ba688d1d39d3c4">CPICSimLab::GetJUMPSTEPS</a></div><div class="ttdeci">int GetJUMPSTEPS(void)</div><div class="ttdoc">Get the number of steps to be skipped in board update.</div><div class="ttdef"><b>Definition</b> picsimlab.h:84</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_aeae1956b61d48261081fc1b2bf339017"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#aeae1956b61d48261081fc1b2bf339017">CPICSimLab::GetBoard</a></div><div class="ttdeci">board * GetBoard(void)</div><div class="ttdoc">Return a pointer to board object.</div><div class="ttdef"><b>Definition</b> picsimlab.h:90</div></div>
<div class="ttc" id="aclass_c_p_i_c_sim_lab_html_af51368feda52c27ca672b7c7eab7319f"><div class="ttname"><a href="class_c_p_i_c_sim_lab.html#af51368feda52c27ca672b7c7eab7319f">CPICSimLab::SavePrefs</a></div><div class="ttdeci">void SavePrefs(std::string name, std::string value)</div><div class="ttdoc">Save the preferences.</div><div class="ttdef"><b>Definition</b> picsimlab.cc:253</div></div>
<div class="ttc" id="aclass_c_spare_parts_html_a3c9d0706b999f36f96de45530f097724"><div class="ttname"><a href="class_c_spare_parts.html#a3c9d0706b999f36f96de45530f097724">CSpareParts::Process</a></div><div class="ttdeci">void Process(void)</div><div class="ttdoc">Execute the process code of spare parts N times (where N is the number of steps in 100ms)</div><div class="ttdef"><b>Definition</b> spareparts.cc:548</div></div>
<div class="ttc" id="aclass_c_spare_parts_html_adf2184d88f05dfb8d880c2c08473d0b8"><div class="ttname"><a href="class_c_spare_parts.html#adf2184d88f05dfb8d880c2c08473d0b8">CSpareParts::PostProcess</a></div><div class="ttdeci">void PostProcess(void)</div><div class="ttdoc">Execute the post process code of spare parts one time per 100ms.</div><div class="ttdef"><b>Definition</b> spareparts.cc:568</div></div>
<div class="ttc" id="aclass_c_spare_parts_html_aeb04eb62a248ea4f07e83d8752baf96f"><div class="ttname"><a href="class_c_spare_parts.html#aeb04eb62a248ea4f07e83d8752baf96f">CSpareParts::PreProcess</a></div><div class="ttdeci">void PreProcess(void)</div><div class="ttdoc">Execute the pre process code of spare parts one time per 100ms.</div><div class="ttdef"><b>Definition</b> spareparts.cc:523</div></div>
<div class="ttc" id="aclassboard_html_a0a6913bec3a1496007e51eb1c84e3a39"><div class="ttname"><a href="classboard.html#a0a6913bec3a1496007e51eb1c84e3a39">board::output</a></div><div class="ttdeci">output_t output[MAX_IDS]</div><div class="ttdoc">output map elements</div><div class="ttdef"><b>Definition</b> board.h:694</div></div>
<div class="ttc" id="aclassboard_html_a112ae48766ff45fd7ddf88b246825509"><div class="ttname"><a href="classboard.html#a112ae48766ff45fd7ddf88b246825509">board::input_ids</a></div><div class="ttdeci">input_t * input_ids[MAX_IDS]</div><div class="ttdoc">input map elements by id order</div><div class="ttdef"><b>Definition</b> board.h:693</div></div>
<div class="ttc" id="aclassboard_html_a1f5dedbf50d1ebd86af96429a4a3d180"><div class="ttname"><a href="classboard.html#a1f5dedbf50d1ebd86af96429a4a3d180">board::use_oscope</a></div><div class="ttdeci">int use_oscope</div><div class="ttdoc">use oscilloscope window</div><div class="ttdef"><b>Definition</b> board.h:698</div></div>
<div class="ttc" id="aclassboard_html_a2c5a0def304361ca54f770b2cd9520fd"><div class="ttname"><a href="classboard.html#a2c5a0def304361ca54f770b2cd9520fd">board::MGetInstClockFreq</a></div><div class="ttdeci">virtual float MGetInstClockFreq(void)=0</div><div class="ttdoc">board microcontroller get cpu internal clock (in PIC frequency/4)</div></div>
<div class="ttc" id="aclassboard_html_a4baf2e6e854e2c46eac9104b82ed4d66"><div class="ttname"><a href="classboard.html#a4baf2e6e854e2c46eac9104b82ed4d66">board::InstCounterInc</a></div><div class="ttdeci">void InstCounterInc(void)</div><div class="ttdoc">Increment the Intructions Counter.</div><div class="ttdef"><b>Definition</b> board.cc:402</div></div>
<div class="ttc" id="aclassboard_html_a52d4e88ddf5f29d1648ea94dafbf87de"><div class="ttname"><a href="classboard.html#a52d4e88ddf5f29d1648ea94dafbf87de">board::outputc</a></div><div class="ttdeci">int outputc</div><div class="ttdoc">output map elements counter</div><div class="ttdef"><b>Definition</b> board.h:697</div></div>
<div class="ttc" id="aclassboard_html_a67b4914bb614698b6b00bdc07cbcb95b"><div class="ttname"><a href="classboard.html#a67b4914bb614698b6b00bdc07cbcb95b">board::output_ids</a></div><div class="ttdeci">output_t * output_ids[MAX_IDS]</div><div class="ttdoc">output map elements by id order</div><div class="ttdef"><b>Definition</b> board.h:695</div></div>
<div class="ttc" id="aclassboard_html_a7a851447b6b05b5f600cb587aae0c778"><div class="ttname"><a href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">board::p_RST</a></div><div class="ttdeci">unsigned char p_RST</div><div class="ttdoc">board /RESET pin state</div><div class="ttdef"><b>Definition</b> board.h:700</div></div>
<div class="ttc" id="aclassboard_html_a8263f81e92db703ec57c319e7785fc74"><div class="ttname"><a href="classboard.html#a8263f81e92db703ec57c319e7785fc74">board::input</a></div><div class="ttdeci">input_t input[MAX_IDS]</div><div class="ttdoc">input map elements</div><div class="ttdef"><b>Definition</b> board.h:692</div></div>
<div class="ttc" id="aclassboard_html_ac41e7f65ae979416dd133853774e206e"><div class="ttname"><a href="classboard.html#ac41e7f65ae979416dd133853774e206e">board::use_spare</a></div><div class="ttdeci">int use_spare</div><div class="ttdoc">use spare parts window</div><div class="ttdef"><b>Definition</b> board.h:699</div></div>
<div class="ttc" id="aclassboard_html_ad9f8dc51eeea817a22d9ffec01c1f0c2"><div class="ttname"><a href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">board::inputc</a></div><div class="ttdeci">int inputc</div><div class="ttdoc">input map elements counter</div><div class="ttdef"><b>Definition</b> board.h:696</div></div>
<div class="ttc" id="aclassboard_html_aec4781344e8ceebccdc6ac543a04ce15"><div class="ttname"><a href="classboard.html#aec4781344e8ceebccdc6ac543a04ce15">board::ReadMaps</a></div><div class="ttdeci">void ReadMaps(void)</div><div class="ttdoc">Read maps.</div><div class="ttdef"><b>Definition</b> board.cc:61</div></div>
<div class="ttc" id="aclassboard_html_afd891fba5b6023fcc2704717dec484ec"><div class="ttname"><a href="classboard.html#afd891fba5b6023fcc2704717dec484ec">board::Proc</a></div><div class="ttdeci">std::string Proc</div><div class="ttdoc">Name of processor in use.</div><div class="ttdef"><b>Definition</b> board.h:690</div></div>
<div class="ttc" id="aclassbsim__picsim_html_a1292f439e9d10fa0d6c934b9394e4da8"><div class="ttname"><a href="classbsim__picsim.html#a1292f439e9d10fa0d6c934b9394e4da8">bsim_picsim::MGetPinCount</a></div><div class="ttdeci">int MGetPinCount(void) override</div><div class="ttdoc">board microcontroller pin count</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:149</div></div>
<div class="ttc" id="aclassbsim__picsim_html_a2254afa80b8a239297a27dac5d9950cd"><div class="ttname"><a href="classbsim__picsim.html#a2254afa80b8a239297a27dac5d9950cd">bsim_picsim::MSetAPin</a></div><div class="ttdeci">void MSetAPin(int pin, float value) override</div><div class="ttdoc">board microcontroller set analog pin</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:174</div></div>
<div class="ttc" id="aclassbsim__picsim_html_a4a2b619f9a83fdcf4e237db794e2a47c"><div class="ttname"><a href="classbsim__picsim.html#a4a2b619f9a83fdcf4e237db794e2a47c">bsim_picsim::MSetPin</a></div><div class="ttdeci">void MSetPin(int pin, unsigned char value) override</div><div class="ttdoc">board microcontroller set digital pin</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:162</div></div>
<div class="ttc" id="aclassbsim__picsim_html_a723ff508206680107bcfcfb711562d9c"><div class="ttname"><a href="classbsim__picsim.html#a723ff508206680107bcfcfb711562d9c">bsim_picsim::MSetPinOAV</a></div><div class="ttdeci">void MSetPinOAV(int pin, float value) override</div><div class="ttdoc">board microcontroller set digital pin output average value</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:170</div></div>
<div class="ttc" id="aclassbsim__picsim_html_a771e1c03ab778acae76004ba2340cb72"><div class="ttname"><a href="classbsim__picsim.html#a771e1c03ab778acae76004ba2340cb72">bsim_picsim::MGetResetPin</a></div><div class="ttdeci">int MGetResetPin(void) override</div><div class="ttdoc">Get the Reset pin of microcontroller.</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:203</div></div>
<div class="ttc" id="aclassbsim__picsim_html_ab650e99646909a5c379f5bc90bd36c3d"><div class="ttname"><a href="classbsim__picsim.html#ab650e99646909a5c379f5bc90bd36c3d">bsim_picsim::MGetPinsValues</a></div><div class="ttdeci">const picpin * MGetPinsValues(void) override</div><div class="ttdoc">board microcontroller get all pins list struct</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:182</div></div>
<div class="ttc" id="aclassbsim__picsim_html_aca8e96408f27a2c90b28b0b8fe0a0ad9"><div class="ttname"><a href="classbsim__picsim.html#aca8e96408f27a2c90b28b0b8fe0a0ad9">bsim_picsim::MGetPinOAVPtr</a></div><div class="ttdeci">float * MGetPinOAVPtr(int pin) override</div><div class="ttdoc">board microcontroller get pointer to digital pin average value</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:186</div></div>
<div class="ttc" id="aclassbsim__picsim_html_ad1f08d0a2a2e9ee9398faa300db9eeae"><div class="ttname"><a href="classbsim__picsim.html#ad1f08d0a2a2e9ee9398faa300db9eeae">bsim_picsim::MStep</a></div><div class="ttdeci">void MStep(void) override</div><div class="ttdoc">board microcontroller run one step</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:190</div></div>
<div class="ttc" id="aclassbsim__picsim_html_ad202eb58507e7f72715b636c7c5b6262"><div class="ttname"><a href="classbsim__picsim.html#ad202eb58507e7f72715b636c7c5b6262">bsim_picsim::MClearIOUpdated</a></div><div class="ttdeci">void MClearIOUpdated(void) override</div><div class="ttdoc">clear microcontroler status IO updated</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:211</div></div>
<div class="ttc" id="aclassbsim__picsim_html_add60f508df2921813a8f686c2accadd8"><div class="ttname"><a href="classbsim__picsim.html#add60f508df2921813a8f686c2accadd8">bsim_picsim::MGetIOUpdated</a></div><div class="ttdeci">int MGetIOUpdated(void) override</div><div class="ttdoc">get microcontroler status IO updated</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:207</div></div>
<div class="ttc" id="aclassbsim__picsim_html_af1c79adb0ee61952daf1791ea8c0b071"><div class="ttname"><a href="classbsim__picsim.html#af1c79adb0ee61952daf1791ea8c0b071">bsim_picsim::MReset</a></div><div class="ttdeci">int MReset(int flags) override</div><div class="ttdoc">board microcontroller reset</div><div class="ttdef"><b>Definition</b> bsim_picsim.cc:199</div></div>
<div class="ttc" id="astructinput__t_html_a7a312dba32cd784ba2673747b24cd24c"><div class="ttname"><a href="structinput__t.html#a7a312dba32cd784ba2673747b24cd24c">input_t::update</a></div><div class="ttdeci">unsigned char * update</div><div class="ttdoc">output need draw update</div><div class="ttdef"><b>Definition</b> board.h:56</div></div>
<div class="ttc" id="astructinput__t_html_aa159507da56a667157c4ce6b4930b44a"><div class="ttname"><a href="structinput__t.html#aa159507da56a667157c4ce6b4930b44a">input_t::x1</a></div><div class="ttdeci">float x1</div><div class="ttdoc">x1 position</div><div class="ttdef"><b>Definition</b> board.h:47</div></div>
<div class="ttc" id="astructinput__t_html_aa46e9709c149cb3cdc28825ba28fb7ed"><div class="ttname"><a href="structinput__t.html#aa46e9709c149cb3cdc28825ba28fb7ed">input_t::status</a></div><div class="ttdeci">void * status</div><div class="ttdoc">rcontrol status</div><div class="ttdef"><b>Definition</b> board.h:55</div></div>
<div class="ttc" id="astructoutput__t_html_ac18979fb819695066bbba318fd652ee2"><div class="ttname"><a href="structoutput__t.html#ac18979fb819695066bbba318fd652ee2">output_t::cx</a></div><div class="ttdeci">float cx</div><div class="ttdoc">center x position</div><div class="ttdef"><b>Definition</b> board.h:73</div></div>
<div class="ttc" id="astructoutput__t_html_addda931aa862010662d5dd65146c73f7"><div class="ttname"><a href="structoutput__t.html#addda931aa862010662d5dd65146c73f7">output_t::cy</a></div><div class="ttdeci">float cy</div><div class="ttdoc">center y position</div><div class="ttdef"><b>Definition</b> board.h:74</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
