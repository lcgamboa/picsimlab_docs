<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PICSimLab - Programmable IC Simulator Laboratory: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="picsimlab.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PICSimLab - Programmable IC Simulator Laboratory
   &#160;<span id="projectnumber">0.8.6</span>
   </div>
   <div id="projectbrief">PICSimLab - API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>This is the documentation to explain the use of picsimlab internal classes.</p>
<p>The main objective of this domentation is to enable the expansion of the simulator with the creation of new boards (<a class="el" href="classboard.html">board</a>) and parts (<a class="el" href="classpart.html">part</a>).</p>
<h1><a class="anchor" id="partex"></a>
Part example</h1>
<h2><a class="anchor" id="pinc"></a>
part_servo.h</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICsimLab - PIC laboratory simulator</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2010-2020  Luis Claudio Gamb√¥a Lopes</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef PART_SERVO_H</span></div>
<div class="line"><span class="preprocessor">#define PART_SERVO_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include&lt;lxrad.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include&quot;part.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code" href="classcpart__servo.html">cpart_servo</a>:<span class="keyword">public</span> <a class="code" href="classpart.html">part</a></div>
<div class="line">{</div>
<div class="line">   <span class="keyword">public</span>:</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#a1a35aaaa0d3db766ec46a85e5b062c5f">GetName</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;Servo motor&quot;</span>);};</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#af9556126690aebb4f41cd052a6cda653">GetHelpURL</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;Servo_Motor.html&quot;</span>);};</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#ac50b965f3eb11dcbfd79b89f9d761430">GetAboutInfo</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;L.C. Gamboa \n &lt;lcgamboa@yahoo.com&gt;&quot;</span>);};      </div>
<div class="line">      </div>
<div class="line">      <a class="code" href="classcpart__servo.html#a38f5b70c1f63626da3951a5ce57bc16f">cpart_servo</a>(<span class="keywordtype">unsigned</span> x, <span class="keywordtype">unsigned</span> y);</div>
<div class="line">     </div>
<div class="line">      <a class="code" href="classcpart__servo.html#aec280c6ce5b18601e15231a2f3622e6a">~cpart_servo</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      </div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#a67baf5e61954a20b1ad32ba7be306c1e">Draw</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#a1c2781c42883239cefa14500d62ac0f6">Process</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#a7de5f3cc0db6e79fbeb70cc75b07b616">GetPictureFileName</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;servo/servo_motor.png&quot;</span>);};</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#a0490d05f09099616ed9eae8e218920c2">GetInputMapFile</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;servo/servo_motor_i.map&quot;</span>);};</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#a02a89ec2cf11ef7657a7dbd7bc29608a">GetOutputMapFile</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;servo/servo_motor_o.map&quot;</span>);};</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#a7d2348e3840d33f480dabcc7e101135f">GetPropertiesWindowFile</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;servo/servo_motor.lxrad&quot;</span>);};</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#a43b803f5191ced277e7c55168c298d94">ConfigurePropertiesWindow</a>(CPWindow *  WProp);</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#a5f9ce011dbeb829625b4c919271bbf22">ReadPropertiesWindow</a>(CPWindow * WProp);</div>
<div class="line">      lxString <a class="code" href="classcpart__servo.html#a2ae2bc599536d6f74d87dba3755edc49">WritePreferences</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#a875e6a5517d3ed433267e0ab6a17a5c7">ReadPreferences</a>(lxString value);</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#a897c9a5c22af22f890a436965ddf346b">SetOrientation</a>(<span class="keywordtype">int</span> <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classcpart__servo.html#a43d2e87e94cdbe6fb792ef8e2b70d60f">get_in_id</a>(<span class="keywordtype">char</span> * name);</div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classcpart__servo.html#a42d93bfacf8c184948a8de24883991c1">get_out_id</a>(<span class="keywordtype">char</span> * name);</div>
<div class="line">    <span class="keyword">private</span>: </div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcpart__servo.html#ab67293719c30afce65256578bfcbdace">RegisterRemoteControl</a>(<span class="keywordtype">void</span>);          </div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a>; </div>
<div class="line">      lxBitmap * <a class="code" href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">BackGround</a>;   </div>
<div class="line">      <span class="keywordtype">float</span> <a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a>;             </div>
<div class="line">      <span class="keywordtype">float</span> <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>;            </div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[2];    </div>
<div class="line">      <span class="keywordtype">int</span> <a class="code" href="classcpart__servo.html#a143b73817ed78ff25408bd0eec5f4755">time</a>;                </div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">/* PART_SERVO */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="ttc" id="aclasscpart__servo_html"><div class="ttname"><a href="classcpart__servo.html">cpart_servo</a></div><div class="ttdoc">servo motor part class</div><div class="ttdef"><b>Definition:</b> part_servo.h:38</div></div>
<div class="ttc" id="aclasscpart__servo_html_a02a89ec2cf11ef7657a7dbd7bc29608a"><div class="ttname"><a href="classcpart__servo.html#a02a89ec2cf11ef7657a7dbd7bc29608a">cpart_servo::GetOutputMapFile</a></div><div class="ttdeci">lxString GetOutputMapFile(void)</div><div class="ttdoc">Return the filename of part picture output map.</div><div class="ttdef"><b>Definition:</b> part_servo.h:60</div></div>
<div class="ttc" id="aclasscpart__servo_html_a0490d05f09099616ed9eae8e218920c2"><div class="ttname"><a href="classcpart__servo.html#a0490d05f09099616ed9eae8e218920c2">cpart_servo::GetInputMapFile</a></div><div class="ttdeci">lxString GetInputMapFile(void)</div><div class="ttdoc">Return the filename of part picture input map.</div><div class="ttdef"><b>Definition:</b> part_servo.h:59</div></div>
<div class="ttc" id="aclasscpart__servo_html_a0af2e1168aeb456ba1f6a0a1511c1019"><div class="ttname"><a href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">cpart_servo::angle</a></div><div class="ttdeci">float angle</div><div class="ttdoc">angle of shaft</div><div class="ttdef"><b>Definition:</b> part_servo.h:73</div></div>
<div class="ttc" id="aclasscpart__servo_html_a143b73817ed78ff25408bd0eec5f4755"><div class="ttname"><a href="classcpart__servo.html#a143b73817ed78ff25408bd0eec5f4755">cpart_servo::time</a></div><div class="ttdeci">int time</div><div class="ttdoc">pulse time</div><div class="ttdef"><b>Definition:</b> part_servo.h:76</div></div>
<div class="ttc" id="aclasscpart__servo_html_a1a35aaaa0d3db766ec46a85e5b062c5f"><div class="ttname"><a href="classcpart__servo.html#a1a35aaaa0d3db766ec46a85e5b062c5f">cpart_servo::GetName</a></div><div class="ttdeci">lxString GetName(void)</div><div class="ttdoc">Return the name of part.</div><div class="ttdef"><b>Definition:</b> part_servo.h:40</div></div>
<div class="ttc" id="aclasscpart__servo_html_a1c2781c42883239cefa14500d62ac0f6"><div class="ttname"><a href="classcpart__servo.html#a1c2781c42883239cefa14500d62ac0f6">cpart_servo::Process</a></div><div class="ttdeci">void Process(void)</div><div class="ttdoc">Called every CPU step.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:123</div></div>
<div class="ttc" id="aclasscpart__servo_html_a22893b0e5a587b655f947d0450964303"><div class="ttname"><a href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">cpart_servo::angle_</a></div><div class="ttdeci">float angle_</div><div class="ttdoc">old angle of shaft</div><div class="ttdef"><b>Definition:</b> part_servo.h:74</div></div>
<div class="ttc" id="aclasscpart__servo_html_a2ae2bc599536d6f74d87dba3755edc49"><div class="ttname"><a href="classcpart__servo.html#a2ae2bc599536d6f74d87dba3755edc49">cpart_servo::WritePreferences</a></div><div class="ttdeci">lxString WritePreferences(void)</div><div class="ttdoc">Called to save part preferences in configuration file.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:169</div></div>
<div class="ttc" id="aclasscpart__servo_html_a38f5b70c1f63626da3951a5ce57bc16f"><div class="ttname"><a href="classcpart__servo.html#a38f5b70c1f63626da3951a5ce57bc16f">cpart_servo::cpart_servo</a></div><div class="ttdeci">cpart_servo(unsigned x, unsigned y)</div><div class="ttdoc">constructor called once on part creation</div><div class="ttdef"><b>Definition:</b> part_servo.cc:37</div></div>
<div class="ttc" id="aclasscpart__servo_html_a42d93bfacf8c184948a8de24883991c1"><div class="ttname"><a href="classcpart__servo.html#a42d93bfacf8c184948a8de24883991c1">cpart_servo::get_out_id</a></div><div class="ttdeci">unsigned short get_out_id(char *name)</div><div class="ttdoc">return the output ids numbers of names used in output map</div><div class="ttdef"><b>Definition:</b> part_servo.cc:158</div></div>
<div class="ttc" id="aclasscpart__servo_html_a43b803f5191ced277e7c55168c298d94"><div class="ttname"><a href="classcpart__servo.html#a43b803f5191ced277e7c55168c298d94">cpart_servo::ConfigurePropertiesWindow</a></div><div class="ttdeci">void ConfigurePropertiesWindow(CPWindow *WProp)</div><div class="ttdoc">Called to configure the properties window.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:201</div></div>
<div class="ttc" id="aclasscpart__servo_html_a43d2e87e94cdbe6fb792ef8e2b70d60f"><div class="ttname"><a href="classcpart__servo.html#a43d2e87e94cdbe6fb792ef8e2b70d60f">cpart_servo::get_in_id</a></div><div class="ttdeci">unsigned short get_in_id(char *name)</div><div class="ttdoc">return the input ids numbers of names used in input map</div><div class="ttdef"><b>Definition:</b> part_servo.cc:151</div></div>
<div class="ttc" id="aclasscpart__servo_html_a5f9ce011dbeb829625b4c919271bbf22"><div class="ttname"><a href="classcpart__servo.html#a5f9ce011dbeb829625b4c919271bbf22">cpart_servo::ReadPropertiesWindow</a></div><div class="ttdeci">void ReadPropertiesWindow(CPWindow *WProp)</div><div class="ttdoc">Called when properties window close.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:223</div></div>
<div class="ttc" id="aclasscpart__servo_html_a67baf5e61954a20b1ad32ba7be306c1e"><div class="ttname"><a href="classcpart__servo.html#a67baf5e61954a20b1ad32ba7be306c1e">cpart_servo::Draw</a></div><div class="ttdeci">void Draw(void)</div><div class="ttdoc">Called ever 100ms to draw part.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:71</div></div>
<div class="ttc" id="aclasscpart__servo_html_a7d2348e3840d33f480dabcc7e101135f"><div class="ttname"><a href="classcpart__servo.html#a7d2348e3840d33f480dabcc7e101135f">cpart_servo::GetPropertiesWindowFile</a></div><div class="ttdeci">lxString GetPropertiesWindowFile(void)</div><div class="ttdoc">Return the filename of properties window XML file.</div><div class="ttdef"><b>Definition:</b> part_servo.h:61</div></div>
<div class="ttc" id="aclasscpart__servo_html_a7de5f3cc0db6e79fbeb70cc75b07b616"><div class="ttname"><a href="classcpart__servo.html#a7de5f3cc0db6e79fbeb70cc75b07b616">cpart_servo::GetPictureFileName</a></div><div class="ttdeci">lxString GetPictureFileName(void)</div><div class="ttdoc">Return the filename of part picture.</div><div class="ttdef"><b>Definition:</b> part_servo.h:58</div></div>
<div class="ttc" id="aclasscpart__servo_html_a840063c98f8a8635554d9f8a1e297181"><div class="ttname"><a href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">cpart_servo::in_</a></div><div class="ttdeci">unsigned char in_[2]</div><div class="ttdoc">input pin memory</div><div class="ttdef"><b>Definition:</b> part_servo.h:75</div></div>
<div class="ttc" id="aclasscpart__servo_html_a875e6a5517d3ed433267e0ab6a17a5c7"><div class="ttname"><a href="classcpart__servo.html#a875e6a5517d3ed433267e0ab6a17a5c7">cpart_servo::ReadPreferences</a></div><div class="ttdeci">void ReadPreferences(lxString value)</div><div class="ttdoc">Called whe configuration file load preferences.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:179</div></div>
<div class="ttc" id="aclasscpart__servo_html_a897c9a5c22af22f890a436965ddf346b"><div class="ttname"><a href="classcpart__servo.html#a897c9a5c22af22f890a436965ddf346b">cpart_servo::SetOrientation</a></div><div class="ttdeci">void SetOrientation(int orientation)</div><div class="ttdoc">Set the orientation to draw.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:230</div></div>
<div class="ttc" id="aclasscpart__servo_html_a9b4c8f6557bae63ba5645c4aeb31a519"><div class="ttname"><a href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">cpart_servo::BackGround</a></div><div class="ttdeci">lxBitmap * BackGround</div><div class="ttdoc">Background image.</div><div class="ttdef"><b>Definition:</b> part_servo.h:72</div></div>
<div class="ttc" id="aclasscpart__servo_html_ab67293719c30afce65256578bfcbdace"><div class="ttname"><a href="classcpart__servo.html#ab67293719c30afce65256578bfcbdace">cpart_servo::RegisterRemoteControl</a></div><div class="ttdeci">void RegisterRemoteControl(void)</div><div class="ttdoc">Register remote control variables.</div><div class="ttdef"><b>Definition:</b> part_servo.cc:187</div></div>
<div class="ttc" id="aclasscpart__servo_html_ac50b965f3eb11dcbfd79b89f9d761430"><div class="ttname"><a href="classcpart__servo.html#ac50b965f3eb11dcbfd79b89f9d761430">cpart_servo::GetAboutInfo</a></div><div class="ttdeci">lxString GetAboutInfo(void)</div><div class="ttdoc">Return the about information of part.</div><div class="ttdef"><b>Definition:</b> part_servo.h:42</div></div>
<div class="ttc" id="aclasscpart__servo_html_ac943dc8cf327494608d6540db5349760"><div class="ttname"><a href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">cpart_servo::input_pin</a></div><div class="ttdeci">unsigned char input_pin</div><div class="ttdoc">pulse input pin</div><div class="ttdef"><b>Definition:</b> part_servo.h:71</div></div>
<div class="ttc" id="aclasscpart__servo_html_aec280c6ce5b18601e15231a2f3622e6a"><div class="ttname"><a href="classcpart__servo.html#aec280c6ce5b18601e15231a2f3622e6a">cpart_servo::~cpart_servo</a></div><div class="ttdeci">~cpart_servo(void)</div><div class="ttdoc">destructor called once on part destruction</div><div class="ttdef"><b>Definition:</b> part_servo.cc:63</div></div>
<div class="ttc" id="aclasscpart__servo_html_af9556126690aebb4f41cd052a6cda653"><div class="ttname"><a href="classcpart__servo.html#af9556126690aebb4f41cd052a6cda653">cpart_servo::GetHelpURL</a></div><div class="ttdeci">lxString GetHelpURL(void)</div><div class="ttdoc">Return the help url of part.</div><div class="ttdef"><b>Definition:</b> part_servo.h:41</div></div>
<div class="ttc" id="aclasspart_html"><div class="ttname"><a href="classpart.html">part</a></div><div class="ttdoc">PART class.</div><div class="ttdef"><b>Definition:</b> part.h:36</div></div>
<div class="ttc" id="aclasspart_html_ad7f30a7bd565613b93364f7f187ad596"><div class="ttname"><a href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">part::orientation</a></div><div class="ttdeci">int orientation</div><div class="ttdoc">orientation to draw part</div><div class="ttdef"><b>Definition:</b> part.h:320</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="pcode"></a>
part_servo.cc</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICsimLab - PIC laboratory simulator</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2010-2020  Luis Claudio Gamb√¥a Lopes</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include&quot;../picsimlab1.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include&quot;../picsimlab4.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include&quot;../picsimlab5.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include&quot;part_servo.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* outputs */</span></div>
<div class="line"><span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line"> O_P1, O_AXIS</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classcpart__servo.html#a38f5b70c1f63626da3951a5ce57bc16f">cpart_servo::cpart_servo</a> (<span class="keywordtype">unsigned</span> x, <span class="keywordtype">unsigned</span> y)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="classpart.html#ac7d242f29bf318a8d103be1feda7340c">X</a> = x;</div>
<div class="line"> <a class="code" href="classpart.html#a2a61f1d2127b6397a4b2fb76495b1451">Y</a> = y;</div>
<div class="line"> <a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a> = 0;</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> = 0;</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a> = 0;</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[0] = 0;</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[1] = 0;</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a143b73817ed78ff25408bd0eec5f4755">time</a> = 0;</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a1870d9498f0aae89f3c239b7fa8aaee4">ReadMaps</a> ();</div>
<div class="line"> </div>
<div class="line"> lxImage image(&amp;Window5);</div>
<div class="line"> image.LoadFile (Window1.<a class="code" href="class_c_p_window1.html#a5ac98dc50ff5f47fd05ebd534d80d1f0">GetSharePath</a> () + lxT (<span class="stringliteral">&quot;parts/&quot;</span>) + <a class="code" href="classcpart__servo.html#a7de5f3cc0db6e79fbeb70cc75b07b616">GetPictureFileName</a> (), <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a5edfdd836fc264f0e1047d002e4e7e18">Bitmap</a> = lxGetBitmapRotated(&amp;image, &amp;Window5, <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line"> image.Destroy ();</div>
<div class="line"> </div>
<div class="line"> image.LoadFile (Window1.<a class="code" href="class_c_p_window1.html#a5ac98dc50ff5f47fd05ebd534d80d1f0">GetSharePath</a> () + lxT (<span class="stringliteral">&quot;parts/&quot;</span>) + <a class="code" href="classcpart__servo.html#a7de5f3cc0db6e79fbeb70cc75b07b616">GetPictureFileName</a> (), <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">BackGround</a> = lxGetBitmapRotated(&amp;image, &amp;Window5, <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line"> image.Destroy ();</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.Create (Window5.GetWWidget (), <a class="code" href="classpart.html#a5edfdd836fc264f0e1047d002e4e7e18">Bitmap</a>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classcpart__servo.html#aec280c6ce5b18601e15231a2f3622e6a">cpart_servo::~cpart_servo</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="keyword">delete</span> <a class="code" href="classpart.html#a5edfdd836fc264f0e1047d002e4e7e18">Bitmap</a>;</div>
<div class="line"> <span class="keyword">delete</span> <a class="code" href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">BackGround</a>;</div>
<div class="line"> <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.Destroy();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a67baf5e61954a20b1ad32ba7be306c1e">cpart_servo::Draw</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.SetBitmap (<a class="code" href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">BackGround</a>, 1.0, 1.0);</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> &gt; <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>)</div>
<div class="line">  {</div>
<div class="line">   <a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> -= 0.2;</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> &lt; <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>) <a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> = <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> &lt; <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>)</div>
<div class="line">  {</div>
<div class="line">   <a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> += 0.2;</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> &gt; <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>) <a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a> = <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.Init (1.0, 1.0, <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line"> </div>
<div class="line"> lxFont font (9, lxFONTFAMILY_TELETYPE, lxFONTSTYLE_NORMAL, lxFONTWEIGHT_BOLD);</div>
<div class="line"> <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.SetFont (font);</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classpart.html#ac55cc5edacce49ba7abc9e4d0d1cc354">outputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].<span class="keywordtype">id</span> == O_P1)</div>
<div class="line">    {</div>
<div class="line">     <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.SetFgColor (255, 255, 255);</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a> == 0)</div>
<div class="line">      <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.RotatedText (<span class="stringliteral">&quot;NC&quot;</span>, <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].x1, <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].y1, 0);</div>
<div class="line">     <span class="keywordflow">else</span></div>
<div class="line">      <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.RotatedText (Window5.<a class="code" href="class_c_p_window5.html#a6f859826910014d1bc32d94d2130bbb9">GetPinName</a> (<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a>), <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].<a class="code" href="structoutput__t.html#a4a26c232a33f2387180a8bc0b6c078e7">x1</a>, <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].<a class="code" href="structoutput__t.html#a3ea90d25dafd4e3f279f3f541a956ffa">y1</a>, 0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].<span class="keywordtype">id</span> == O_AXIS)</div>
<div class="line">    {</div>
<div class="line">     <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.SetFgColor (255, 255, 255);</div>
<div class="line">     <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.SetLineWidth (20);</div>
<div class="line">     <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.Line (<a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].x1, <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].y1, <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].x1 + <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].r * sin (<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a>), <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].y1 - <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].r * cos (<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a>));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">canvas</a>.End ();</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a1c2781c42883239cefa14500d62ac0f6">cpart_servo::Process</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">const</span> picpin * ppins = Window5.GetPinsValues ();</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span>(<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a> == 0)<span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[1] = <a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[0];</div>
<div class="line"> <a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[0] = ppins[<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a> - 1].value;</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> ((<a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[0] == 1)&amp;&amp;(<a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[1] == 0))<span class="comment">//rise</span></div>
<div class="line">  {</div>
<div class="line">   <a class="code" href="classcpart__servo.html#a143b73817ed78ff25408bd0eec5f4755">time</a> = 0;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> ((<a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[0] == 0)&amp;&amp;(<a class="code" href="classcpart__servo.html#a840063c98f8a8635554d9f8a1e297181">in_</a>[1] == 1))<span class="comment">//low</span></div>
<div class="line">  {</div>
<div class="line">   <a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a> = ((<a class="code" href="classcpart__servo.html#a143b73817ed78ff25408bd0eec5f4755">time</a> / Window1.<a class="code" href="class_c_p_window1.html#a5293ce669d8269ef2ecf2ed54fb3eb12">GetBoard</a> ()-&gt;<a class="code" href="classboard.html#a2c5a0def304361ca54f770b2cd9520fd">MGetInstClockFreq</a> ()) - 0.0015)*3141.59265359;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a> &gt; M_PI / 2.0)<a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a> = M_PI / 2.0;</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a> &lt; -M_PI / 2.0)<a class="code" href="classcpart__servo.html#a22893b0e5a587b655f947d0450964303">angle_</a> = -M_PI / 2.0;</div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classcpart__servo.html#a143b73817ed78ff25408bd0eec5f4755">time</a>++;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a43d2e87e94cdbe6fb792ef8e2b70d60f">cpart_servo::get_in_id</a> (<span class="keywordtype">char</span> * name)</div>
<div class="line">{</div>
<div class="line"> printf (<span class="stringliteral">&quot;Erro input &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line"> <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a42d93bfacf8c184948a8de24883991c1">cpart_servo::get_out_id</a> (<span class="keywordtype">char</span> * name)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PN_1&quot;</span>) == 0)<span class="keywordflow">return</span> O_P1;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;DG_AXIS&quot;</span>) == 0)<span class="keywordflow">return</span> O_AXIS;</div>
<div class="line"> </div>
<div class="line"> printf (<span class="stringliteral">&quot;Erro output &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line"> <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">lxString</div>
<div class="line"><a class="code" href="classcpart__servo.html#a2ae2bc599536d6f74d87dba3755edc49">cpart_servo::WritePreferences</a> (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">char</span> prefs[256];</div>
<div class="line"> </div>
<div class="line"> sprintf (prefs, <span class="stringliteral">&quot;%hhu&quot;</span>, <a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a>);</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">return</span> prefs;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a875e6a5517d3ed433267e0ab6a17a5c7">cpart_servo::ReadPreferences</a> (lxString value)</div>
<div class="line">{</div>
<div class="line"> sscanf (value.c_str (), <span class="stringliteral">&quot;%hhu&quot;</span>, &amp;<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a>);</div>
<div class="line"> <a class="code" href="classcpart__servo.html#ab67293719c30afce65256578bfcbdace">RegisterRemoteControl</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#ab67293719c30afce65256578bfcbdace">cpart_servo::RegisterRemoteControl</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classpart.html#ac55cc5edacce49ba7abc9e4d0d1cc354">outputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">switch</span> (<a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].<span class="keywordtype">id</span>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> O_AXIS:</div>
<div class="line">       <a class="code" href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">output</a>[i].status = (<span class="keywordtype">void</span> *) &amp;<a class="code" href="classcpart__servo.html#a0af2e1168aeb456ba1f6a0a1511c1019">angle</a>;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a43b803f5191ced277e7c55168c298d94">cpart_servo::ConfigurePropertiesWindow</a> (CPWindow * WProp)</div>
<div class="line">{</div>
<div class="line"> lxString Items = Window5.<a class="code" href="class_c_p_window5.html#ab012f0ddc5fed1566f4b7ab53eb62be4">GetPinsNames</a> ();</div>
<div class="line"> lxString spin;</div>
<div class="line"> </div>
<div class="line"> ((CCombo*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;combo1&quot;</span>))-&gt;SetItems (Items);</div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a> == 0)</div>
<div class="line">  ((CCombo*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;combo1&quot;</span>))-&gt;SetText (<span class="stringliteral">&quot;0  NC&quot;</span>);</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">   spin = Window5.<a class="code" href="class_c_p_window5.html#a6f859826910014d1bc32d94d2130bbb9">GetPinName</a> (<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a>);</div>
<div class="line">   ((CCombo*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;combo1&quot;</span>))-&gt;SetText (itoa (<a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a>) + <span class="stringliteral">&quot;  &quot;</span> + spin);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> ((CButton*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;button1&quot;</span>))-&gt;<a class="code" href="classpart.html#ad99e90d6389a2cbbca423ec7e9371f49">EvMouseButtonRelease</a> = EVMOUSEBUTTONRELEASE &amp; CPWindow5::PropButtonRelease;</div>
<div class="line"> ((CButton*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;button1&quot;</span>))-&gt;SetTag (1);</div>
<div class="line"> </div>
<div class="line"> ((CButton*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;button2&quot;</span>))-&gt;<a class="code" href="classpart.html#ad99e90d6389a2cbbca423ec7e9371f49">EvMouseButtonRelease</a> = EVMOUSEBUTTONRELEASE &amp; CPWindow5::PropButtonRelease;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcpart__servo.html#a5f9ce011dbeb829625b4c919271bbf22">cpart_servo::ReadPropertiesWindow</a> (CPWindow * WProp)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="classcpart__servo.html#ac943dc8cf327494608d6540db5349760">input_pin</a> = atoi (((CCombo*) WProp-&gt;GetChildByName (<span class="stringliteral">&quot;combo1&quot;</span>))-&gt;GetText ());</div>
<div class="line"> <a class="code" href="classcpart__servo.html#ab67293719c30afce65256578bfcbdace">RegisterRemoteControl</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> </div>
<div class="line"><a class="code" href="classcpart__servo.html#a897c9a5c22af22f890a436965ddf346b">cpart_servo::SetOrientation</a>(<span class="keywordtype">int</span> _orientation)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">delete</span> <a class="code" href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">BackGround</a>;</div>
<div class="line"> </div>
<div class="line"> lxImage image(&amp;Window5);</div>
<div class="line"> </div>
<div class="line"> image.LoadFile (Window1.<a class="code" href="class_c_p_window1.html#a5ac98dc50ff5f47fd05ebd534d80d1f0">GetSharePath</a> () + lxT (<span class="stringliteral">&quot;parts/&quot;</span>) + <a class="code" href="classcpart__servo.html#a7de5f3cc0db6e79fbeb70cc75b07b616">GetPictureFileName</a> (), <a class="code" href="classpart.html#ad7f30a7bd565613b93364f7f187ad596">orientation</a>);</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classcpart__servo.html#a9b4c8f6557bae63ba5645c4aeb31a519">BackGround</a> = lxGetBitmapRotated(&amp;image, &amp;Window5, _orientation); </div>
<div class="line"> image.Destroy ();</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classpart.html#a2e5becd7108e8fab479a0a47a013c460">part::SetOrientation</a> (_orientation);</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Register the part in PICSimLab spare parts list</span></div>
<div class="line">part_init(<span class="stringliteral">&quot;Servo motor&quot;</span>, <a class="code" href="classcpart__servo.html">cpart_servo</a>, <span class="stringliteral">&quot;Output&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="ttc" id="aclass_c_p_window1_html_a5293ce669d8269ef2ecf2ed54fb3eb12"><div class="ttname"><a href="class_c_p_window1.html#a5293ce669d8269ef2ecf2ed54fb3eb12">CPWindow1::GetBoard</a></div><div class="ttdeci">board * GetBoard(void)</div><div class="ttdoc">Return a pointer to board object.</div><div class="ttdef"><b>Definition:</b> picsimlab1.cc:1037</div></div>
<div class="ttc" id="aclass_c_p_window1_html_a5ac98dc50ff5f47fd05ebd534d80d1f0"><div class="ttname"><a href="class_c_p_window1.html#a5ac98dc50ff5f47fd05ebd534d80d1f0">CPWindow1::GetSharePath</a></div><div class="ttdeci">lxString GetSharePath(void)</div><div class="ttdoc">Get the file path of resources.</div><div class="ttdef"><b>Definition:</b> picsimlab1.h:165</div></div>
<div class="ttc" id="aclass_c_p_window5_html_a6f859826910014d1bc32d94d2130bbb9"><div class="ttname"><a href="class_c_p_window5.html#a6f859826910014d1bc32d94d2130bbb9">CPWindow5::GetPinName</a></div><div class="ttdeci">lxString GetPinName(unsigned char pin)</div><div class="ttdoc">Return the name of one pin.</div><div class="ttdef"><b>Definition:</b> picsimlab5.cc:997</div></div>
<div class="ttc" id="aclass_c_p_window5_html_ab012f0ddc5fed1566f4b7ab53eb62be4"><div class="ttname"><a href="class_c_p_window5.html#ab012f0ddc5fed1566f4b7ab53eb62be4">CPWindow5::GetPinsNames</a></div><div class="ttdeci">lxString GetPinsNames(void)</div><div class="ttdoc">Return the name of all pins.</div><div class="ttdef"><b>Definition:</b> picsimlab5.cc:958</div></div>
<div class="ttc" id="aclassboard_html_a2c5a0def304361ca54f770b2cd9520fd"><div class="ttname"><a href="classboard.html#a2c5a0def304361ca54f770b2cd9520fd">board::MGetInstClockFreq</a></div><div class="ttdeci">virtual float MGetInstClockFreq(void)=0</div><div class="ttdoc">board microcontroller get cpu internal clock (in PIC frequency/4)</div></div>
<div class="ttc" id="aclasspart_html_a074fcb74e58bd5f199ce043a500d1c69"><div class="ttname"><a href="classpart.html#a074fcb74e58bd5f199ce043a500d1c69">part::output</a></div><div class="ttdeci">output_t output[100]</div><div class="ttdoc">output map elements</div><div class="ttdef"><b>Definition:</b> part.h:310</div></div>
<div class="ttc" id="aclasspart_html_a1870d9498f0aae89f3c239b7fa8aaee4"><div class="ttname"><a href="classpart.html#a1870d9498f0aae89f3c239b7fa8aaee4">part::ReadMaps</a></div><div class="ttdeci">void ReadMaps(void)</div><div class="ttdoc">read maps</div><div class="ttdef"><b>Definition:</b> part.cc:38</div></div>
<div class="ttc" id="aclasspart_html_a2a61f1d2127b6397a4b2fb76495b1451"><div class="ttname"><a href="classpart.html#a2a61f1d2127b6397a4b2fb76495b1451">part::Y</a></div><div class="ttdeci">int Y</div><div class="ttdoc">Y position of part.</div><div class="ttdef"><b>Definition:</b> part.h:316</div></div>
<div class="ttc" id="aclasspart_html_a2e5becd7108e8fab479a0a47a013c460"><div class="ttname"><a href="classpart.html#a2e5becd7108e8fab479a0a47a013c460">part::SetOrientation</a></div><div class="ttdeci">virtual void SetOrientation(int orientation)</div><div class="ttdoc">Set the orientation to draw.</div><div class="ttdef"><b>Definition:</b> part.cc:329</div></div>
<div class="ttc" id="aclasspart_html_a4adcfbd9da4f9e196fd7f50ce829d817"><div class="ttname"><a href="classpart.html#a4adcfbd9da4f9e196fd7f50ce829d817">part::canvas</a></div><div class="ttdeci">CCanvas canvas</div><div class="ttdoc">Internal Canvas to draw in bitmap.</div><div class="ttdef"><b>Definition:</b> part.h:318</div></div>
<div class="ttc" id="aclasspart_html_a5edfdd836fc264f0e1047d002e4e7e18"><div class="ttname"><a href="classpart.html#a5edfdd836fc264f0e1047d002e4e7e18">part::Bitmap</a></div><div class="ttdeci">lxBitmap * Bitmap</div><div class="ttdoc">Internal Bitmap</div><div class="ttdef"><b>Definition:</b> part.h:317</div></div>
<div class="ttc" id="aclasspart_html_ac55cc5edacce49ba7abc9e4d0d1cc354"><div class="ttname"><a href="classpart.html#ac55cc5edacce49ba7abc9e4d0d1cc354">part::outputc</a></div><div class="ttdeci">int outputc</div><div class="ttdoc">output map elements counter</div><div class="ttdef"><b>Definition:</b> part.h:312</div></div>
<div class="ttc" id="aclasspart_html_ac7d242f29bf318a8d103be1feda7340c"><div class="ttname"><a href="classpart.html#ac7d242f29bf318a8d103be1feda7340c">part::X</a></div><div class="ttdeci">int X</div><div class="ttdoc">X position of part.</div><div class="ttdef"><b>Definition:</b> part.h:315</div></div>
<div class="ttc" id="aclasspart_html_ad99e90d6389a2cbbca423ec7e9371f49"><div class="ttname"><a href="classpart.html#ad99e90d6389a2cbbca423ec7e9371f49">part::EvMouseButtonRelease</a></div><div class="ttdeci">virtual void EvMouseButtonRelease(uint button, uint x, uint y, uint state)</div><div class="ttdoc">Event handler on the part.</div><div class="ttdef"><b>Definition:</b> part.h:132</div></div>
<div class="ttc" id="astructoutput__t_html_a3ea90d25dafd4e3f279f3f541a956ffa"><div class="ttname"><a href="structoutput__t.html#a3ea90d25dafd4e3f279f3f541a956ffa">output_t::y1</a></div><div class="ttdeci">unsigned int y1</div><div class="ttdoc">y1 position</div><div class="ttdef"><b>Definition:</b> board.h:62</div></div>
<div class="ttc" id="astructoutput__t_html_a4a26c232a33f2387180a8bc0b6c078e7"><div class="ttname"><a href="structoutput__t.html#a4a26c232a33f2387180a8bc0b6c078e7">output_t::x1</a></div><div class="ttdeci">unsigned int x1</div><div class="ttdoc">x1 position</div><div class="ttdef"><b>Definition:</b> board.h:60</div></div>
</div><!-- fragment --><h1><a class="anchor" id="boardex"></a>
Board example</h1>
<h2><a class="anchor" id="binc"></a>
board_x.h</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICsimLab - PIC laboratory simulator</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2015-2020  Luis Claudio Gamb√¥a Lopes</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef BOARD_x_H</span></div>
<div class="line"><span class="preprocessor">#define BOARD_x_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include&lt;lxrad.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;bsim_picsim.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//new board class must be derived from board class defined in board.h</span></div>
<div class="line"><span class="keyword">class </span><a class="code" href="classcboard__x.html">cboard_x</a>:<span class="keyword">public</span> <a class="code" href="classbsim__picsim.html">bsim_picsim</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">private</span>:</div>
<div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p_BT1;           <span class="comment">//first board push button in RD0</span></div>
<div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p_BT2;           <span class="comment">//second board switch in RD1  </span></div>
<div class="line">     </div>
<div class="line">     <span class="comment">//value of potentiometer</span></div>
<div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pot1;</div>
<div class="line">     <span class="comment">//flag to control if potentiometer is active</span></div>
<div class="line">     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> active;</div>
<div class="line">     </div>
<div class="line">     <span class="comment">//controls to be added in simulator window </span></div>
<div class="line">     CGauge *gauge1;   <span class="comment">//gauge to show mean value of RB0</span></div>
<div class="line">     CGauge *gauge2;   <span class="comment">//gauge to show mean value of RB1</span></div>
<div class="line">     CLabel *label2;   <span class="comment">//label of gauge RB0</span></div>
<div class="line">     CLabel *label3;   <span class="comment">//label of gauge RB1</span></div>
<div class="line">     </div>
<div class="line">     <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#abb1999596a0882e765f1a7d0558a84ad">RegisterRemoteControl</a>(<span class="keywordtype">void</span>);  </div>
<div class="line">   <span class="keyword">public</span>:</div>
<div class="line">      <span class="comment">//Constructor called once on board creation </span></div>
<div class="line">      <a class="code" href="classcboard__x.html">cboard_x</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="comment">//Destructor called once on board destruction </span></div>
<div class="line">      ~<a class="code" href="classcboard__x.html">cboard_x</a>(<span class="keywordtype">void</span>); </div>
<div class="line">      <span class="comment">//Return the about info of board</span></div>
<div class="line">      lxString <a class="code" href="classcboard__x.html#a340a719b3c8b35b8cdf0d44cb1197319">GetAboutInfo</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;L.C. Gamboa \n &lt;lcgamboa@yahoo.com&gt;&quot;</span>);};</div>
<div class="line">      <span class="comment">//Called ever 100ms to draw board</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a5a349c545f7cd41b8f04f1b6e75620b7">Draw</a>(CDraw *draw,<span class="keywordtype">double</span> scale);</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a84da87615eacef12186e019610b407fc">Run_CPU</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="comment">//Return a list of board supported microcontrollers</span></div>
<div class="line">      lxString <a class="code" href="classcboard__x.html#ac345d0d65ddce37ed208c834777430c0">GetSupportedDevices</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;PIC16F877A,PIC18F4550,PIC18F4620,&quot;</span>);};</div>
<div class="line">      <span class="comment">//Return the filename of board picture </span></div>
<div class="line">      lxString <a class="code" href="classcboard__x.html#a41264a642420823e7e06a0bec8e0751a">GetPictureFileName</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;x/board.svg&quot;</span>);};</div>
<div class="line">      <span class="comment">//Return the filename of board picture input map </span></div>
<div class="line">      lxString <a class="code" href="classcboard__x.html#a1e98d87454e2f12645d20450bb601dae">GetInputMapFile</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;x/input.map&quot;</span>);};</div>
<div class="line">      <span class="comment">//Return the filename of board picture output map </span></div>
<div class="line">      lxString <a class="code" href="classcboard__x.html#af511a18ae64455c8fd989248bb844033">GetOutputMapFile</a>(<span class="keywordtype">void</span>){<span class="keywordflow">return</span> lxT(<span class="stringliteral">&quot;x/output.map&quot;</span>);};</div>
<div class="line">      <span class="comment">//Reset board status</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a123c6c7d672c47c24eb192d620b14bde">Reset</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="comment">//Event on the board</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#aeca24c97cafc120f6e293faa0e877fda">EvMouseButtonPress</a>(uint button, uint x, uint y,uint state);</div>
<div class="line">      <span class="comment">//Event on the board</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a0d8811cf02dd7638f25f151e278eaafe">EvMouseButtonRelease</a>(uint button, uint x, uint y,uint state);</div>
<div class="line">      <span class="comment">//Event on the board</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a10ee7f6090b28326392e4516d02b08f7">EvMouseMove</a>(uint button, uint x, uint y, uint state);</div>
<div class="line">      <span class="comment">//Event on the board</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a4ec35f699502dc726d0d127f9fda8bb1">EvKeyPress</a>(uint key,uint mask);</div>
<div class="line">      <span class="comment">//Event on the board</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#af6cb57797d9e100a624d3029c509d0bc">EvKeyRelease</a>(uint key,uint mask);</div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a783c1167e8b6085af3892bc82c6b3692">EvOnShow</a>(<span class="keywordtype">void</span>){};</div>
<div class="line">      <span class="comment">//Called ever 1s to refresh status</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#ad4162cf2a32b56e7023d23252593d4c4">RefreshStatus</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="comment">//Called to save board preferences in configuration file</span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#a1a8ef6de897499136d5d6220b2e7a25f">WritePreferences</a>(<span class="keywordtype">void</span>);</div>
<div class="line">      <span class="comment">//Called whe configuration file load  preferences </span></div>
<div class="line">      <span class="keywordtype">void</span> <a class="code" href="classcboard__x.html#ae7380c58afef71f5c38fab0174f2d70d">ReadPreferences</a>(<span class="keywordtype">char</span> *name,<span class="keywordtype">char</span> *value);</div>
<div class="line">      <span class="comment">//return the input ids numbers of names used in input map</span></div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classcboard__x.html#af22b7401d801dc22ca407acd9d1d2367">get_in_id</a>(<span class="keywordtype">char</span> * name);</div>
<div class="line">      <span class="comment">//return the output ids numbers of names used in output map</span></div>
<div class="line">      <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classcboard__x.html#a253842be321749318a561d88b559773d">get_out_id</a>(<span class="keywordtype">char</span> * name);</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">/* BOARD_x_H */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="ttc" id="aclassbsim__picsim_html"><div class="ttname"><a href="classbsim__picsim.html">bsim_picsim</a></div><div class="ttdef"><b>Definition:</b> bsim_picsim.h:34</div></div>
<div class="ttc" id="aclasscboard__x_html"><div class="ttname"><a href="classcboard__x.html">cboard_x</a></div><div class="ttdef"><b>Definition:</b> board_x.h:35</div></div>
<div class="ttc" id="aclasscboard__x_html_a0d8811cf02dd7638f25f151e278eaafe"><div class="ttname"><a href="classcboard__x.html#a0d8811cf02dd7638f25f151e278eaafe">cboard_x::EvMouseButtonRelease</a></div><div class="ttdeci">void EvMouseButtonRelease(uint button, uint x, uint y, uint state)</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition:</b> board_x.cc:446</div></div>
<div class="ttc" id="aclasscboard__x_html_a10ee7f6090b28326392e4516d02b08f7"><div class="ttname"><a href="classcboard__x.html#a10ee7f6090b28326392e4516d02b08f7">cboard_x::EvMouseMove</a></div><div class="ttdeci">void EvMouseMove(uint button, uint x, uint y, uint state)</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition:</b> board_x.cc:421</div></div>
<div class="ttc" id="aclasscboard__x_html_a123c6c7d672c47c24eb192d620b14bde"><div class="ttname"><a href="classcboard__x.html#a123c6c7d672c47c24eb192d620b14bde">cboard_x::Reset</a></div><div class="ttdeci">void Reset(void)</div><div class="ttdoc">Reset board status.</div><div class="ttdef"><b>Definition:</b> board_x.cc:177</div></div>
<div class="ttc" id="aclasscboard__x_html_a1a8ef6de897499136d5d6220b2e7a25f"><div class="ttname"><a href="classcboard__x.html#a1a8ef6de897499136d5d6220b2e7a25f">cboard_x::WritePreferences</a></div><div class="ttdeci">void WritePreferences(void)</div><div class="ttdoc">Called to save board preferences in configuration file.</div><div class="ttdef"><b>Definition:</b> board_x.cc:273</div></div>
<div class="ttc" id="aclasscboard__x_html_a1e98d87454e2f12645d20450bb601dae"><div class="ttname"><a href="classcboard__x.html#a1e98d87454e2f12645d20450bb601dae">cboard_x::GetInputMapFile</a></div><div class="ttdeci">lxString GetInputMapFile(void)</div><div class="ttdoc">Return the filename of board picture input map.</div><div class="ttdef"><b>Definition:</b> board_x.h:67</div></div>
<div class="ttc" id="aclasscboard__x_html_a253842be321749318a561d88b559773d"><div class="ttname"><a href="classcboard__x.html#a253842be321749318a561d88b559773d">cboard_x::get_out_id</a></div><div class="ttdeci">unsigned short get_out_id(char *name)</div><div class="ttdoc">return the output ids numbers of names used in output map</div><div class="ttdef"><b>Definition:</b> board_x.cc:77</div></div>
<div class="ttc" id="aclasscboard__x_html_a340a719b3c8b35b8cdf0d44cb1197319"><div class="ttname"><a href="classcboard__x.html#a340a719b3c8b35b8cdf0d44cb1197319">cboard_x::GetAboutInfo</a></div><div class="ttdeci">lxString GetAboutInfo(void)</div><div class="ttdoc">Return the about information of part.</div><div class="ttdef"><b>Definition:</b> board_x.h:58</div></div>
<div class="ttc" id="aclasscboard__x_html_a41264a642420823e7e06a0bec8e0751a"><div class="ttname"><a href="classcboard__x.html#a41264a642420823e7e06a0bec8e0751a">cboard_x::GetPictureFileName</a></div><div class="ttdeci">lxString GetPictureFileName(void)</div><div class="ttdoc">Return the filename of board picture</div><div class="ttdef"><b>Definition:</b> board_x.h:65</div></div>
<div class="ttc" id="aclasscboard__x_html_a4ec35f699502dc726d0d127f9fda8bb1"><div class="ttname"><a href="classcboard__x.html#a4ec35f699502dc726d0d127f9fda8bb1">cboard_x::EvKeyPress</a></div><div class="ttdeci">void EvKeyPress(uint key, uint mask)</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition:</b> board_x.cc:320</div></div>
<div class="ttc" id="aclasscboard__x_html_a5a349c545f7cd41b8f04f1b6e75620b7"><div class="ttname"><a href="classcboard__x.html#a5a349c545f7cd41b8f04f1b6e75620b7">cboard_x::Draw</a></div><div class="ttdeci">void Draw(CDraw *draw, double scale)</div><div class="ttdoc">Called ever 100ms to draw board.</div><div class="ttdef"><b>Definition:</b> board_x.cc:492</div></div>
<div class="ttc" id="aclasscboard__x_html_a783c1167e8b6085af3892bc82c6b3692"><div class="ttname"><a href="classcboard__x.html#a783c1167e8b6085af3892bc82c6b3692">cboard_x::EvOnShow</a></div><div class="ttdeci">void EvOnShow(void)</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition:</b> board_x.h:82</div></div>
<div class="ttc" id="aclasscboard__x_html_a84da87615eacef12186e019610b407fc"><div class="ttname"><a href="classcboard__x.html#a84da87615eacef12186e019610b407fc">cboard_x::Run_CPU</a></div><div class="ttdeci">void Run_CPU(void)</div><div class="ttdoc">Paralle thread called ever 100ms to run cpu code.</div><div class="ttdef"><b>Definition:</b> board_x.cc:633</div></div>
<div class="ttc" id="aclasscboard__x_html_abb1999596a0882e765f1a7d0558a84ad"><div class="ttname"><a href="classcboard__x.html#abb1999596a0882e765f1a7d0558a84ad">cboard_x::RegisterRemoteControl</a></div><div class="ttdeci">void RegisterRemoteControl(void)</div><div class="ttdoc">Register remote control variables.</div><div class="ttdef"><b>Definition:</b> board_x.cc:211</div></div>
<div class="ttc" id="aclasscboard__x_html_ac345d0d65ddce37ed208c834777430c0"><div class="ttname"><a href="classcboard__x.html#ac345d0d65ddce37ed208c834777430c0">cboard_x::GetSupportedDevices</a></div><div class="ttdeci">lxString GetSupportedDevices(void)</div><div class="ttdoc">Return a list of supported microcontrollers.</div><div class="ttdef"><b>Definition:</b> board_x.h:63</div></div>
<div class="ttc" id="aclasscboard__x_html_ad4162cf2a32b56e7023d23252593d4c4"><div class="ttname"><a href="classcboard__x.html#ad4162cf2a32b56e7023d23252593d4c4">cboard_x::RefreshStatus</a></div><div class="ttdeci">void RefreshStatus(void)</div><div class="ttdoc">Called ever 1s to refresh status.</div><div class="ttdef"><b>Definition:</b> board_x.cc:252</div></div>
<div class="ttc" id="aclasscboard__x_html_ae7380c58afef71f5c38fab0174f2d70d"><div class="ttname"><a href="classcboard__x.html#ae7380c58afef71f5c38fab0174f2d70d">cboard_x::ReadPreferences</a></div><div class="ttdeci">void ReadPreferences(char *name, char *value)</div><div class="ttdoc">Called whe configuration file load preferences.</div><div class="ttdef"><b>Definition:</b> board_x.cc:288</div></div>
<div class="ttc" id="aclasscboard__x_html_aeca24c97cafc120f6e293faa0e877fda"><div class="ttname"><a href="classcboard__x.html#aeca24c97cafc120f6e293faa0e877fda">cboard_x::EvMouseButtonPress</a></div><div class="ttdeci">void EvMouseButtonPress(uint button, uint x, uint y, uint state)</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition:</b> board_x.cc:352</div></div>
<div class="ttc" id="aclasscboard__x_html_af22b7401d801dc22ca407acd9d1d2367"><div class="ttname"><a href="classcboard__x.html#af22b7401d801dc22ca407acd9d1d2367">cboard_x::get_in_id</a></div><div class="ttdeci">unsigned short get_in_id(char *name)</div><div class="ttdoc">return the input ids numbers of names used in input map</div><div class="ttdef"><b>Definition:</b> board_x.cc:61</div></div>
<div class="ttc" id="aclasscboard__x_html_af511a18ae64455c8fd989248bb844033"><div class="ttname"><a href="classcboard__x.html#af511a18ae64455c8fd989248bb844033">cboard_x::GetOutputMapFile</a></div><div class="ttdeci">lxString GetOutputMapFile(void)</div><div class="ttdoc">Return the filename of board picture output map.</div><div class="ttdef"><b>Definition:</b> board_x.h:69</div></div>
<div class="ttc" id="aclasscboard__x_html_af6cb57797d9e100a624d3029c509d0bc"><div class="ttname"><a href="classcboard__x.html#af6cb57797d9e100a624d3029c509d0bc">cboard_x::EvKeyRelease</a></div><div class="ttdeci">void EvKeyRelease(uint key, uint mask)</div><div class="ttdoc">Event on the board.</div><div class="ttdef"><b>Definition:</b> board_x.cc:339</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="bcode"></a>
board_x.cc</h2>
<div class="fragment"><div class="line"><span class="comment">/* ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   PICsimLab - PIC laboratory simulator</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   ########################################################################</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   Copyright (c) : 2015-2020  Luis Claudio Gamb√¥a Lopes</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment">   the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><span class="comment">   any later version.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment">   along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment">   Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">   For e-mail suggestions :  lcgamboa@yahoo.com</span></div>
<div class="line"><span class="comment">   ######################################################################## */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//include files</span></div>
<div class="line"><span class="preprocessor">#include&quot;../picsimlab1.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include&quot;../picsimlab4.h&quot;</span> <span class="comment">//Oscilloscope</span></div>
<div class="line"><span class="preprocessor">#include&quot;../picsimlab5.h&quot;</span> <span class="comment">//Spare Parts</span></div>
<div class="line"><span class="preprocessor">#include&quot;board_x.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* ids of inputs of input map*/</span></div>
<div class="line"><span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line"> I_POT1, <span class="comment">//potentiometer   </span></div>
<div class="line"> I_ICSP, <span class="comment">//ICSP connector</span></div>
<div class="line"> I_PWR, <span class="comment">//Power button</span></div>
<div class="line"> I_RST, <span class="comment">//Reset button</span></div>
<div class="line"> I_D0, <span class="comment">//RD0 push button</span></div>
<div class="line"> I_D1 <span class="comment">//RD1 switch</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* ids of outputs of output map*/</span></div>
<div class="line"><span class="keyword">enum</span></div>
<div class="line">{</div>
<div class="line"> O_POT1, <span class="comment">//potentiometer  </span></div>
<div class="line"> O_RST, <span class="comment">//Reset button</span></div>
<div class="line"> O_SD1, <span class="comment">//switch position (On/Off)</span></div>
<div class="line"> O_LD0, <span class="comment">//LED on RD0 push button</span></div>
<div class="line"> O_LD1, <span class="comment">//LED on RD1 switch</span></div>
<div class="line"> O_LPWR, <span class="comment">//Power LED</span></div>
<div class="line"> O_RB0, <span class="comment">//LED on RB0 output</span></div>
<div class="line"> O_RB1, <span class="comment">//LED on RB1 output</span></div>
<div class="line"> O_BD0, <span class="comment">//RD1 switch     </span></div>
<div class="line"> O_CPU <span class="comment">//CPU name</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">//return the input ids numbers of names used in input map</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line"><a class="code" href="classcboard__x.html#af22b7401d801dc22ca407acd9d1d2367">cboard_x::get_in_id</a>(<span class="keywordtype">char</span> * name)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PG_ICSP&quot;</span>) == 0)<span class="keywordflow">return</span> I_ICSP;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;SW_PWR&quot;</span>) == 0)<span class="keywordflow">return</span> I_PWR;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PB_RST&quot;</span>) == 0)<span class="keywordflow">return</span> I_RST;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PB_D0&quot;</span>) == 0)<span class="keywordflow">return</span> I_D0;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;SW_D1&quot;</span>) == 0)<span class="keywordflow">return</span> I_D1;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PO_1&quot;</span>) == 0)<span class="keywordflow">return</span> I_POT1;</div>
<div class="line"> </div>
<div class="line"> printf (<span class="stringliteral">&quot;Error input &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line"> <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//return the output ids numbers of names used in output map</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">short</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a253842be321749318a561d88b559773d">cboard_x::get_out_id</a>(<span class="keywordtype">char</span> * name)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;SW_D1&quot;</span>) == 0)<span class="keywordflow">return</span> O_SD1;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;LD_LD0&quot;</span>) == 0)<span class="keywordflow">return</span> O_LD0;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;LD_LD1&quot;</span>) == 0)<span class="keywordflow">return</span> O_LD1;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;LD_LPWR&quot;</span>) == 0)<span class="keywordflow">return</span> O_LPWR;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;LD_RB1&quot;</span>) == 0)<span class="keywordflow">return</span> O_RB1;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;LD_RB0&quot;</span>) == 0)<span class="keywordflow">return</span> O_RB0;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PB_D0&quot;</span>) == 0)<span class="keywordflow">return</span> O_BD0;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PO_1&quot;</span>) == 0)<span class="keywordflow">return</span> O_POT1;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;PB_RST&quot;</span>) == 0)<span class="keywordflow">return</span> O_RST;</div>
<div class="line"> <span class="keywordflow">if</span> (strcmp (name, <span class="stringliteral">&quot;MP_CPU&quot;</span>) == 0)<span class="keywordflow">return</span> O_CPU;</div>
<div class="line"> </div>
<div class="line"> printf (<span class="stringliteral">&quot;Error output &#39;%s&#39; don&#39;t have a valid id! \n&quot;</span>, name);</div>
<div class="line"> <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Constructor called once on board creation </span></div>
<div class="line"> </div>
<div class="line">cboard_x::cboard_x(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="classboard.html#a92f1e7588769e3cbc7cc0667c1bf3b8c">Proc</a> = <span class="stringliteral">&quot;PIC18F4550&quot;</span>; <span class="comment">//default microcontroller if none defined in preferences</span></div>
<div class="line"> <a class="code" href="classboard.html#aec4781344e8ceebccdc6ac543a04ce15">ReadMaps</a> (); <span class="comment">//Read input and output board maps</span></div>
<div class="line"> </div>
<div class="line"> pot1 = 100;</div>
<div class="line"> </div>
<div class="line"> active = 0;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//controls properties and creation</span></div>
<div class="line"> <span class="comment">//gauge1</span></div>
<div class="line"> gauge1 = <span class="keyword">new</span> CGauge ();</div>
<div class="line"> gauge1-&gt;SetFOwner (&amp;Window1);</div>
<div class="line"> gauge1-&gt;SetName (lxT (<span class="stringliteral">&quot;gauge1_px&quot;</span>));</div>
<div class="line"> gauge1-&gt;SetX (13);</div>
<div class="line"> gauge1-&gt;SetY (382 - 160);</div>
<div class="line"> gauge1-&gt;SetWidth (140);</div>
<div class="line"> gauge1-&gt;SetHeight (20);</div>
<div class="line"> gauge1-&gt;SetEnable (1);</div>
<div class="line"> gauge1-&gt;SetVisible (1);</div>
<div class="line"> gauge1-&gt;SetRange (100);</div>
<div class="line"> gauge1-&gt;SetValue (0);</div>
<div class="line"> gauge1-&gt;SetType (4);</div>
<div class="line"> Window1.CreateChild (gauge1);</div>
<div class="line"> <span class="comment">//gauge2</span></div>
<div class="line"> gauge2 = <span class="keyword">new</span> CGauge ();</div>
<div class="line"> gauge2-&gt;SetFOwner (&amp;Window1);</div>
<div class="line"> gauge2-&gt;SetName (lxT (<span class="stringliteral">&quot;gauge2_px&quot;</span>));</div>
<div class="line"> gauge2-&gt;SetX (12);</div>
<div class="line"> gauge2-&gt;SetY (330 - 160);</div>
<div class="line"> gauge2-&gt;SetWidth (140);</div>
<div class="line"> gauge2-&gt;SetHeight (20);</div>
<div class="line"> gauge2-&gt;SetEnable (1);</div>
<div class="line"> gauge2-&gt;SetVisible (1);</div>
<div class="line"> gauge2-&gt;SetRange (100);</div>
<div class="line"> gauge2-&gt;SetValue (0);</div>
<div class="line"> gauge2-&gt;SetType (4);</div>
<div class="line"> Window1.CreateChild (gauge2);</div>
<div class="line"> <span class="comment">//label2</span></div>
<div class="line"> label2 = <span class="keyword">new</span> CLabel ();</div>
<div class="line"> label2-&gt;SetFOwner (&amp;Window1);</div>
<div class="line"> label2-&gt;SetName (lxT (<span class="stringliteral">&quot;label2_px&quot;</span>));</div>
<div class="line"> label2-&gt;SetX (12);</div>
<div class="line"> label2-&gt;SetY (306 - 160);</div>
<div class="line"> label2-&gt;SetWidth (60);</div>
<div class="line"> label2-&gt;SetHeight (20);</div>
<div class="line"> label2-&gt;SetEnable (1);</div>
<div class="line"> label2-&gt;SetVisible (1);</div>
<div class="line"> label2-&gt;SetText (lxT (<span class="stringliteral">&quot;RB0&quot;</span>));</div>
<div class="line"> label2-&gt;SetAlign (1);</div>
<div class="line"> Window1.CreateChild (label2);</div>
<div class="line"> <span class="comment">//label3</span></div>
<div class="line"> label3 = <span class="keyword">new</span> CLabel ();</div>
<div class="line"> label3-&gt;SetFOwner (&amp;Window1);</div>
<div class="line"> label3-&gt;SetName (lxT (<span class="stringliteral">&quot;label3_px&quot;</span>));</div>
<div class="line"> label3-&gt;SetX (13);</div>
<div class="line"> label3-&gt;SetY (357 - 160);</div>
<div class="line"> label3-&gt;SetWidth (60);</div>
<div class="line"> label3-&gt;SetHeight (20);</div>
<div class="line"> label3-&gt;SetEnable (1);</div>
<div class="line"> label3-&gt;SetVisible (1);</div>
<div class="line"> label3-&gt;SetText (lxT (<span class="stringliteral">&quot;RB1&quot;</span>));</div>
<div class="line"> label3-&gt;SetAlign (1);</div>
<div class="line"> Window1.CreateChild (label3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Destructor called once on board destruction </span></div>
<div class="line"> </div>
<div class="line">cboard_x::~cboard_x(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">//controls destruction </span></div>
<div class="line"> Window1.DestroyChild (gauge1);</div>
<div class="line"> Window1.DestroyChild (gauge2);</div>
<div class="line"> Window1.DestroyChild (label2);</div>
<div class="line"> Window1.DestroyChild (label3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Reset board status</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a123c6c7d672c47c24eb192d620b14bde">cboard_x::Reset</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> pic_reset (1);</div>
<div class="line"> </div>
<div class="line"> p_BT1 = 1; <span class="comment">//set push button  in default state (high) </span></div>
<div class="line"> </div>
<div class="line"> <span class="comment">//write button state to pic pin 19 (RD0)</span></div>
<div class="line"> pic_set_pin (19, p_BT1);</div>
<div class="line"> <span class="comment">//write switch state to pic pin 20 (RD1)</span></div>
<div class="line"> pic_set_pin (20, p_BT2);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> <span class="comment">//verify serial port state and refresh status bar  </span></div>
<div class="line"><span class="preprocessor">#ifndef _WIN_</span></div>
<div class="line"> <span class="keywordflow">if</span> (pic.serial[0].serialfd &gt; 0)</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"> <span class="keywordflow">if</span> (pic.serial[0].serialfd != INVALID_HANDLE_VALUE)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  Window1.statusbar1.SetField (2, lxT (<span class="stringliteral">&quot;Serial: &quot;</span>) +</div>
<div class="line">                               lxString::FromAscii (SERIALDEVICE) + lxT (<span class="stringliteral">&quot;:&quot;</span>) + itoa (pic.serial[0].serialbaud) + lxT (<span class="stringliteral">&quot;(&quot;</span>) +</div>
<div class="line">                               lxString ().Format (<span class="stringliteral">&quot;%4.1f&quot;</span>, fabs ((100.0 * pic.serial[0].serialexbaud - 100.0 *</div>
<div class="line">                                                                   pic.serial[0].serialbaud) / pic.serial[0].serialexbaud)) + lxT (<span class="stringliteral">&quot;%)&quot;</span>));</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">  Window1.statusbar1.SetField (2, lxT (<span class="stringliteral">&quot;Serial: &quot;</span>) +</div>
<div class="line">                               lxString::FromAscii (SERIALDEVICE) + lxT (<span class="stringliteral">&quot; (ERROR)&quot;</span>));</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)Window5.<a class="code" href="class_c_p_window5.html#a371988205dfdb7dbb05150751c505f4a">Reset</a> ();</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="classcboard__x.html#abb1999596a0882e765f1a7d0558a84ad">RegisterRemoteControl</a> ();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Register variables to be controled by remote control</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#abb1999596a0882e765f1a7d0558a84ad">cboard_x::RegisterRemoteControl</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">switch</span> (<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].<span class="keywordtype">id</span>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> I_D0:</div>
<div class="line">     <a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].status = &amp;p_BT1;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> I_D1:</div>
<div class="line">     <a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].status = &amp;p_BT2;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> I_POT1:</div>
<div class="line">     <a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].status = &amp;pot1;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classboard.html#a52d4e88ddf5f29d1648ea94dafbf87de">outputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">switch</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> O_RB0:</div>
<div class="line">     <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].status = &amp;pic.pins[32].oavalue;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> O_RB1:</div>
<div class="line">     <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].status = &amp;pic.pins[33].oavalue;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> O_LD0:</div>
<div class="line">     <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].status = &amp;pic.pins[18].oavalue;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> O_LD1:</div>
<div class="line">     <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].status = &amp;pic.pins[19].oavalue;</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Called ever 1s to refresh status</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#ad4162cf2a32b56e7023d23252593d4c4">cboard_x::RefreshStatus</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">//verify serial port state and refresh status bar   </span></div>
<div class="line"><span class="preprocessor">#ifndef _WIN_</span></div>
<div class="line"> <span class="keywordflow">if</span> (pic.serial[0].serialfd &gt; 0)</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"> <span class="keywordflow">if</span> (pic.serial[0].serialfd != INVALID_HANDLE_VALUE)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  Window1.statusbar1.SetField (2, lxT (<span class="stringliteral">&quot;Serial: &quot;</span>) +</div>
<div class="line">                               lxString::FromAscii (SERIALDEVICE) + lxT (<span class="stringliteral">&quot;:&quot;</span>) + itoa (pic.serial[0].serialbaud) + lxT (<span class="stringliteral">&quot;(&quot;</span>) +</div>
<div class="line">                               lxString ().Format (<span class="stringliteral">&quot;%4.1f&quot;</span>, fabs ((100.0 * pic.serial[0].serialexbaud - 100.0 *</div>
<div class="line">                                                                   pic.serial[0].serialbaud) / pic.serial[0].serialexbaud)) + lxT (<span class="stringliteral">&quot;%)&quot;</span>));</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">  Window1.statusbar1.SetField (2, lxT (<span class="stringliteral">&quot;Serial: &quot;</span>) +</div>
<div class="line">                               lxString::FromAscii (SERIALDEVICE) + lxT (<span class="stringliteral">&quot; (ERROR)&quot;</span>));</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Called to save board preferences in configuration file</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a1a8ef6de897499136d5d6220b2e7a25f">cboard_x::WritePreferences</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">//write selected microcontroller of board_x to preferences</span></div>
<div class="line"> Window1.<a class="code" href="class_c_p_window1.html#abc98e682c927fc3071eb6da0880b795d">saveprefs</a> (lxT (<span class="stringliteral">&quot;X_proc&quot;</span>), <a class="code" href="classboard.html#a92f1e7588769e3cbc7cc0667c1bf3b8c">Proc</a>);</div>
<div class="line"> <span class="comment">//write switch state of board_x to preferences </span></div>
<div class="line"> Window1.<a class="code" href="class_c_p_window1.html#abc98e682c927fc3071eb6da0880b795d">saveprefs</a> (lxT (<span class="stringliteral">&quot;X_bt2&quot;</span>), lxString ().Format (<span class="stringliteral">&quot;%i&quot;</span>, p_BT2));</div>
<div class="line"> <span class="comment">//write microcontroller clock to preferences</span></div>
<div class="line"> Window1.<a class="code" href="class_c_p_window1.html#abc98e682c927fc3071eb6da0880b795d">saveprefs</a> (lxT (<span class="stringliteral">&quot;X_clock&quot;</span>), lxString ().Format (<span class="stringliteral">&quot;%2.1f&quot;</span>, Window1.GetClock ()));</div>
<div class="line"> <span class="comment">//write potentiometer position to preferences</span></div>
<div class="line"> Window1.<a class="code" href="class_c_p_window1.html#abc98e682c927fc3071eb6da0880b795d">saveprefs</a> (lxT (<span class="stringliteral">&quot;X_pot1&quot;</span>), lxString ().Format (<span class="stringliteral">&quot;%i&quot;</span>, pot1));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Called whe configuration file load  preferences </span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#ae7380c58afef71f5c38fab0174f2d70d">cboard_x::ReadPreferences</a>(<span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> *value)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">//read switch state of board_x of preferences </span></div>
<div class="line"> <span class="keywordflow">if</span> (!strcmp (name, <span class="stringliteral">&quot;X_bt2&quot;</span>))</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">if</span> (value[0] == <span class="charliteral">&#39;0&#39;</span>)</div>
<div class="line">    p_BT2 = 0;</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">    p_BT2 = 1;</div>
<div class="line">  }</div>
<div class="line"> <span class="comment">//read microcontroller of preferences</span></div>
<div class="line"> <span class="keywordflow">if</span> (!strcmp (name, <span class="stringliteral">&quot;X_proc&quot;</span>))</div>
<div class="line">  {</div>
<div class="line">   <a class="code" href="classboard.html#a92f1e7588769e3cbc7cc0667c1bf3b8c">Proc</a> = value;</div>
<div class="line">  }</div>
<div class="line"> <span class="comment">//read microcontroller clock</span></div>
<div class="line"> <span class="keywordflow">if</span> (!strcmp (name, <span class="stringliteral">&quot;X_clock&quot;</span>))</div>
<div class="line">  {</div>
<div class="line">   Window1.SetClock (atof (value));</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//read potentiometer position</span></div>
<div class="line"> <span class="keywordflow">if</span> (!strcmp (name, <span class="stringliteral">&quot;X_pot1&quot;</span>))</div>
<div class="line">  {</div>
<div class="line">   pot1 = atoi (value);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a4ec35f699502dc726d0d127f9fda8bb1">cboard_x::EvKeyPress</a>(uint key, uint mask)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">//if keyboard key 1 is pressed then activate button (state=0)   </span></div>
<div class="line"> <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;1&#39;</span>)</div>
<div class="line">  {</div>
<div class="line">   p_BT1 = 0;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//if keyboard key 2 is pressed then toggle switch state   </span></div>
<div class="line"> <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;2&#39;</span>)</div>
<div class="line">  {</div>
<div class="line">   p_BT2 ^= 1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#af6cb57797d9e100a624d3029c509d0bc">cboard_x::EvKeyRelease</a>(uint key, uint mask)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">//if keyboard key 1 is pressed then deactivate button (state=1)     </span></div>
<div class="line"> <span class="keywordflow">if</span> (key == <span class="charliteral">&#39;1&#39;</span>)</div>
<div class="line">  {</div>
<div class="line">   p_BT1 = 1;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#aeca24c97cafc120f6e293faa0e877fda">cboard_x::EvMouseButtonPress</a>(uint button, uint x, uint y, uint state)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//search for the input area which owner the event    </span></div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">if</span> (((<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].x1 &lt;= x)&amp;&amp;(<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].x2 &gt;= x))&amp;&amp;((<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].y1 &lt;= y)&amp;&amp;</div>
<div class="line">                                                  (<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].y2 &gt;= y)))</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">switch</span> (<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].<span class="keywordtype">id</span>)</div>
<div class="line">      {</div>
<div class="line">       <span class="comment">//if event is over I_ISCP area then load hex file  </span></div>
<div class="line">      <span class="keywordflow">case</span> I_ICSP:</div>
<div class="line">       Window1.menu1_File_LoadHex_EvMenuActive (NULL);</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">       <span class="comment">//if event is over I_PWR area then toggle board on/off</span></div>
<div class="line">      <span class="keywordflow">case</span> I_PWR:</div>
<div class="line">       <span class="keywordflow">if</span> (Window1.<a class="code" href="class_c_p_window1.html#af08244612c785b8acc158fbc5d95a444">Get_mcupwr</a> ()) <span class="comment">//if on turn off</span></div>
<div class="line">        {</div>
<div class="line">         Window1.<a class="code" href="class_c_p_window1.html#ae9c1fa118bae7bc54acb0eacc78c933b">Set_mcurun</a> (0);</div>
<div class="line">         Window1.<a class="code" href="class_c_p_window1.html#a8b2e0baf9fd9364d618f55dc943dc06c">Set_mcupwr</a> (0);</div>
<div class="line">         <a class="code" href="classcboard__x.html#a123c6c7d672c47c24eb192d620b14bde">Reset</a> ();</div>
<div class="line">         p_BT1 = 1;</div>
<div class="line">         Window1.statusbar1.SetField (0, lxT (<span class="stringliteral">&quot;Stoped&quot;</span>));</div>
<div class="line">        }</div>
<div class="line">       <span class="keywordflow">else</span> <span class="comment">//if off turn on</span></div>
<div class="line">        {</div>
<div class="line">         Window1.<a class="code" href="class_c_p_window1.html#a8b2e0baf9fd9364d618f55dc943dc06c">Set_mcupwr</a> (1);</div>
<div class="line">         Window1.<a class="code" href="class_c_p_window1.html#ae9c1fa118bae7bc54acb0eacc78c933b">Set_mcurun</a> (1);</div>
<div class="line">         <a class="code" href="classcboard__x.html#a123c6c7d672c47c24eb192d620b14bde">Reset</a> ();</div>
<div class="line">         Window1.statusbar1.SetField (0, lxT (<span class="stringliteral">&quot;Running...&quot;</span>));</div>
<div class="line">        }</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">       <span class="comment">//if event is over I_RST area then turn off and reset</span></div>
<div class="line">      <span class="keywordflow">case</span> I_RST:</div>
<div class="line">       <span class="keywordflow">if</span> (Window1.<a class="code" href="class_c_p_window1.html#af08244612c785b8acc158fbc5d95a444">Get_mcupwr</a> () &amp;&amp; pic_reset (-1))<span class="comment">//if powered</span></div>
<div class="line">        {</div>
<div class="line">         Window1.<a class="code" href="class_c_p_window1.html#a8b2e0baf9fd9364d618f55dc943dc06c">Set_mcupwr</a> (0);</div>
<div class="line">         Window1.Set_mcurst (1);</div>
<div class="line">        }</div>
<div class="line">       <a class="code" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a> = 0;</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">       <span class="comment">//if event is over I_D0 area then activate button (state=0) </span></div>
<div class="line">      <span class="keywordflow">case</span> I_D0:</div>
<div class="line">       p_BT1 = 0;</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">       <span class="comment">//if event is over I_D1 area then toggle switch state   </span></div>
<div class="line">      <span class="keywordflow">case</span> I_D1:</div>
<div class="line">       p_BT2 ^= 1;</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> I_POT1:</div>
<div class="line">       {</div>
<div class="line">        active = 1;</div>
<div class="line">        pot1 = (x - <a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].<a class="code" href="structinput__t.html#a1e2b92740c7fb766fb0e6a672b9bb498">x1</a>)*2.77;</div>
<div class="line">        <span class="keywordflow">if</span> (pot1 &gt; 199)pot1 = 199;</div>
<div class="line">       }</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a10ee7f6090b28326392e4516d02b08f7">cboard_x::EvMouseMove</a>(uint button, uint x, uint y, uint state)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">switch</span> (<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].<span class="keywordtype">id</span>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> I_POT1:</div>
<div class="line">     <span class="keywordflow">if</span> (((<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].x1 &lt;= x)&amp;&amp;(<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].x2 &gt;= x))&amp;&amp;((<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].y1 &lt;= y)&amp;&amp;(<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].y2 &gt;= y)))</div>
<div class="line">      {</div>
<div class="line">       <span class="keywordflow">if</span> (active)</div>
<div class="line">        {</div>
<div class="line">         pot1 = (x - <a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].<a class="code" href="structinput__t.html#a1e2b92740c7fb766fb0e6a672b9bb498">x1</a>)*2.77;</div>
<div class="line">         <span class="keywordflow">if</span> (pot1 &gt; 199)pot1 = 199;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">     <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//Event on the board</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a0d8811cf02dd7638f25f151e278eaafe">cboard_x::EvMouseButtonRelease</a>(uint button, uint x, uint y, uint state)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//search for the input area which owner the event  </span></div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">inputc</a>; i++)</div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">if</span> (((<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].x1 &lt;= x)&amp;&amp;(<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].x2 &gt;= x))&amp;&amp;((<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].y1 &lt;= y)&amp;&amp;</div>
<div class="line">                                                  (<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].y2 &gt;= y)))</div>
<div class="line">    {</div>
<div class="line">     <span class="keywordflow">switch</span> (<a class="code" href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">input</a>[i].<span class="keywordtype">id</span>)</div>
<div class="line">      {</div>
<div class="line">       <span class="comment">//if event is over I_RST area then turn on  </span></div>
<div class="line">      <span class="keywordflow">case</span> I_RST:</div>
<div class="line">       <span class="keywordflow">if</span> (Window1.<a class="code" href="class_c_p_window1.html#add73d25c4889d4e01489e335b509edb7">Get_mcurst</a> ())<span class="comment">//if powered</span></div>
<div class="line">        {</div>
<div class="line">         Window1.<a class="code" href="class_c_p_window1.html#a8b2e0baf9fd9364d618f55dc943dc06c">Set_mcupwr</a> (1);</div>
<div class="line">         Window1.Set_mcurst (0);</div>
<div class="line"> </div>
<div class="line">         <span class="keywordflow">if</span> (pic_reset (-1))</div>
<div class="line">          {</div>
<div class="line">           <a class="code" href="classcboard__x.html#a123c6c7d672c47c24eb192d620b14bde">Reset</a> ();</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">       <a class="code" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a> = 1;</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">       <span class="comment">//if event is over I_D0 area then deactivate button (state=1) </span></div>
<div class="line">      <span class="keywordflow">case</span> I_D0:</div>
<div class="line">       p_BT1 = 1;</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> I_POT1:</div>
<div class="line">       {</div>
<div class="line">        active = 0;</div>
<div class="line">       }</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//Called ever 100ms to draw board</span></div>
<div class="line"><span class="comment">//This is the critical code for simulator running speed</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a5a349c545f7cd41b8f04f1b6e75620b7">cboard_x::Draw</a>(CDraw *draw, <span class="keywordtype">double</span> scale)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line"> draw-&gt;Canvas.Init (scale, scale); <span class="comment">//initialize draw context</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment">//board_x draw </span></div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classboard.html#a52d4e88ddf5f29d1648ea94dafbf87de">outputc</a>; i++) <span class="comment">//run over all outputs</span></div>
<div class="line">  {</div>
<div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].r)<span class="comment">//if output shape is a rectangle</span></div>
<div class="line">    {</div>
<div class="line">     <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span> == O_SD1)<span class="comment">//if output is switch</span></div>
<div class="line">      {</div>
<div class="line">       <span class="comment">//draw a background white rectangle   </span></div>
<div class="line">       draw-&gt;Canvas.SetBgColor (255, 255, 255);</div>
<div class="line">       draw-&gt;Canvas.Rectangle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1,</div>
<div class="line">                               <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1);</div>
<div class="line"> </div>
<div class="line">       <span class="keywordflow">if</span> (!p_BT2) <span class="comment">//draw switch off</span></div>
<div class="line">        {</div>
<div class="line">         <span class="comment">//draw a grey rectangle  </span></div>
<div class="line">         draw-&gt;Canvas.SetBgColor (70, 70, 70);</div>
<div class="line">         draw-&gt;Canvas.Rectangle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1 +</div>
<div class="line">                                 ((<span class="keywordtype">int</span>) ((<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1)*0.35)), <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1,</div>
<div class="line">                                 (<span class="keywordtype">int</span>) ((<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1)*0.65));</div>
<div class="line">        }</div>
<div class="line">       <span class="keywordflow">else</span> <span class="comment">//draw switch on</span></div>
<div class="line">        {</div>
<div class="line">         <span class="comment">//draw a grey rectangle  </span></div>
<div class="line">         draw-&gt;Canvas.SetBgColor (70, 70, 70);</div>
<div class="line">         draw-&gt;Canvas.Rectangle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1,</div>
<div class="line">                                 <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1,</div>
<div class="line">                                 (<span class="keywordtype">int</span>) ((<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1)*0.65));</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span> == O_BD0)</div>
<div class="line">      {</div>
<div class="line">       draw-&gt;Canvas.SetColor (102, 102, 102);</div>
<div class="line">       draw-&gt;Canvas.Circle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cx, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cy, 10);</div>
<div class="line">       <span class="keywordflow">if</span> (p_BT1)</div>
<div class="line">        {</div>
<div class="line">         draw-&gt;Canvas.SetColor (15, 15, 15);</div>
<div class="line">        }</div>
<div class="line">       <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">         draw-&gt;Canvas.SetColor (55, 55, 55);</div>
<div class="line">        }</div>
<div class="line">       draw-&gt;Canvas.Circle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cx, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cy, 8);</div>
<div class="line">      }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span> == O_RST)</div>
<div class="line">      {</div>
<div class="line">       draw-&gt;Canvas.SetColor (102, 102, 102);</div>
<div class="line">       draw-&gt;Canvas.Circle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cx, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cy, 10);</div>
<div class="line"> </div>
<div class="line">       <span class="keywordflow">if</span> (<a class="code" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a>)</div>
<div class="line">        {</div>
<div class="line">         draw-&gt;Canvas.SetColor (15, 15, 15);</div>
<div class="line">        }</div>
<div class="line">       <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">         draw-&gt;Canvas.SetColor (55, 55, 55);</div>
<div class="line">        }</div>
<div class="line">       draw-&gt;Canvas.Circle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cx, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].cy, 8);</div>
<div class="line">      }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span> == O_POT1)</div>
<div class="line">      {</div>
<div class="line">       draw-&gt;Canvas.SetColor (0, 50, 215);</div>
<div class="line">       draw-&gt;Canvas.Rectangle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1);</div>
<div class="line">       draw-&gt;Canvas.SetColor (250, 250, 250);</div>
<div class="line">       draw-&gt;Canvas.Rectangle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1 + pot1 / 2.77, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1 + 2, 10, 15);</div>
<div class="line">      }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span> == O_CPU)</div>
<div class="line">      {</div>
<div class="line"> </div>
<div class="line">       <span class="comment">//lxFont font ((MGetPinCount () &gt;= 100) ? 9 : ((MGetPinCount () &gt; 14) ? 12 : 10)</span></div>
<div class="line">       <span class="comment">//            , lxFONTFAMILY_TELETYPE, lxFONTSTYLE_NORMAL, lxFONTWEIGHT_NORMAL);</span></div>
<div class="line">       <span class="comment">//draw-&gt;Canvas.SetFont (font);</span></div>
<div class="line">       <span class="keywordtype">int</span> x, y, w, h;</div>
<div class="line">       draw-&gt;Canvas.SetColor (26, 26, 26);</div>
<div class="line">       draw-&gt;Canvas.Rectangle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y2 - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1);</div>
<div class="line"> </div>
<div class="line">       draw-&gt;Canvas.SetColor (200, 200, 200);</div>
<div class="line">       w = <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<a class="code" href="structoutput__t.html#a62355ce1deb5d7a3a7955b5bb25ac26c">x2</a> - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<a class="code" href="structoutput__t.html#a4a26c232a33f2387180a8bc0b6c078e7">x1</a>;</div>
<div class="line">       h = <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<a class="code" href="structoutput__t.html#aabca51d7095f7ba0b654cbcfea9cd6b7">y2</a> - <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<a class="code" href="structoutput__t.html#aabca51d7095f7ba0b654cbcfea9cd6b7">y2</a>;</div>
<div class="line">       x = <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<a class="code" href="structoutput__t.html#a4a26c232a33f2387180a8bc0b6c078e7">x1</a> + (w  / 2) + 7;</div>
<div class="line">       y = <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<a class="code" href="structoutput__t.html#a3ea90d25dafd4e3f279f3f541a956ffa">y1</a> + (h/2) + (<a class="code" href="classboard.html#a92f1e7588769e3cbc7cc0667c1bf3b8c">Proc</a>.length ());</div>
<div class="line">       draw-&gt;Canvas.RotatedText (<a class="code" href="classboard.html#a92f1e7588769e3cbc7cc0667c1bf3b8c">Proc</a>, x, y, 270);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="comment">//if output shape is a circle</span></div>
<div class="line">    {</div>
<div class="line">     draw-&gt;Canvas.SetFgColor (0, 0, 0); <span class="comment">//black</span></div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">switch</span> (<a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].<span class="keywordtype">id</span>)<span class="comment">//search for color of output</span></div>
<div class="line">      {</div>
<div class="line">      <span class="keywordflow">case</span> O_LD0: <span class="comment">//White using pin 19 mean value (RD0)</span></div>
<div class="line">       draw-&gt;Canvas.SetBgColor (pic.pins[18].oavalue, pic.pins[18].oavalue, pic.pins[18].oavalue);</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> O_LD1: <span class="comment">//Yelllow using pin 20 mean value (RD1)</span></div>
<div class="line">       draw-&gt;Canvas.SetBgColor (pic.pins[19].oavalue, pic.pins[19].oavalue, 0);</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> O_LPWR: <span class="comment">//Blue using mcupwr value</span></div>
<div class="line">       draw-&gt;Canvas.SetBgColor (0, 0, 200 * Window1.<a class="code" href="class_c_p_window1.html#af08244612c785b8acc158fbc5d95a444">Get_mcupwr</a> () + 55);</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> O_RB0: <span class="comment">//Green using pin 33 mean value (RB0)</span></div>
<div class="line">       draw-&gt;Canvas.SetBgColor (0, pic.pins[32].oavalue, 0);</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">case</span> O_RB1: <span class="comment">//Red using pin 34 mean value (RB1)</span></div>
<div class="line">       draw-&gt;Canvas.SetBgColor (pic.pins[33].oavalue, 0, 0);</div>
<div class="line">       <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">     <span class="comment">//draw a circle</span></div>
<div class="line">     lxColor color1 = draw-&gt;Canvas.GetBgColor ();</div>
<div class="line">     <span class="keywordtype">int</span> r = color1.Red () - 120;</div>
<div class="line">     <span class="keywordtype">int</span> g = color1.Green () - 120;</div>
<div class="line">     <span class="keywordtype">int</span> b = color1.Blue () - 120;</div>
<div class="line">     <span class="keywordflow">if</span> (r &lt; 0)r = 0;</div>
<div class="line">     <span class="keywordflow">if</span> (g &lt; 0)g = 0;</div>
<div class="line">     <span class="keywordflow">if</span> (b &lt; 0)b = 0;</div>
<div class="line">     lxColor color2 (r, g, b);</div>
<div class="line">     draw-&gt;Canvas.SetBgColor (color2);</div>
<div class="line">     draw-&gt;Canvas.Circle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].r + 1);</div>
<div class="line">     draw-&gt;Canvas.SetBgColor (color1);</div>
<div class="line">     draw-&gt;Canvas.Circle (1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].x1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].y1, <a class="code" href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">output</a>[i].r - 2);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//end draw</span></div>
<div class="line"> draw-&gt;Canvas.End ();</div>
<div class="line"> draw-&gt;Update ();</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//RB0 mean value to gauge1</span></div>
<div class="line"> gauge1-&gt;SetValue ((pic.pins[33].oavalue - 55)/2);</div>
<div class="line"> <span class="comment">//RB1 mean value to gauge2</span></div>
<div class="line"> gauge2-&gt;SetValue ((pic.pins[32].oavalue - 55)/2);</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line"><a class="code" href="classcboard__x.html#a84da87615eacef12186e019610b407fc">cboard_x::Run_CPU</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> i;</div>
<div class="line"> <span class="keywordtype">int</span> j;</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pi;</div>
<div class="line"> <span class="keyword">const</span> picpin * pins;</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alm[40];</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> JUMPSTEPS = Window1.<a class="code" href="class_c_p_window1.html#a003a0f87f554fef0aff246adc7b3c82d">GetJUMPSTEPS</a> (); <span class="comment">//number of steps skipped</span></div>
<div class="line"> <span class="keywordtype">long</span> <span class="keywordtype">int</span> NSTEP = Window1.GetNSTEP () / <a class="code" href="classbsim__picsim.html#aecec611827d34618579fb87641f97997">MGetPinCount</a> (); <span class="comment">//number of steps in 100ms</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> <span class="comment">//reset pins mean value</span></div>
<div class="line"> memset (alm, 0, 40 * <span class="keyword">sizeof</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>));</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//read pic.pins to a local variable to speed up </span></div>
<div class="line"> pins = pic.pins;</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//Spare parts window pre process</span></div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)Window5.<a class="code" href="class_c_p_window5.html#a02d69b9e32726649eaa1c325e2b7af70">PreProcess</a> ();</div>
<div class="line"> </div>
<div class="line"> j = JUMPSTEPS; <span class="comment">//step counter</span></div>
<div class="line"> <span class="keywordflow">if</span> (Window1.<a class="code" href="class_c_p_window1.html#af08244612c785b8acc158fbc5d95a444">Get_mcupwr</a> ()) <span class="comment">//if powered</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; Window1.GetNSTEP (); i++) <span class="comment">//repeat for number of steps in 100ms</span></div>
<div class="line">   {</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (j &gt;= JUMPSTEPS)<span class="comment">//if number of step is bigger than steps to skip </span></div>
<div class="line">     {</div>
<div class="line">      pic_set_pin (pic.mclr, <a class="code" href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">p_RST</a>);</div>
<div class="line">      pic_set_pin (19, p_BT1); <span class="comment">//Set pin 19 (RD0) with button state </span></div>
<div class="line">      pic_set_pin (20, p_BT2); <span class="comment">//Set pin 20 (RD1) with switch state </span></div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//verify if a breakpoint is reached if not run one instruction </span></div>
<div class="line">    <span class="keywordflow">if</span> (!mplabxd_testbp ())pic_step ();</div>
<div class="line">    <span class="comment">//Oscilloscope window process</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classboard.html#a1f5dedbf50d1ebd86af96429a4a3d180">use_oscope</a>)Window4.<a class="code" href="class_c_p_window4.html#a3193dfdbbbd823e021fc60bdc402bfc2">SetSample</a> ();</div>
<div class="line">    <span class="comment">//Spare parts window process</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)Window5.<a class="code" href="class_c_p_window5.html#abf4a593790774e9c184e4876ed7fd1b3">Process</a> ();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//increment mean value counter if pin is high</span></div>
<div class="line">    alm[i % pic.PINCOUNT] += pins[i % pic.PINCOUNT].value;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (j &gt;= JUMPSTEPS)<span class="comment">//if number of step is bigger than steps to skip </span></div>
<div class="line">     {</div>
<div class="line"> </div>
<div class="line">      <span class="comment">//set analog pin 2 (AN0) with value from scroll  </span></div>
<div class="line">      pic_set_apin (2, (5.0 * pot1 / 199));</div>
<div class="line"> </div>
<div class="line">      j = -1; <span class="comment">//reset counter</span></div>
<div class="line">     }</div>
<div class="line">    j++; <span class="comment">//counter increment</span></div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//calculate mean value</span></div>
<div class="line"> <span class="keywordflow">for</span> (pi = 0; pi &lt; pic.PINCOUNT; pi++)</div>
<div class="line">  {</div>
<div class="line">   pic.pins[pi].oavalue = (int) (((200.0 * alm[pi]) / NSTEP) + 55);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line"> <span class="comment">//Spare parts window pre post process</span></div>
<div class="line"> <span class="keywordflow">if</span> (<a class="code" href="classboard.html#ac41e7f65ae979416dd133853774e206e">use_spare</a>)Window5.<a class="code" href="class_c_p_window5.html#a7b033d0c44a3dfc514d5506b74ad5abb">PostProcess</a> ();</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//Register the board in PICSimLab</span></div>
<div class="line">board_init(<span class="stringliteral">&quot;X&quot;</span>, <a class="code" href="classcboard__x.html">cboard_x</a>);</div>
<div class="line"> </div>
<div class="ttc" id="aclass_c_p_window1_html_a003a0f87f554fef0aff246adc7b3c82d"><div class="ttname"><a href="class_c_p_window1.html#a003a0f87f554fef0aff246adc7b3c82d">CPWindow1::GetJUMPSTEPS</a></div><div class="ttdeci">int GetJUMPSTEPS(void)</div><div class="ttdoc">Get the number of steps to be skipped in board update.</div><div class="ttdef"><b>Definition:</b> picsimlab1.h:277</div></div>
<div class="ttc" id="aclass_c_p_window1_html_a8b2e0baf9fd9364d618f55dc943dc06c"><div class="ttname"><a href="class_c_p_window1.html#a8b2e0baf9fd9364d618f55dc943dc06c">CPWindow1::Set_mcupwr</a></div><div class="ttdeci">void Set_mcupwr(int pp)</div><div class="ttdoc">Set the power status of microcontroller ON/OFF.</div><div class="ttdef"><b>Definition:</b> picsimlab1.h:230</div></div>
<div class="ttc" id="aclass_c_p_window1_html_abc98e682c927fc3071eb6da0880b795d"><div class="ttname"><a href="class_c_p_window1.html#abc98e682c927fc3071eb6da0880b795d">CPWindow1::saveprefs</a></div><div class="ttdeci">void saveprefs(lxString name, lxString value)</div><div class="ttdoc">Save the preferences.</div><div class="ttdef"><b>Definition:</b> picsimlab1.cc:637</div></div>
<div class="ttc" id="aclass_c_p_window1_html_add73d25c4889d4e01489e335b509edb7"><div class="ttname"><a href="class_c_p_window1.html#add73d25c4889d4e01489e335b509edb7">CPWindow1::Get_mcurst</a></div><div class="ttdeci">int Get_mcurst(void)</div><div class="ttdoc">Retunr if microcontroller reset pin is enabled.</div><div class="ttdef"><b>Definition:</b> picsimlab1.h:219</div></div>
<div class="ttc" id="aclass_c_p_window1_html_ae9c1fa118bae7bc54acb0eacc78c933b"><div class="ttname"><a href="class_c_p_window1.html#ae9c1fa118bae7bc54acb0eacc78c933b">CPWindow1::Set_mcurun</a></div><div class="ttdeci">void Set_mcurun(int pr)</div><div class="ttdoc">Set the run status of microcontroller Running/Stopped.</div><div class="ttdef"><b>Definition:</b> picsimlab1.h:237</div></div>
<div class="ttc" id="aclass_c_p_window1_html_af08244612c785b8acc158fbc5d95a444"><div class="ttname"><a href="class_c_p_window1.html#af08244612c785b8acc158fbc5d95a444">CPWindow1::Get_mcupwr</a></div><div class="ttdeci">int Get_mcupwr(void)</div><div class="ttdoc">Return actual power status of microcontroller ON/OFF.</div><div class="ttdef"><b>Definition:</b> picsimlab1.h:205</div></div>
<div class="ttc" id="aclass_c_p_window4_html_a3193dfdbbbd823e021fc60bdc402bfc2"><div class="ttname"><a href="class_c_p_window4.html#a3193dfdbbbd823e021fc60bdc402bfc2">CPWindow4::SetSample</a></div><div class="ttdeci">void SetSample(void)</div><div class="ttdoc">Sample and update oscilloscope data aquisition.</div><div class="ttdef"><b>Definition:</b> picsimlab4.cc:317</div></div>
<div class="ttc" id="aclass_c_p_window5_html_a02d69b9e32726649eaa1c325e2b7af70"><div class="ttname"><a href="class_c_p_window5.html#a02d69b9e32726649eaa1c325e2b7af70">CPWindow5::PreProcess</a></div><div class="ttdeci">void PreProcess(void)</div><div class="ttdoc">Execute the pre process code of spare parts one time per 100ms.</div><div class="ttdef"><b>Definition:</b> picsimlab5.cc:699</div></div>
<div class="ttc" id="aclass_c_p_window5_html_a371988205dfdb7dbb05150751c505f4a"><div class="ttname"><a href="class_c_p_window5.html#a371988205dfdb7dbb05150751c505f4a">CPWindow5::Reset</a></div><div class="ttdeci">void Reset(void)</div><div class="ttdoc">Reset all spare parts.</div><div class="ttdef"><b>Definition:</b> picsimlab5.cc:727</div></div>
<div class="ttc" id="aclass_c_p_window5_html_a7b033d0c44a3dfc514d5506b74ad5abb"><div class="ttname"><a href="class_c_p_window5.html#a7b033d0c44a3dfc514d5506b74ad5abb">CPWindow5::PostProcess</a></div><div class="ttdeci">void PostProcess(void)</div><div class="ttdoc">Execute the post process code of spare parts one time per 100ms.</div><div class="ttdef"><b>Definition:</b> picsimlab5.cc:718</div></div>
<div class="ttc" id="aclass_c_p_window5_html_abf4a593790774e9c184e4876ed7fd1b3"><div class="ttname"><a href="class_c_p_window5.html#abf4a593790774e9c184e4876ed7fd1b3">CPWindow5::Process</a></div><div class="ttdeci">void Process(void)</div><div class="ttdoc">Execute the process code of spare parts N times (where N is the number of steps in 100ms)</div><div class="ttdef"><b>Definition:</b> picsimlab5.cc:708</div></div>
<div class="ttc" id="aclassboard_html_a1f5dedbf50d1ebd86af96429a4a3d180"><div class="ttname"><a href="classboard.html#a1f5dedbf50d1ebd86af96429a4a3d180">board::use_oscope</a></div><div class="ttdeci">int use_oscope</div><div class="ttdoc">use oscilloscope window</div><div class="ttdef"><b>Definition:</b> board.h:491</div></div>
<div class="ttc" id="aclassboard_html_a52d4e88ddf5f29d1648ea94dafbf87de"><div class="ttname"><a href="classboard.html#a52d4e88ddf5f29d1648ea94dafbf87de">board::outputc</a></div><div class="ttdeci">int outputc</div><div class="ttdoc">output map elements counter</div><div class="ttdef"><b>Definition:</b> board.h:490</div></div>
<div class="ttc" id="aclassboard_html_a5c25b0e71ec999af05ef7d43844d7aa2"><div class="ttname"><a href="classboard.html#a5c25b0e71ec999af05ef7d43844d7aa2">board::input</a></div><div class="ttdeci">input_t input[100]</div><div class="ttdoc">input map elements</div><div class="ttdef"><b>Definition:</b> board.h:487</div></div>
<div class="ttc" id="aclassboard_html_a7a851447b6b05b5f600cb587aae0c778"><div class="ttname"><a href="classboard.html#a7a851447b6b05b5f600cb587aae0c778">board::p_RST</a></div><div class="ttdeci">unsigned char p_RST</div><div class="ttdoc">board /RESET pin state</div><div class="ttdef"><b>Definition:</b> board.h:493</div></div>
<div class="ttc" id="aclassboard_html_a92f1e7588769e3cbc7cc0667c1bf3b8c"><div class="ttname"><a href="classboard.html#a92f1e7588769e3cbc7cc0667c1bf3b8c">board::Proc</a></div><div class="ttdeci">lxString Proc</div><div class="ttdoc">Name of processor in use.</div><div class="ttdef"><b>Definition:</b> board.h:486</div></div>
<div class="ttc" id="aclassboard_html_ac41e7f65ae979416dd133853774e206e"><div class="ttname"><a href="classboard.html#ac41e7f65ae979416dd133853774e206e">board::use_spare</a></div><div class="ttdeci">int use_spare</div><div class="ttdoc">use spare parts window</div><div class="ttdef"><b>Definition:</b> board.h:492</div></div>
<div class="ttc" id="aclassboard_html_ad9f8dc51eeea817a22d9ffec01c1f0c2"><div class="ttname"><a href="classboard.html#ad9f8dc51eeea817a22d9ffec01c1f0c2">board::inputc</a></div><div class="ttdeci">int inputc</div><div class="ttdoc">input map elements counter</div><div class="ttdef"><b>Definition:</b> board.h:489</div></div>
<div class="ttc" id="aclassboard_html_ae284da1fb18a28bc32ef30aadde45d30"><div class="ttname"><a href="classboard.html#ae284da1fb18a28bc32ef30aadde45d30">board::output</a></div><div class="ttdeci">output_t output[100]</div><div class="ttdoc">output map elements</div><div class="ttdef"><b>Definition:</b> board.h:488</div></div>
<div class="ttc" id="aclassboard_html_aec4781344e8ceebccdc6ac543a04ce15"><div class="ttname"><a href="classboard.html#aec4781344e8ceebccdc6ac543a04ce15">board::ReadMaps</a></div><div class="ttdeci">void ReadMaps(void)</div><div class="ttdoc">Read maps.</div><div class="ttdef"><b>Definition:</b> board.cc:42</div></div>
<div class="ttc" id="aclassbsim__picsim_html_aecec611827d34618579fb87641f97997"><div class="ttname"><a href="classbsim__picsim.html#aecec611827d34618579fb87641f97997">bsim_picsim::MGetPinCount</a></div><div class="ttdeci">int MGetPinCount(void)</div><div class="ttdoc">board microcontroller pin count</div><div class="ttdef"><b>Definition:</b> bsim_picsim.cc:187</div></div>
<div class="ttc" id="astructinput__t_html_a1e2b92740c7fb766fb0e6a672b9bb498"><div class="ttname"><a href="structinput__t.html#a1e2b92740c7fb766fb0e6a672b9bb498">input_t::x1</a></div><div class="ttdeci">unsigned int x1</div><div class="ttdoc">x1 position</div><div class="ttdef"><b>Definition:</b> board.h:44</div></div>
<div class="ttc" id="astructoutput__t_html_a62355ce1deb5d7a3a7955b5bb25ac26c"><div class="ttname"><a href="structoutput__t.html#a62355ce1deb5d7a3a7955b5bb25ac26c">output_t::x2</a></div><div class="ttdeci">unsigned int x2</div><div class="ttdoc">x2 position</div><div class="ttdef"><b>Definition:</b> board.h:61</div></div>
<div class="ttc" id="astructoutput__t_html_aabca51d7095f7ba0b654cbcfea9cd6b7"><div class="ttname"><a href="structoutput__t.html#aabca51d7095f7ba0b654cbcfea9cd6b7">output_t::y2</a></div><div class="ttdeci">unsigned int y2</div><div class="ttdoc">y2 position</div><div class="ttdef"><b>Definition:</b> board.h:63</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
